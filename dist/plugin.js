!function(j,ae){"object"==typeof exports&&"object"==typeof module?module.exports=ae(require("ionic.angular"),require("ionic.storage"),require("ng.common"),require("ng.core"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("tslib"),require("wako-app.mobile-sdk")):"function"==typeof define&&define.amd?define(["ionic.angular","ionic.storage","ng.common","ng.core","ng.forms","ngx-translate.core","rxjs","tslib","wako-app.mobile-sdk"],ae):"object"==typeof exports?exports.plugin=ae(require("ionic.angular"),require("ionic.storage"),require("ng.common"),require("ng.core"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("tslib"),require("wako-app.mobile-sdk")):j.plugin=ae(j["ionic.angular"],j["ionic.storage"],j["ng.common"],j["ng.core"],j["ng.forms"],j["ngx-translate.core"],j.rxjs,j.tslib,j["wako-app.mobile-sdk"])}(typeof self<"u"?self:this,(yt,j,ae,Pn,Dn,An,Fn,Bn,Mn)=>(()=>{"use strict";var On={372:C=>{C.exports=yt},278:C=>{C.exports=j},223:C=>{C.exports=ae},888:C=>{C.exports=Pn},951:C=>{C.exports=Dn},584:C=>{C.exports=An},832:C=>{C.exports=Fn},748:C=>{C.exports=Bn},95:C=>{C.exports=Mn}},Ct={};function F(C){var k=Ct[C];if(void 0!==k)return k.exports;var d=Ct[C]={exports:{}};return On[C](d,d.exports,F),d.exports}F.d=(C,k)=>{for(var d in k)F.o(k,d)&&!F.o(C,d)&&Object.defineProperty(C,d,{enumerable:!0,get:k[d]})},F.o=(C,k)=>Object.prototype.hasOwnProperty.call(C,k),F.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var Le={};return(()=>{F.r(Le),F.d(Le,{PluginModule:()=>kn,default:()=>us});var xt,C=F(223),k=F(951),d=F(372),L=F(748),t=F(888),ze=F(278);const It=new t.InjectionToken("STORAGE_CONFIG_TOKEN");class Ln extends ze.Storage{constructor(){super()}create(){return(0,L.__awaiter)(this,void 0,void 0,function*(){return this})}defineDriver(){return(0,L.__awaiter)(this,void 0,void 0,function*(){})}get driver(){return"noop"}get(i){return(0,L.__awaiter)(this,void 0,void 0,function*(){return null})}set(i,e){return(0,L.__awaiter)(this,void 0,void 0,function*(){})}remove(i){return(0,L.__awaiter)(this,void 0,void 0,function*(){})}clear(){return(0,L.__awaiter)(this,void 0,void 0,function*(){})}length(){return(0,L.__awaiter)(this,void 0,void 0,function*(){return 0})}keys(){return(0,L.__awaiter)(this,void 0,void 0,function*(){return[]})}forEach(i){return(0,L.__awaiter)(this,void 0,void 0,function*(){})}setEncryptionKey(i){}}function zn(r){return(0,C.isPlatformServer)(this.platformId)?new Ln:new ze.Storage(r)}let le=xt=class{static forRoot(i=null){return{ngModule:xt,providers:[{provide:It,useValue:i},{provide:ze.Storage,useFactory:zn,deps:[It]}]}}};le.\u0275fac=function(i){return new(i||le)},le.\u0275mod=t.\u0275\u0275defineNgModule({type:le}),le.\u0275inj=t.\u0275\u0275defineInjector({});var T=F(584),v=F(95);const Un=new t.InjectionToken("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var p=F(832);let wt=(()=>{class r{constructor(e,n,o){this.ngZone=e,this.document=n,this.window=o,this.copySubject=new p.Subject,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(e){this.config=e}copy(e){if(!this.isSupported||!e)return this.pushCopyResponse({isSuccess:!1,content:e});const n=this.copyFromContent(e);return this.pushCopyResponse(n?{content:e,isSuccess:n}:{isSuccess:!1,content:e})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(e){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){if(e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(e,n=!0){try{this.selectTarget(e);const o=this.copyText();return this.clearSelection(n?e:void 0,this.window),o&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){const e=this.window.clipboardData;return!(e&&e.getData&&!e.getData("Text"))}copyFromContent(e,n=this.document.body){if(this.tempTextArea&&!n.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{n.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=e;const o=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),o}destroy(e=this.document.body){this.tempTextArea&&(e.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(e){return e.select(),e.setSelectionRange(0,e.value.length),e.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(e,n){e&&e.focus(),n.getSelection()?.removeAllRanges()}createTempTextArea(e,n){const o="rtl"===e.documentElement.getAttribute("dir");let s;return s=e.createElement("textarea"),s.style.fontSize="12pt",s.style.border="0",s.style.padding="0",s.style.margin="0",s.style.position="absolute",s.style[o?"right":"left"]="-9999px",s.style.top=(n.pageYOffset||e.documentElement.scrollTop)+"px",s.setAttribute("readonly",""),s}pushCopyResponse(e){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(e)})}pushCopyReponse(e){this.pushCopyResponse(e)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(C.DOCUMENT),t.\u0275\u0275inject(Un,8))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Rn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),r})();function Et(r,i,e,n,o,s,a){try{var l=r[s](a),c=l.value}catch(u){return void e(u)}l.done?i(c):Promise.resolve(c).then(n,o)}function g(r){return function(){var i=this,e=arguments;return new Promise(function(n,o){var s=r.apply(i,e);function a(c){Et(s,n,o,a,l,"next",c)}function l(c){Et(s,n,o,a,l,"throw",c)}a(void 0)})}}class B extends v.WakoCacheService{}B.storageEngine=new v.WakoStorage({name:"wako_helios_cache"});class kt{}class jn extends kt{}function P(...r){(0,v.wakoLog)("plugin.helios",r)}function Tt(r){const i=127397,o=(r=r.toUpperCase()).codePointAt(0),s=r.codePointAt(1);if(2!==r.length||o>90||o<65||s>90||s<65)throw new Error("Not an alpha2 country code");return String.fromCodePoint(o+i)+String.fromCodePoint(s+i)}function ee(r){const i="."+r.split(".").pop().toLowerCase();return Pt("video").split("|").includes(i)}function Pt(r){return"video"===r?".m4v|.3g2|.3gp|.nsv|.tp|.ts|.ty|.strm|.pls|.rm|.rmvb|.mpd|.m3u|.m3u8|.ifo|.mov|.qt|.divx|.xvid|.bivx|.vob|.nrg|.img|.iso|.pva|.wmv|.asf|.asx|.ogm|.m2v|.avi|.bin|.dat|.mpg|.mpeg|.mp4|.mkv|.mk3d|.avc|.vp3|.svq3|.nuv|.viv|.dv|.fli|.flv|.rar|.001|.wpl|.vdr|.dvr-ms|.xsp|.mts|.m2t|.m2ts|.evo|.ogv|.sdp|.avs|.rec|.url|.pxml|.vc1|.h264|.rcv|.rss|.mpls|.webm|.bdmv|.wtv|.pvr|.disc":"music"===r?".nsv|.m4a|.flac|.aac|.strm|.pls|.rm|.rma|.mpa|.wav|.wma|.ogg|.mp3|.mp2|.m3u|.gdm|.imf|.m15|.sfx|.uni|.ac3|.dts|.cue|.aif|.aiff|.wpl|.ape|.mac|.mpc|.mp+|.mpp|.shn|.rar|.wv|.dsp|.xsp|.xwav|.waa|.wvs|.wam|.gcm|.idsp|.mpdsp|.mss|.spt|.rsd|.sap|.cmc|.cmr|.dmc|.mpt|.mpd|.rmt|.tmc|.tm8|.tm2|.oga|.url|.pxml|.tta|.rss|.wtv|.mka|.tak|.opus|.dff|.dsf|.cdda":"picture"===r?".png|.jpg|.jpeg|.bmp|.gif|.ico|.tif|.tiff|.tga|.pcx|.cbz|.cbr|.rar|.rss|.webp|.jp2|.apng":""}function N(r){return r.toString().padStart(2,"0")}function Ue(r,i){return Object.keys(i).forEach(e=>{r=r.split(e).join(i[e])}),r.toLowerCase()}function Se(r){const i="s";return(r=(r=(r=(r=(r=(r=(r=(r=(r=r.toLowerCase()).replace("\\'s",i)).replace("'s",i)).replace("&#039;s",i)).replace(" 039 s",i)).replace(/\:|\\|\/|\,|\!|\?|\(|\)|\'|\"|\\|\[|\]|\-|\_|\./g," ")).replace(/\s+/g," ")).replace("  "," ")).replace(/\&/g,"and")).trim()}function ye(r){r.sort((i,e)=>{const n=i.isPackage,o=e.isPackage;return n===o?0:n>o?-1:1})}function Re(r){r.sort((i,e)=>{const n=i.size,o=e.size;return n===o?0:n>o?-1:1})}function Vn(r){r.sort((i,e)=>{const n=i.seeds,o=e.seeds;return n===o?0:n>o?-1:1})}function Dt(r){const i=r.seeds-r.peers;let e=0;return i>=100?e+=150:i>=20?e+=i:i<20&&(e-=100),r.seeds<20&&(e-=100),e+=r.size/1024/1024/1024,e}function At(r){r.sort((i,e)=>{const n=Dt(i),o=Dt(e);return n===o?0:n>o?-1:1})}function je(r,i){const e=function Nn(r){if(!r.match(/S([0-9]+)E([0-9]+)/i))return null;const i=r.match(/S([0-9]+)E([0-9]+)/i),e=i[1],n=i[2],o=+e,s=+n;return{episodeStrings:[`s${e}e${n} `,`s${e}e${n}e${N(s+1)} `,`s${e}e${N(s-1)}e${n} `,`s${o}e${n} `,`s${e}e${s} `,`s${o}e${s} `,`${o}x${s} `,`${e}x${n} `,`${o}x${n} `,`[${e} ${s}] `,`[${o} ${n}] `,`[${o} ${s}] `,`[${e}x${s}] `,`[${o}x${n}] `,`[${o}x${s}] `,`${o}${n} `,`${e}${n} `,`${o}.${n} `,`${e}.${s} `,`${e}.${n} `],seasonStrings:[`season ${o} `,`season ${e} `,`s${o} `,`s${e} `,`series ${e} `,`series ${o} `],season2:e,episode2:n}}(r),n="."+i.split(".").pop();if(!Pt("video").split("|").includes(n)||!e)return!1;let s=!1;return e.episodeStrings.forEach(a=>{!s&&-1!==Se(i).indexOf(a)&&(s=!0)}),!s&&i.toLowerCase().match("s"+e.season2)&&i.toLowerCase().match("e"+e.episode2)&&(s=!0),s}function Ce(r,i){const e={sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]};return r.forEach(n=>{"2160p"===n.quality?e.sources2160p.push(n):"1080p"===n.quality?e.sources1080p.push(n):"720p"===n.quality?e.sources720p.push(n):e.sourcesOther.push(n)}),i(e.sources2160p),i(e.sources1080p),i(e.sources720p),i(e.sourcesOther),e}function Ft(r,i){let e=r.toLowerCase().split("/").pop().trim().replace(/\./g," ").split(" "),n=i.toLowerCase().trim().replace(/\./g," ").split(" "),o=0;return e.forEach(s=>{n.includes(s)&&o++}),o}function xe(r){const i=r.match(/s([0-9]*)e([0-9]*)/i);if(i)return function qn(r,i){return"S"+N(r)+"E"+N(i)}(+i[1],+i[2]+1);if(r.match("Ep"))return"Ep "+(+r.replace("Ep ","")+1);throw new Error("Invalid episode code")}function Ne(r,i){const n=new URLSearchParams;return n.set("uri",r),i&&(n.set("type",i.episode?"episode":"movie"),(i.episode||i.movie)&&n.set("tmdb",(i.episode?i.episode.showTmdbId:i.movie.tmdbId).toString()),i.episode&&(n.set("show",i.episode.showTmdbId.toString()),n.set("season",i.episode.seasonNumber.toString()),n.set("episode",i.episode.episodeNumber.toString()))),"plugin://plugin.video.elementum/play?"+n.toString()}function Ve(r,i){const e=[];return r.filter(n=>null===n[i]||!e.includes(n[i])&&(e.push(n[i]),!0))}function te(r){return{movieIds:r.movie?r.movie.ids:null,showIds:r.show?r.show.ids:null,seasonNumber:r.episode?r.episode.seasonNumber:null,episodeNumber:r.episode?r.episode.number:null}}function Bt(r,i){let e=!1;if(i.episode&&r.length>1){const n=i.episode.episodeCode;r.forEach(o=>{je(n,o.filename)&&(e=!0)})}return e}function Mt(r,i){return r.titleLang===i||(r.movie&&r.movie.alternativeTitles&&r.movie.alternativeTitles[i]&&(r.movie.title=r.movie.alternativeTitles[i]),r.show&&r.show.alternativeTitles&&r.show.alternativeTitles[i]&&(r.show.title=r.show.alternativeTitles[i]),r.titleLang=i),r}function Ie(r){let i=null;if(r&&r.match("magnet"))try{i=r.split(":")[3].split("&")[0]}catch{}return i}let G=(()=>{class r extends v.WakoBaseHttpService{static getSimultaneousRequest(){return 20}static getCacheService(){return B}static handleError(e){return e instanceof v.WakoHttpError&&503===e.status&&e.response.match("Ray ID")?this.cfBypasser(e):(P("ProviderHttp err",e),e instanceof v.WakoHttpError&&(P("METHOD: "+e.request.method),P("URL: "+e.request.url)),(0,p.throwError)(e))}static cfBypasser(e){return typeof cordova>"u"||!cordova.InAppBrowser?(0,p.throwError)(e):new p.Observable(n=>{let o=null;P("CF - Bypassing",e.request.url);const s=cordova.InAppBrowser.open(e.request.url,"_blank","location=yes,hidden=yes");s.addEventListener("loadstop",()=>{s.executeScript({code:"document.getElementsByTagName('html')[0].innerHTML"},a=>{const l=a.pop();"string"==typeof l&&null===l.match("Ray ID")&&(P("CF - Bypassed",l),clearTimeout(o),s.close(),n.next(l),n.complete())})}),o=setTimeout(()=>{s.close(),n.error(e)},1e4)})}}return r.byPassCors=!0,r.queueEnabled=!0,r})();class q extends G{static hasApiKey(){return!!this.apikey}static setApiKey(i){this.apikey=i}static getApiBaseUrl(){return"https://www.premiumize.me/api"}static getHeaders(){return{"Content-Type":"application/x-www-form-urlencoded"}}static addParamsToUrl(i,e){if(e){const n=new URLSearchParams("");for(const o in e)e[o]&&n.set(o,e[o]);i+=(i.match(/\?/)?"&":"?")+decodeURIComponent(n.toString()).replace(/\u2019/gi,"'")}return i}static get(i,e,n){return e||(e={}),e.apikey||(e.apikey=this.apikey),super.get(this.addParamsToUrl(i,e),null,n,4e4)}static post(i,e,n){return i.match("apikey")||(i+="?apikey="+this.apikey),super.request({method:"POST",url:this.getApiBaseUrl()+i,body:e,headers:this.getHeaders()},n)}}class Ot{static submit(i){return q.post("/account/info"+(i?"?apikey="+i:""),null,"15min")}}function A(r){return"function"==typeof r}function U(r){return i=>{if(function Wn(r){return A(r?.lift)}(i))return i.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(r){return U((i,e)=>{try{i.subscribe(e)}finally{e.add(r)}})}function $e(r){const e=r(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const He=$e(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,o)=>`${o+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function qe(r,i){if(r){const e=r.indexOf(i);0<=e&&r.splice(e,1)}}class J{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(A(n))try{n()}catch(s){i=s instanceof He?s.errors:[s]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const s of o)try{zt(s)}catch(a){i=i??[],a instanceof He?i=[...i,...a.errors]:i.push(a)}}if(i)throw new He(i)}}add(i){var e;if(i&&i!==this)if(this.closed)zt(i);else{if(i instanceof J){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&qe(e,i)}remove(i){const{_finalizers:e}=this;e&&qe(e,i),i instanceof J&&i._removeParent(this)}}function Lt(r){return r instanceof J||r&&"closed"in r&&A(r.remove)&&A(r.add)&&A(r.unsubscribe)}function zt(r){A(r)?r():r.unsubscribe()}J.EMPTY=(()=>{const r=new J;return r.closed=!0,r})();const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},we={setTimeout(r,i,...e){const{delegate:n}=we;return n?.setTimeout?n.setTimeout(r,i,...e):setTimeout(r,i,...e)},clearTimeout(r){const{delegate:i}=we;return(i?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Ut(r){we.setTimeout(()=>{const{onUnhandledError:i}=ne;if(!i)throw r;i(r)})}function Ke(){}const Zn=We("C",void 0,void 0);function We(r,i,e){return{kind:r,value:i,error:e}}let ie=null;class Ge extends J{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,Lt(i)&&i.add(this)):this.destination=ri}static create(i,e,n){return new Ze(i,e,n)}next(i){this.isStopped?Ye(function Qn(r){return We("N",r,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Ye(function Yn(r){return We("E",void 0,r)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Ye(Zn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ti=Function.prototype.bind;function Je(r,i){return ti.call(r,i)}class ni{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){Ee(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){Ee(n)}else Ee(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){Ee(e)}}}class Ze extends Ge{constructor(i,e,n){let o;if(super(),A(i)||!i)o={next:i??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&ne.useDeprecatedNextContext?(s=Object.create(i),s.unsubscribe=()=>this.unsubscribe(),o={next:i.next&&Je(i.next,s),error:i.error&&Je(i.error,s),complete:i.complete&&Je(i.complete,s)}):o=i}this.destination=new ni(o)}}function Ee(r){ne.useDeprecatedSynchronousErrorHandling?function ei(r){ne.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=r)}(r):Ut(r)}function Ye(r,i){const{onStoppedNotification:e}=ne;e&&we.setTimeout(()=>e(r,i))}const ri={closed:!0,next:Ke,error:function ii(r){throw r},complete:Ke},Qe="function"==typeof Symbol&&Symbol.observable||"@@observable";function me(r){return r}let X=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,o){const s=function si(r){return r&&r instanceof Ge||function oi(r){return r&&A(r.next)&&A(r.error)&&A(r.complete)}(r)&&Lt(r)}(e)?e:new Ze(e,n,o);return function Xn(r){if(ne.useDeprecatedSynchronousErrorHandling){const i=!ie;if(i&&(ie={errorThrown:!1,error:null}),r(),i){const{errorThrown:e,error:n}=ie;if(ie=null,e)throw n}}else r()}(()=>{const{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=jt(n))((o,s)=>{const a=new Ze({next:l=>{try{e(l)}catch(c){s(c),a.unsubscribe()}},error:s,complete:o});this.subscribe(a)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Qe](){return this}pipe(...e){return function Rt(r){return 0===r.length?me:1===r.length?r[0]:function(e){return r.reduce((n,o)=>o(n),e)}}(e)(this)}toPromise(e){return new(e=jt(e))((n,o)=>{let s;this.subscribe(a=>s=a,a=>o(a),()=>n(s))})}}return r.create=i=>new r(i),r})();function jt(r){var i;return null!==(i=r??ne.Promise)&&void 0!==i?i:Promise}const ui=function di(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function re(r){if(r instanceof X)return r;if(null!=r){if(function ai(r){return A(r[Qe])}(r))return function fi(r){return new X(i=>{const e=r[Qe]();if(A(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if((r=>r&&"number"==typeof r.length&&"function"!=typeof r)(r))return function gi(r){return new X(i=>{for(let e=0;e<r.length&&!i.closed;e++)i.next(r[e]);i.complete()})}(r);if(function Jn(r){return A(r?.then)}(r))return function _i(r){return new X(i=>{r.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,Ut)})}(r);if(function li(r){return Symbol.asyncIterator&&A(r?.[Symbol.asyncIterator])}(r))return Nt(r);if(function pi(r){return A(r?.[ui])}(r))return function vi(r){return new X(i=>{for(const e of r)if(i.next(e),i.closed)return;i.complete()})}(r);if(function hi(r){return A(r?.getReader)}(r))return function bi(r){return Nt(function mi(r){return(0,L.__asyncGenerator)(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:n,done:o}=yield(0,L.__await)(e.read());if(o)return yield(0,L.__await)(void 0);yield yield(0,L.__await)(n)}}finally{e.releaseLock()}})}(r))}(r)}throw function ci(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}(r)}function Nt(r){return new X(i=>{(function Si(r,i){var e,n,o,s;return(0,L.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,L.__asyncValues)(r);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(a){o={error:a}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(o)throw o.error}}i.complete()})})(r,i).catch(e=>i.error(e))})}function M(r,i,e,n,o){return new yi(r,i,e,n,o)}class yi extends Ge{constructor(i,e,n,o,s,a){super(i),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=e?function(l){try{e(l)}catch(c){i.error(c)}}:super._next,this._error=o?function(l){try{o(l)}catch(c){i.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function D(r){return U((i,e)=>{let s,n=null,o=!1;n=i.subscribe(M(e,void 0,void 0,a=>{s=re(r(a,D(r)(i))),n?(n.unsubscribe(),n=null,s.subscribe(e)):o=!0})),o&&(n.unsubscribe(),n=null,s.subscribe(e))})}function y(r,i){return U((e,n)=>{let o=null,s=0,a=!1;const l=()=>a&&!o&&n.complete();e.subscribe(M(n,c=>{o?.unsubscribe();let u=0;const h=s++;re(r(c,h)).subscribe(o=M(n,m=>n.next(i?i(c,m,h,u++):m),()=>{o=null,l()}))},()=>{a=!0,l()}))})}let z=(()=>{class r extends G{static getApiBaseUrl(){return"https://api.real-debrid.com/rest/1.0"}static getHeaders(){const e={"Content-Type":"application/x-www-form-urlencoded"};return this.getToken()&&(e.Authorization=`Bearer ${this.getToken()}`),e}static handleError(e){return e instanceof v.WakoHttpError&&404!==e.status&&403!==e.status?super.unHandleError(e):(0,p.throwError)(e)}static request(e,n,o=4e4,s=!0,a,l){return super.request(e,n,o,s,a,l).pipe(D(c=>c instanceof v.WakoHttpError&&401===c.status&&this.handle401?(console.log("Refreshing RD"),this.handle401.pipe(y(u=>u?(e.headers=null,super.request(e,n,o,!0,a,l)):(0,p.throwError)(c)))):(0,p.throwError)(c)))}static post(e,n,o,s,a=!0){return this.request({method:"POST",url:this.getApiBaseUrl()+e,body:n,headers:this.getHeaders()},o,s??4e4,a)}static get(e,n,o,s,a=!0){return this.request({url:this.getApiBaseUrl()+v.WakoHttpService.addParamsToUrl(e,n),method:"GET"},o,s??4e4,a)}}return r.queueEnabled=!0,r})();class Xe extends z{static getApiBaseUrl(){return"https://api.real-debrid.com/oauth/v2"}}function I(r,i){return U((e,n)=>{let o=0;e.subscribe(M(n,s=>{n.next(r.call(i,s,o++))}))})}function K(r){return I(()=>r)}class Vt{static submit(i,e,n){return Xe.post("/token",{client_id:i,client_secret:e,code:n,grant_type:"http://oauth.net/grant_type/device/1.0"})}}let $=(()=>{class r extends G{static hasApiKey(){return!!this.apikey}static setApiKey(e){this.apikey=e}static setName(e){this.appName=e}static getApiBaseUrl(){return"https://api.alldebrid.com/v4"}static getHeaders(){return{"Content-Type":"application/x-www-form-urlencoded"}}static get(e,n,o){return n||(n={}),n.apikey||(n.apikey=this.apikey),n.agent||(n.agent=this.appName),super.get(e,n,o)}static post(e,n,o){return e.match("apikey")||(e+="?apikey="+this.apikey+"&agent="+this.appName),super.request({method:"POST",url:this.getApiBaseUrl()+e,body:n,headers:this.getHeaders()},o)}}return r.apikey=null,r.appName=null,r})();const $t=["open-elementum","copy-url","share-url","open-vlc","download-vlc","open-browser","open-kodi","open-nplayer","add-to-pm","add-to-rd","add-to-ad","add-to-playlist","open-infuse","cast","open-outplayer"],Ht=["open-elementum","copy-url","share-url","open-vlc","open-browser","open-kodi","open-with","add-to-pm","add-to-rd","add-to-ad","add-to-playlist","cast"];class Ii{constructor(){this.premiumize=null,this.realDebrid=null,this.allDebrid=null,this.defaultPlayButtonAction="let-me-choose",this.availablePlayButtonActions=[],this.qualities=[{quality:"2160p",displayName:"2160p/4k",enabled:!1},{quality:"1080p",displayName:"1080p",enabled:!0},{quality:"720p",displayName:"720p",enabled:!1},{quality:"other",displayName:"Other",enabled:!1}],this.openRemoteAfterClickOnPlay=!0,this.enableEpisodeAutomaticPlaylist=!0,this.fileSizeFilteringMovie={enabled:!1,maxSize:0,minSize:0},this.fileSizeFilteringTv={enabled:!1,maxSize:0,minSize:0},this.defaultTitleLang="en",this.sourceFilter={sortStreamsBy:"size",sortTorrentsBy:"balanced",groupStreamsByQuality:!0,groupTorrentsByQuality:!0,excludeTags:[]},this.simultaneousProviderQueries=0,this.availablePlayButtonActions=["open-kodi","cast","open-vlc","share-url"]}}let R=(()=>{class r{constructor(){this.storageCategory="plugin.helios_settings",this.settings$=v.WakoSettingsService.onChangeByCategory(this.storageCategory)}get(){var e=this;return g(function*(){let n=yield v.WakoSettingsService.getByCategory(e.storageCategory);const o=new Ii;return n||(n=o),Object.keys(o).forEach(s=>{void 0===n[s]&&(n[s]=o[s])}),n})()}set(e){var n=this;return g(function*(){return yield v.WakoSettingsService.setByCategory(n.storageCategory,e)})()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();const qt="X245A4XAIBGVM";let oe=(()=>{class r{constructor(e,n){this.settingsService=e,this.platform=n,this.hasAtLeastOneAccount$=new p.ReplaySubject(1),this.ready$=new p.ReplaySubject(1),this.hasAtLeastOneAccount(),this.platform.is("cordova")&&this.platform.resume.subscribe(()=>{this.initialize()}),this.settingsService.settings$.subscribe(()=>{this.hasAtLeastOneAccount()})}initialize(){var e=this;return g(function*(){const n=yield e.settingsService.get(),o=n.premiumize;o&&!0!==o.disabled&&q.setApiKey(o.apiKey);const s=n.realDebrid;s&&!0!==s.disabled&&(z.setToken(s.access_token),e.realDebridRefreshToken().subscribe()),z.handle401=e.realDebridRefreshToken();const a=n.allDebrid;a&&!0!==a.disabled&&($.setApiKey(a.apiKey),$.setName(a.name)),e.ready$.next(!0)})()}hasAtLeastOneAccount(){var e=this;return g(function*(){const n=yield e.settingsService.get(),o=n.premiumize,s=n.realDebrid,a=n.allDebrid;let l=!1;return(o&&!0!==o.disabled||s&&!0!==s.disabled||a&&!0!==a.disabled)&&(l=!0),e.hasAtLeastOneAccount$.next(l),l})()}getPremiumizeSettings(){var e=this;return g(function*(){return(yield e.settingsService.get()).premiumize})()}setPremiumizeSettings(e){var n=this;return g(function*(){const o=yield n.settingsService.get();return o.premiumize=e,yield n.settingsService.set(o)})()}deletePremiumizeSettings(){return this.setPremiumizeSettings(null)}realDebridRefreshToken(){return(0,p.from)(this.getRealDebridSettings()).pipe(y(e=>e?Vt.submit(e.client_id,e.client_secret,e.refresh_token).pipe(y(n=>(console.log("RD token refreshed",n),z.setToken(n.access_token),(0,p.from)(this.setRealDebridSettings({disabled:e.disabled,client_id:e.client_id,client_secret:e.client_secret,access_token:n.access_token,refresh_token:n.refresh_token,expires_in:n.expires_in})).pipe(K(n)))),D(n=>(n instanceof v.WakoHttpError&&403===n.status&&(this.deleteRealDebridSettings(),z.setToken(null)),(0,p.throwError)(n)))):(0,p.of)(null)))}initializeRefreshTokenRealDebridInterval(e){this.realDebridRefreshTokenInterval&&clearInterval(this.realDebridRefreshTokenInterval),this.realDebridRefreshTokenInterval=setInterval(()=>{this.realDebridRefreshToken().subscribe()},1e3*(e.expires_in-700))}getRealDebridSettings(){var e=this;return g(function*(){return(yield e.settingsService.get()).realDebrid})()}setRealDebridSettings(e){var n=this;return g(function*(){const o=yield n.settingsService.get();o.realDebrid=e;const s=yield n.settingsService.set(o);return e&&n.initializeRefreshTokenRealDebridInterval(e),s})()}deleteRealDebridSettings(){return this.setRealDebridSettings(null)}stopRealDebridAuthInterval(){clearInterval(this.realDebridAuthInterval)}authRealDebrid(e,n){return new p.Observable(o=>{const s=Date.now()+1e3*n.expires_in;this.realDebridAuthInterval=setInterval(()=>{if(Date.now()>s)return this.stopRealDebridAuthInterval(),void o.error("Cannot get code");(class xi{static submit(i,e){return Xe.get("/device/credentials",{client_id:i,code:e})}}).submit(e,n.device_code).pipe(D(a=>a instanceof v.WakoHttpError&&403===a.status?p.NEVER:(0,p.throwError)(a))).subscribe(a=>{this.stopRealDebridAuthInterval(),Vt.submit(a.client_id,a.client_secret,n.device_code).subscribe(l=>{this.setRealDebridSettings({disabled:!1,client_id:a.client_id,client_secret:a.client_secret,access_token:l.access_token,refresh_token:l.refresh_token,expires_in:l.expires_in}).then(()=>{o.next(!0),o.complete()})})})},1e3*n.interval)})}getAllDebridSettings(){var e=this;return g(function*(){return(yield e.settingsService.get()).allDebrid})()}setAllDebridSettings(e){var n=this;return g(function*(){const o=yield n.settingsService.get();return o.allDebrid=e,yield n.settingsService.set(o)})()}deleteAllDebridSettings(){return this.setAllDebridSettings(null)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(R),t.\u0275\u0275inject(d.Platform))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})(),ce=(()=>{class r{constructor(e,n){this.toastCtrl=e,this.translateService=n}simpleMessage(e,n,o=2e3,s="top"){this.translateService.get(e,n).subscribe(a=>{this.toastCtrl.create({message:a,mode:"ios",position:s,duration:o}).then(l=>{l.present()})})}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(d.ToastController),t.\u0275\u0275inject(T.TranslateService))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();const et=$e(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function Kt(r,i){return U((e,n)=>{let o=0;e.subscribe(M(n,s=>r.call(i,s,o++)&&n.next(s)))})}const tt=new X(r=>r.complete());function ki(r){return r<=0?()=>tt:U((i,e)=>{let n=[];i.subscribe(M(e,o=>{n.push(o),r<n.length&&n.shift()},()=>{for(const o of n)e.next(o);e.complete()},void 0,()=>{n=null}))})}function Wt(r=Ti){return U((i,e)=>{let n=!1;i.subscribe(M(e,o=>{n=!0,e.next(o)},()=>n?e.complete():e.error(r())))})}function Ti(){return new et}function Gt(r){return U((i,e)=>{let n=!1;i.subscribe(M(e,o=>{n=!0,e.next(o)},()=>{n||e.next(r),e.complete()}))})}function he(r,i){const e=arguments.length>=2;return n=>n.pipe(r?Kt((o,s)=>r(o,s,n)):me,ki(1),e?Gt(i):Wt(()=>new et))}const ke={};console.log("testProviders",JSON.stringify(ke));const Jt="CACHE_KEY_PROVIDERS";let Z=(()=>{class r{constructor(e,n){this.storage=e,this.toastService=n,this.providerStorageKey="provider_key",this.providerUrlsStorageKey="provider_urls",this.providerUrlsToSyncStorageKey="provider_urls_to_sync"}initialize(){var e=this;return g(function*(){setTimeout(()=>{e.refreshProviders()},1e4),yield e.restoreProvidersIfNeeded()})()}restoreProvidersIfNeeded(){var e=this;return g(function*(){const n=yield e.getProviderUrls(),o=yield v.WakoSettingsService.getByCategory(e.providerUrlsToSyncStorageKey);if(o){if(JSON.stringify(o)!==JSON.stringify(n)){P("Restore providers",n,o);for(const s of n)yield e.deleteProviderUrl(s).toPromise();for(const s of o)yield e.addProviderUrl(s).toPromise()}}else yield v.WakoSettingsService.setByCategory(e.providerUrlsToSyncStorageKey,n)})()}static getNameWithEmojiFlag(e){const n=[];return e.languages.forEach(o=>{try{const s=Tt("en"===o?"us":o);n.push(s)}catch(s){console.log("e",s)}}),e.name+" "+n.join(" ")}getAll(e=!0,n){return this.getProviders().then(o=>{if(!o)return[];let s=[];return Object.keys(o).forEach(a=>{s.push(o[a])}),e&&(s=s.filter(a=>!0===a.enabled)),n&&(s=s.filter(a=>!!("movie"===n&&a.movie||"tv"===n&&(a.episode||a.season)||"anime"===n&&a.anime))),s})}getProviderUrls(){var e=this;return g(function*(){return yield e.storage.get(e.providerUrlsStorageKey).then(n=>n||[])})()}setProviderUrls(e){var n=this;return g(function*(){return yield v.WakoSettingsService.setByCategory(n.providerUrlsToSyncStorageKey,e),yield n.storage.set(n.providerUrlsStorageKey,e)})()}addProviderUrlToStorage(e){var n=this;return g(function*(){const o=yield n.getProviderUrls();return o.includes(e)||o.push(e),yield n.setProviderUrls(o)})()}addProviderUrl(e){return this.isValidUrlProvider(e).pipe(y(n=>n?(0,p.from)(this.addProviderUrlToStorage(e)).pipe(y(()=>(0,p.from)(this.getProviderUrls())),y(o=>this.setProvidersFromUrls(o,!1))):(0,p.throwError)("Invalid URL")))}deleteProviderUrl(e){return(0,p.from)(this.getProviderUrls()).pipe(y(n=>{const o=[];return n.forEach(s=>{s!==e&&o.push(s)}),(0,p.from)(this.setProviderUrls(o)).pipe(y(()=>this.setProvidersFromUrls(o,!1)))}))}getProviders(){return Object.keys(ke).length>0?(console.log("Gonna use the test provider"),Promise.resolve(ke)):this.storage.get(this.providerStorageKey)}setProviders(e,n=!1){var o=this;return g(function*(){const s=yield o.getProviders();if(s&&n){let a=Object.keys(s).length===Object.keys(e).length;a&&Object.keys(s).forEach(l=>{const c=Object.assign({},s[l]),u=Object.assign({},e[l]);c.enabled=!0,u.enabled=!0,JSON.stringify(c)!==JSON.stringify(u)&&(a=!1)}),a?console.log("no changes"):o.toastService.simpleMessage("toasts.providersUpdated"),Object.keys(s).forEach(l=>{e.hasOwnProperty(l)&&(e[l].enabled=s[l].enabled)})}return o.storage.set(o.providerStorageKey,e).then(()=>{n||B.clear()})})()}setProvidersFromUrls(e,n=!1){const o=[],s=[];e.forEach(l=>{s.push(v.WakoHttpRequestService.request({url:l,method:"GET"},null,2e4,!0).pipe(D(()=>(o.push(l),p.EMPTY)),y(c=>n&&"object"!=typeof c?p.EMPTY:(0,p.of)(c))))}),0===e.length&&s.push((0,p.of)({}));const a={};return(0,p.concat)(...s).pipe(I(l=>(Object.keys(l).forEach(c=>{a.hasOwnProperty(c)||(a[c]=l[c])}),a)),he(),y(l=>"string"==typeof l?(0,p.of)(!1):(0,p.from)(this.setProviders(l,n)).pipe(y(()=>{const c=[];return e.forEach(u=>{o.includes(u)||c.push(u)}),(0,p.from)(this.setProviderUrls(c))}),I(()=>!0))),D(()=>(0,p.of)(!1)))}refreshProviders(){var e=this;B.get(Jt).subscribe(function(){var n=g(function*(o){if(o)return void console.log("check providers later");const s=yield e.getProviderUrls();e.setProvidersFromUrls(s,!0).subscribe(),B.set(Jt,!0,"1d")});return function(o){return n.apply(this,arguments)}}())}isValidUrlProvider(e){return v.WakoHttpRequestService.request({url:e,method:"GET"},null,2e4,!0).pipe(D(()=>(0,p.of)(!1)),I(n=>{let o=!1;return"object"==typeof n&&Object.keys(n).forEach(s=>{n[s].base_url&&(o=!0)}),o}))}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(v.WakoStorage),t.\u0275\u0275inject(ce))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();function Di(r,i){1&r&&t.\u0275\u0275element(0,"ion-spinner")}function Ai(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",9),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.isPremiumizeEnabled=o)})("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.toggleEnabledPM(o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"shared.enabled")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.isPremiumizeEnabled)}}function Fi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label",10),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",9),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.preferTranscoded=o)})("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.togglePreferTranscoded(o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"pages.debrid-account.list.premiumize.preferTranscoded")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.preferTranscoded)}}function Bi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label",10),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",9),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.preferTranscodedFilesChromecast=o)})("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.togglePreferTranscodedChromecast(o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"pages.debrid-account.list.premiumize.preferTranscodedFilesChromecast")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.preferTranscodedFilesChromecast)}}function Mi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.logoutPremiumize())}),t.\u0275\u0275elementStart(1,"ion-label",12),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.logout")))}function Oi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.loginPremiumize())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.login")))}function Li(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.openPremiumize())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.premiumize.noAccount")))}function zi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",9),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.isRealDebridEnabled=o)})("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.toggleEnabledRD(o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"shared.enabled")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.isRealDebridEnabled)}}function Ui(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.logoutRealDebrid())}),t.\u0275\u0275elementStart(1,"ion-label",12),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.logout")))}function Ri(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.loginRealDebrid())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.login")))}function ji(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.openRealDebrid())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.realDebrid.noAccount")))}function Ni(r,i){1&r&&t.\u0275\u0275element(0,"ion-spinner")}function Vi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",9),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.isAllDebridEnabled=o)})("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.toggleEnabledAD(o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"shared.enabled")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.isAllDebridEnabled)}}function $i(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.logoutAllDebrid())}),t.\u0275\u0275elementStart(1,"ion-label",12),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.logout")))}function Hi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.loginAllDebrid())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.login")))}function qi(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.openAllDebrid())}),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"pages.debrid-account.list.allDebrid.noAccount")))}let nt=(()=>{class r{constructor(e,n,o,s,a,l,c){this.debridAccountService=e,this.alertController=n,this.translateService=o,this.toastService=s,this.providerService=a,this.clipboardService=l,this.ngZone=c,this.isLoadingPremiumize=!1,this.isLoadingAllDebrid=!1,this.preferTranscoded=!1,this.preferTranscodedFilesChromecast=!1,this.isPremiumizeEnabled=!0,this.isRealDebridEnabled=!0,this.isAllDebridEnabled=!0,this.isPremiumizeLogged=!1,this.isRealDebridLogged=!1,this.isAllDebridLogged=!1}ngOnInit(){this.debridAccountService.getPremiumizeSettings().then(e=>{this.isPremiumizeLogged=!!e,this.preferTranscoded=!!e&&e.preferTranscodedFiles,this.preferTranscodedFilesChromecast=!!e&&e.preferTranscodedFilesChromecast,this.isPremiumizeEnabled=!!e&&!0!==e.disabled,q.setApiKey(e?e.apiKey:null)}),this.debridAccountService.getRealDebridSettings().then(e=>{this.isRealDebridLogged=!!e,this.isRealDebridEnabled=!!e&&!0!==e.disabled,z.setToken(e?e.access_token:null)}),this.debridAccountService.getAllDebridSettings().then(e=>{this.isAllDebridLogged=!!e,this.isAllDebridEnabled=!!e&&!0!==e.disabled,$.setApiKey(e?e.apiKey:null),$.setName(e?e.name:null)})}logoutPremiumize(){this.debridAccountService.deletePremiumizeSettings().then(()=>{this.ngOnInit()})}loginPremiumize(){this.alertController.create({header:"Enter your API-Key / PIN",inputs:[{name:"apikey",type:"text",placeholder:"API-Key / PIN",value:""}],buttons:[{text:this.translateService.instant("alerts.cancelButton"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:e=>{this.isLoadingPremiumize=!0,Ot.submit(e.apikey).pipe(V(()=>this.isLoadingPremiumize=!1)).subscribe(n=>{"error"!==n.status?(this.providerService.getAll(!1).then(o=>{0===o.length&&this.toastService.simpleMessage("toasts.cloud-account.needToAddProviders",null,4e3)}),this.debridAccountService.getPremiumizeSettings().then(o=>{o||(o={disabled:!1,apiKey:"",preferTranscodedFiles:this.preferTranscoded,preferTranscodedFilesChromecast:this.preferTranscodedFilesChromecast}),o.apiKey=e.apikey,this.debridAccountService.setPremiumizeSettings(o).then(()=>{this.ngZone.run(()=>{this.ngOnInit()})})})):this.toastService.simpleMessage("toasts.premiumize.invalidApiKey")})}}]}).then(e=>{e.present()})}openPremiumize(){v.BrowserService.open("https://www.premiumize.me/ref/509582268")}togglePreferTranscoded(e){this.debridAccountService.getPremiumizeSettings().then(n=>{!n||(n.preferTranscodedFiles=e,this.debridAccountService.setPremiumizeSettings(n).then(()=>{this.ngOnInit()}))})}togglePreferTranscodedChromecast(e){this.debridAccountService.getPremiumizeSettings().then(n=>{!n||(n.preferTranscodedFilesChromecast=e,this.debridAccountService.setPremiumizeSettings(n).then(()=>{this.ngOnInit()}))})}toggleEnabledPM(e){this.debridAccountService.getPremiumizeSettings().then(n=>{!n||(n.disabled=!e,this.debridAccountService.setPremiumizeSettings(n).then(()=>{this.ngOnInit(),document.location.reload()}))})}toggleEnabledRD(e){this.debridAccountService.getRealDebridSettings().then(n=>{!n||(n.disabled=!e,this.debridAccountService.setRealDebridSettings(n).then(()=>{this.ngOnInit(),document.location.reload()}))})}logoutRealDebrid(){var e=this;return g(function*(){yield e.debridAccountService.deleteRealDebridSettings(),e.ngOnInit()})()}loginRealDebrid(){(class Ci{static submit(i){return Xe.get("/device/code",{client_id:i,new_credentials:"yes"})}}).submit(qt).subscribe(e=>{let n;this.alertController.create({header:this.translateService.instant("alerts.cloud-account.real-debrid.authHeader"),message:this.translateService.instant("alerts.cloud-account.real-debrid.enterCode",{code:e.user_code}),inputs:[{name:"code",type:"text",value:e.user_code,disabled:!1}],buttons:[{text:this.translateService.instant("alerts.cloud-account.real-debrid.openUrlButton"),cssClass:"copy-url",handler:()=>(this.toastService.simpleMessage("toasts.copyToClipboard",{element:"The code"}),setTimeout(()=>{v.BrowserService.open("https://real-debrid.com/device")},1e3),!1)}]}).then(o=>{n=o,n.present().then(()=>{const s=document.querySelector(".copy-url");!s||s.addEventListener("click",()=>{this.clipboardService.copyFromContent(e.user_code),setTimeout(()=>{this.clipboardService.copyFromContent(e.user_code)},100)})}),this.debridAccountService.authRealDebrid(qt,e).subscribe(s=>{s?(n.dismiss(),this.ngZone.run(()=>{this.ngOnInit()})):this.toastService.simpleMessage("toasts.real-debrid.failedToLogin")}),n.onDidDismiss().then(()=>{this.debridAccountService.stopRealDebridAuthInterval()})})})}openRealDebrid(){v.BrowserService.open("http://real-debrid.com/?id=4105935")}toggleEnabledAD(e){this.debridAccountService.getAllDebridSettings().then(n=>{!n||(n.disabled=!e,this.debridAccountService.setAllDebridSettings(n).then(()=>{this.ngOnInit(),document.location.reload()}))})}logoutAllDebrid(){this.debridAccountService.deleteAllDebridSettings().then(()=>{this.ngOnInit()})}loginAllDebrid(){var e=this;return g(function*(){(yield e.alertController.create({header:"Enter your API-Key and Name",subHeader:"You can generate keys here: https://alldebrid.com/apikeys",inputs:[{name:"apikey",type:"text",placeholder:"API-Key",value:""},{name:"name",type:"text",placeholder:"Name (i.e. Helios)",value:""}],buttons:[{text:e.translateService.instant("alerts.cancelButton"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:o=>{e.isLoadingAllDebrid=!0,class wi{static submit(i,e){return $.get("/user",{apikey:i,agent:e},"15min")}}.submit(o.apikey,o.name).pipe(V(()=>e.isLoadingAllDebrid=!1)).subscribe(s=>{"error"!==s.status?(e.providerService.getAll(!1).then(a=>{0===a.length&&e.toastService.simpleMessage("toasts.cloud-account.needToAddProviders",null,4e3)}),e.debridAccountService.getAllDebridSettings().then(a=>{a||(a={disabled:!1,apiKey:"",name:""}),a.apiKey=o.apikey,a.name=o.name,e.debridAccountService.setAllDebridSettings(a).then(()=>{e.ngZone.run(()=>{e.ngOnInit()})})})):e.toastService.simpleMessage("toasts.all-debrid.invalidCredentials")})}}]})).present()})()}openAllDebrid(){v.BrowserService.open("https://alldebrid.com/?uid=2e70s&lang=en")}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(oe),t.\u0275\u0275directiveInject(d.AlertController),t.\u0275\u0275directiveInject(T.TranslateService),t.\u0275\u0275directiveInject(ce),t.\u0275\u0275directiveInject(Z),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(t.NgZone))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-debrid-account"]],decls:42,vars:25,consts:[["src","https://www.premiumize.me/icon.svg","alt","",1,"pm-icon"],[4,"ngIf"],[3,"innerHTML"],["lines","full"],["class","ion-no-padding",4,"ngIf"],["class","ion-no-padding","button","",3,"click",4,"ngIf"],["src","https://fcdn.real-debrid.com/0762/images/logo.png","alt","RealDebrid",1,"rd-icon"],["src","https://cdn.alldebrid.com/lib/images/default/logo_alldebrid.png","alt","All Debrid",1,"rd-icon"],[1,"ion-no-padding"],[3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],["button","",1,"ion-no-padding",3,"click"],["color","danger"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.\u0275\u0275element(3,"img",0),t.\u0275\u0275text(4," Premiumize.me "),t.\u0275\u0275template(5,Di,1,0,"ion-spinner",1),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-card-content"),t.\u0275\u0275element(7,"ion-text",2),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementStart(9,"ion-list",3),t.\u0275\u0275template(10,Ai,5,4,"ion-item",4),t.\u0275\u0275template(11,Fi,5,4,"ion-item",4),t.\u0275\u0275template(12,Bi,5,4,"ion-item",4),t.\u0275\u0275template(13,Mi,4,3,"ion-item",5),t.\u0275\u0275template(14,Oi,4,3,"ion-item",5),t.\u0275\u0275template(15,Li,4,3,"ion-item",5),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(16,"ion-card")(17,"ion-card-header")(18,"ion-card-title"),t.\u0275\u0275element(19,"img",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"ion-card-content")(21,"ion-text"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"ion-list",3),t.\u0275\u0275template(25,zi,5,4,"ion-item",4),t.\u0275\u0275template(26,Ui,4,3,"ion-item",5),t.\u0275\u0275template(27,Ri,4,3,"ion-item",5),t.\u0275\u0275template(28,ji,4,3,"ion-item",5),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(29,"ion-card")(30,"ion-card-header")(31,"ion-card-title"),t.\u0275\u0275element(32,"img",7),t.\u0275\u0275template(33,Ni,1,0,"ion-spinner",1),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(34,"ion-card-content"),t.\u0275\u0275element(35,"ion-text",2),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275elementStart(37,"ion-list",3),t.\u0275\u0275template(38,Vi,5,4,"ion-item",4),t.\u0275\u0275template(39,$i,4,3,"ion-item",5),t.\u0275\u0275template(40,Hi,4,3,"ion-item",5),t.\u0275\u0275template(41,qi,4,3,"ion-item",5),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.isLoadingPremiumize),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(8,19,"pages.debrid-account.list.premiumize.explain"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isPremiumizeLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isPremiumizeLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isPremiumizeLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isPremiumizeLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isPremiumizeLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isPremiumizeLogged),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(23,21,"pages.debrid-account.list.realDebrid.explain")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isRealDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isRealDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isRealDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isRealDebridLogged),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.isLoadingAllDebrid),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(36,23,"pages.debrid-account.list.allDebrid.explain"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isAllDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isAllDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isAllDebridLogged),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isAllDebridLogged))},dependencies:[C.NgIf,k.NgControlStatus,k.NgModel,d.IonCard,d.IonCardContent,d.IonCardHeader,d.IonCardTitle,d.IonItem,d.IonLabel,d.IonList,d.IonSpinner,d.IonText,d.IonToggle,d.BooleanValueAccessor,T.TranslatePipe],styles:[".pm-icon[_ngcontent-%COMP%]{width:20px;display:inline}.rd-icon[_ngcontent-%COMP%]{width:130px;display:inline}"]}),r})();class H extends class Ki{constructor(i,e,n,o,s,a){this.id=i,this.title=e,this.size=n,this.quality=o,this.provider=s,this.type=a}}{constructor(i,e,n,o,s,a,l,c,u,h){super(i,e,n,o,c,s),this.id=i,this.title=e,this.size=n,this.quality=o,this.type=s,this.isPackage=a,this.debridService=l,this.provider=c,this.originalUrl=u,this.originalHash=h}}class Te{constructor(i,e,n,o,s,a=null){this.title=i,this.url=e,this.filename=n,this.isStreamable=o,this.transcodedUrl=s,this.servicePlayerUrl=a}}class it{static submit(i){return q.get("/folder/list",{id:i})}}class Zt{static submit(){return z.get("/torrents/")}}class fe{static submit(i){return z.get(`/torrents/info/${i}`,null,null,null)}}class rt{static submit(i){return z.post("/unrestrict/link",{link:i},null,null)}}class ge{static submit(i){return z.delete(`/torrents/delete/${i}`,null)}}class Yt{static submit(i){return q.get("/item/delete",{id:i})}}function _e(r,i,e){const n=A(r)||i||e?{next:r,error:i,complete:e}:r;return n?U((o,s)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let l=!0;o.subscribe(M(s,c=>{var u;null===(u=n.next)||void 0===u||u.call(n,c),s.next(c)},()=>{var c;l=!1,null===(c=n.complete)||void 0===c||c.call(n),s.complete()},c=>{var u;l=!1,null===(u=n.error)||void 0===u||u.call(n,c),s.error(c)},()=>{var c,u;l&&(null===(c=n.unsubscribe)||void 0===c||c.call(n)),null===(u=n.finalize)||void 0===u||u.call(n)}))}):me}let Wi=(()=>{class r extends G{static getApiBaseUrl(){return"https://api.themoviedb.org/3"}static getTimeToWaitOnTooManyRequest(){return 5e3}static getSimultaneousRequest(){return 4}static get(e,n,o){return n||(n={}),n.api_key="9f3ca569aa46b6fb13931ec96ab8ae7e",super.get(e,n,o)}}return r.queueEnabled=!0,r})();class Qt{static submit(i,e){return Wi.get(`/tv/${i}/season/${e}`,null,"1d")}}let Gi=(()=>{class r extends G{static getApiBaseUrl(){return"https://api.thetvdb.com"}static getTimeToWaitOnTooManyRequest(){return 5e3}static getSimultaneousRequest(){return 4}static getHeaders(){const e={"Content-Type":"application/json"};return this.getToken()&&(e.Authorization=`Bearer ${this.getToken()}`),e}static login(){return G.request({url:this.getApiBaseUrl()+"/login",method:"POST",body:{apikey:this.apiKey},headers:{"Content-Type":"application/json"},responseType:"json"},"1d")}static request(e,n,o,s,a,l){return this.login().pipe(y(c=>(this.setToken(c.token),super.request(e,n,o,s,a,l))))}}return r.apiKey="43VPI0R8323FB7TI",r.queueEnabled=!0,r})();class se{static getData(i){if(!i)return(0,p.of)(null);if(i.movie)return(0,p.of)(function $n(r){const i=new kt;return i.imdbId=r.ids.imdb,i.tmdbId=r.ids.tmdb,i.title=r.title,i.alternativeTitles=r.alternativeTitles,i.originalTitle=r.originalTitle,i.year=r.year,{movie:i,category:"movie"}}(i.movie));const e=function Hn(r,i,e){const n=new jn;return n.episodeNumber=i.number,n.seasonNumber=i.seasonNumber,n.episodeCode=i.code,n.seasonCode="S"+N(i.seasonNumber).toString(),n.trakId=i.ids.trakt,n.imdbId=i.ids.imdb,n.tvdbId=i.ids.tvdb,n.tmdbId=i.ids.tmdb,n.showTvdbId=r.ids.tvdb,n.showTraktId=r.ids.trakt,n.showTmdbId=r.ids.tmdb,n.showSimklId=r.ids.simkl,n.showImdbId=r.ids.imdb,n.title=r.title,n.episodeTitle=i.title,n.alternativeTitles=r.alternativeTitles,n.originalTitle=r.originalTitle,n.year=r.year,n.absoluteNumber=i.absoluteNumber??e,n.isAnime=r.genres.includes("anime"),{episode:n,category:n.isAnime?"anime":"tv"}}(i.show,i.episode);return i.show.ids.tmdb?Qt.submit(i.show.ids.tmdb,i.episode.seasonNumber).pipe(D(()=>(0,p.of)(null)),I(n=>{if(!n)return e;const o=new Date;return n.episodes.forEach(s=>{!e.episode.absoluteNumber&&s.episode_number===i.episode.number&&(e.episode.absoluteNumber=s.production_code),new Date(s.air_date)<=o&&(e.episode.latestAiredEpisode=s.episode_number)}),e}),y(n=>n.episode&&n.episode.tvdbId&&n.episode.isAnime&&!n.episode.absoluteNumber?class Ji{static submit(i){return Gi.get(`/episodes/${i}`,null,"1d")}}.submit(n.episode.tvdbId).pipe(I(o=>(n.episode.absoluteNumber=o.data.absoluteNumber,n)),D(o=>(0,p.of)(n))):(0,p.of)(n))):(0,p.of)(e)}}class ve{static getData(i,e,n=0){return e?G.request({method:"GET",url:e,responseType:"text"},"1d",1e4,!0).pipe(D(o=>o&&503===o.status&&0===n?(n++,(0,p.timer)(1e3).pipe(y(()=>this.getData(i,e,n)))):(0,p.of)(null)),I(o=>{if(!o)return null;if(o.match(/href=["|']?(magnet[^"|']+)/))return o.match(/href=["|']?(magnet[^"|']+)/)[1];if(o.match(/http(.*?).torrent["\']/))return o.match(/http(.*?).torrent["\']/).shift();if(o.match(/href="(.*?).torrent["\']/)){const s=o.match(/href="(.*?).torrent["\']/).pop()+".torrent";if(null!==s.match("http"))return s;const a=(0,v.getDomainFromUrl)(e);let l=(null!==e.match("https")?"https://":"http://")+a;return l+="/"===s[0]?s:"/"+s,l}return o.match(/>([a-zA-Z0-9]{40})</)?"magnet:?xt=urn:btih:"+o.match(/>([a-zA-Z0-9]{40})</)[1]:null})):(0,p.of)(i)}}class Xt{static submit(i){return z.post("/torrents/addMagnet",{magnet:i})}}class en{static submit(i,e){return z.post(`/torrents/selectFiles/${i}`,{files:e},null,null)}}class st{static getData(i,e){const n=0===e.length?"all":e.join(","),o="setCachedLinksRD_"+i+n;return B.get(o).pipe(y(s=>{if(s)return(0,p.of)(s);let a=null;return Xt.submit(i).pipe(y(l=>(a=l,en.submit(l.id,n).pipe(y(()=>fe.submit(l.id)),y(c=>{const u=[];if(c.links.length>0){const h=[];return c.links.forEach(m=>{h.push(rt.submit(m).pipe(I(f=>{u.push(f)})))}),(0,p.forkJoin)(h).pipe(y(()=>{const m=[],f=[];return u.forEach(_=>{const b="."+_.filename.split(".").pop().toLowerCase();ee(_.filename)&&".rar"!==b?m.push(_):f.push(_)}),0===m.length&&f.length>0&&"all"!==n?this.getData(i,[]):(0===m.length&&f.length>0&&m.push(...f),(0,p.of)(m))}))}return"all"!==n?this.getData(i,[]):(0,p.throwError)({code:100,message:"Real Debrid: No links found. It seems the source is not fully cached, try to add the torrent manually"})})))),V(()=>{a&&ge.submit(a.id).subscribe()}),y(l=>{const c=[];return l&&l.forEach(u=>{(!u.mimeType||null!==u.mimeType.match("video")||"application/x-rar-compressed"===u.mimeType)&&c.push(u)}),0===c.length?(0,p.throwError)({code:100,message:"Real Debrid: No links found. It seems the source is not fully cached, try to add the torrent manually"}):(0,p.from)(B.set(o,c,"15min")).pipe(K(c))}))}))}}class tn{static submit(i){const e=new URLSearchParams;return i.forEach(n=>{e.append("magnets[]",encodeURIComponent(n.split("&").shift()))}),$.get("/magnet/upload?"+decodeURIComponent(e.toString()),null,null)}}class Yi extends J{constructor(i,e){super()}schedule(i,e=0){return this}}const Pe={setInterval(r,i,...e){const{delegate:n}=Pe;return n?.setInterval?n.setInterval(r,i,...e):setInterval(r,i,...e)},clearInterval(r){const{delegate:i}=Pe;return(i?.clearInterval||clearInterval)(r)},delegate:void 0},nn={now:()=>(nn.delegate||Date).now(),delegate:void 0};class be{constructor(i,e=be.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}be.now=nn.now;const rn=new class Xi extends be{constructor(i,e=be.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class Qi extends Yi{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this}requestAsyncId(i,e,n=0){return Pe.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;Pe.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let o,n=!1;try{this.work(i)}catch(s){n=!0,o=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,qe(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}),er=rn;function on(r){return r instanceof Date&&!isNaN(r)}function sn(r,i,e,n=0,o=!1){const s=i.schedule(function(){e(),o?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!o)return s}function at(r,i,e=1/0){return A(i)?at((n,o)=>I((s,a)=>i(n,s,o,a))(re(r(n,o))),e):("number"==typeof i&&(e=i),U((n,o)=>function or(r,i,e,n,o,s,a,l){const c=[];let u=0,h=0,m=!1;const f=()=>{m&&!c.length&&!u&&i.complete()},_=S=>u<n?b(S):c.push(S),b=S=>{s&&i.next(S),u++;let w=!1;re(e(S,h++)).subscribe(M(i,E=>{o?.(E),s?_(E):i.next(E)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<n;){const E=c.shift();a?sn(i,a,()=>b(E)):b(E)}f()}catch(E){i.error(E)}}))};return r.subscribe(M(i,_,()=>{m=!0,f()})),()=>{l?.()}}(n,o,r,e)))}class an{static submit(i){return $.get("/magnet/delete",{id:i},null)}}class lt{static sortByNameAsc(i){i.sort((e,n)=>e.filename===n.filename?0:e.filename>n.filename?1:-1)}static sortBySizeDesc(i){i.sort((e,n)=>+e.size==+n.size?0:+e.size>+n.size?-1:1)}static removeSampleLinks(i){return i.filter(e=>null===e.filename.match("sample"))}static getData(i,e,n){null===i.title.match("sample")&&(n=this.removeSampleLinks(n));const o=[];if(this.sortByNameAsc(n),e.episode){let s=!1,a=e.episode.episodeCode,l=!1;if(n.forEach(c=>{if(!l&&je(a,c.filename)){s=!0;try{a=xe(a)}catch{l=!0}const h=new Te(i.title,c.url,c.filename,!!c.streamLink,c.streamLink,c.servicePlayerUrl);o.push(h)}}),s)return o}if(e.movie){let s=null;this.sortBySizeDesc(n);const a=Se(e.movie.title),l=e.movie.year;if(n.forEach(c=>{const u=Se(c.filename);!s&&-1!==u.indexOf(a)&&(l&&-1!==u.indexOf(l.toString())||!l)&&(s=c)}),s||n.forEach(c=>{const u=Se(c.filename);!s&&-1!==u.indexOf(a)&&(s=c)}),!s&&1===n.length&&(s=n[0]),s)return o.push(new Te(i.title,s.url,s.filename,!!s.streamLink,s.streamLink,s.servicePlayerUrl)),o}return n.forEach(s=>{o.push(new Te(s.filename,s.url,s.filename,!!s.streamLink,s.streamLink,s.servicePlayerUrl))}),o}}class ln{static submit(i){return $.get("/link/unlock",{link:i})}}class cn{static submit(i,e){return $.get("/magnet/status",{id:i,status:e},null)}}let ct=(()=>{class r{constructor(){}getFromTorrents(e,n){return class hr{static hasPremiumize(){return q.hasApiKey()}static setHash(i){let e=i.hash;const n=this.getShortMagnet(i.url);n&&(e=n),e||(e=Ie(i.url)),e&&!i.hash&&(i.hash=e)}static getAllHash(i){const e=[];return i.forEach(n=>{this.setHash(n),n.hash&&!e.includes(n.hash)&&e.push(n.hash)}),e}static getShortMagnet(i){return i&&i.match("magnet")?i.split("&").shift():null}static cacheCheck(i){const e=new Map,n=[];let o=[];i.forEach(a=>{o.push(a),o.join("").length>3e3&&(n.push(o),o=[])}),o.length>0&&n.push(o);const s=[];return n.forEach(a=>{s.push(class mr{static submit(i){const e=new URLSearchParams;return i.forEach(n=>{e.append("items[]",n)}),q.get("/cache/check?"+decodeURIComponent(e.toString()))}}.submit(a).pipe(I(l=>("success"===l.status&&a.forEach((c,u)=>{l.response[u]&&e.set(c,!0)}),l))))}),0===s.length?(0,p.of)(e):(0,p.forkJoin)(...s).pipe(K(e))}static getData(i){const e=[];if(0===i.length||!this.hasPremiumize())return(0,p.of)(e);const n=this.getAllHash(i);return this.cacheCheck(n).pipe(I(o=>(i.forEach(s=>{if(this.setHash(s),o.has(s.hash)){s.isCached=!0,s.cachedService="PM";const a=new H("PM-"+s.hash,s.title,s.size,s.quality,"cached_torrent",s.isPackage,"PM",s.provider,s.url,s.hash);a.premiumizeTransferDirectdlDto=class pr{static submit(i){return q.get("/transfer/directdl",{src:encodeURIComponent(i)})}}.submit(s.url),e.push(a)}}),e)),D(o=>(P(o),(0,p.of)(e))))}}.getData(e).pipe(y(o=>class _r{static hasRealDebrid(){return!!z.getToken()}static getSizeStr(i){let e=i,n="B";return i>=1099511627776?(e=i/1099511627776,n="TB"):i>=1073741824?(e=i/1073741824,n="GB"):i>=1048576?(e=i/1048576,n="MB"):i>=1024&&(e=i/1024,n="KB"),Math.round(100*e)/100+" "+n}static setHash(i){let e=i.hash;e||(e=Ie(i.url)),e&&!i.hash&&(i.hash=e)}static getAllHash(i){const e=[];return i.forEach(n=>{this.setHash(n),n.hash&&!e.includes(n.hash)&&e.push(n.hash)}),e}static getData(i,e){const n=[];if(0===i.length||!this.hasRealDebrid())return(0,p.of)(n);const o=this.getAllHash(i);return class gr{static submit(i){if(0===i.length)return(0,p.of)(null);const e=[];let n=[];i.forEach(a=>{n.length>50&&(e.push(n),n=[]),n.push(a)}),n.length>0&&e.push(n);const o=[];e.forEach(a=>{const l=new URLSearchParams;a.forEach(c=>{l.append("items[]",c)}),o.push(z.get(`/torrents/instantAvailability/${a.join("/")}`))});let s={};return(0,p.forkJoin)(...o).pipe(I(a=>(a.forEach(l=>{s=Object.assign(s,l)}),s)))}}.submit(o).pipe(I(s=>(i.forEach(a=>{if(this.setHash(a),!a.hash)return;const l=s[a.hash.toLowerCase()];if(!l||!l.rd||0===l.rd.length)return;let c=e.query?null:0,u=new Map;if(e.episode){const m=[];let f=null;const _="anime"===e.category?e.episode.absoluteNumber.toString():e.episode.episodeCode;let b=!1;if(l.rd.forEach((S,w)=>{Object.keys(S).forEach(E=>{const x=S[E];!f&&ee(x.filename)&&(f=w);let Y=!1;Y="anime"===e.category?null!==x.filename.match(e.episode.title)&&null!==x.filename.match(_):je(_,x.filename),ee(x.filename)&&Y&&!m.includes(w)&&(m.push(w),b=!0,u.set(x.filename,w))})}),!b)return;m.length>0?c=m.shift():null!==f&&(c=f)}e.query&&Object.keys(l.rd).length<2&&(c=0),a.isCached=!0,a.cachedService="RD";const h=new H("RD-"+a.hash,a.title,a.size,a.quality,"cached_torrent",a.isPackage,"RD",a.provider,a.url,a.hash);h.realDebridLinks=new p.Observable(m=>{const f=new d.LoadingController;if(null!==c){const S=Object.getOwnPropertyNames(l.rd[c]);return void st.getData(a.url,S).pipe(V(()=>f.dismiss())).subscribe(function(){var w=g(function*(E){if(u.size>1){const x=[];return u.forEach((Tn,Q)=>{x.push({text:Q,handler:()=>{const ue=[];E.forEach(pe=>{pe.filename===Q&&ue.push(pe)}),m.next(ue),m.complete()}})}),x.push({text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}),void(yield(new d.ActionSheetController).create({header:"Select a file",buttons:x})).present()}m.next(E),m.complete()});return function(E){return w.apply(this,arguments)}}(),w=>{m.error(w)})}const _=[];l.rd.forEach((S,w)=>{Object.keys(S).forEach(E=>{const x=S[E];if(!x.filename||!ee(x.filename))return;const Y=x.filename+" - "+this.getSizeStr(x.filesize);_.push({text:Y,handler:()=>{let W;f.create({spinner:"crescent",backdropDismiss:!0}).then(Q=>{W=Q,W.present()});const Tn=Object.getOwnPropertyNames(l.rd[w]);st.getData(a.url,Tn).pipe(V(()=>W.dismiss())).subscribe(Q=>{let ue=null;for(const pe of Q)pe.filename===x.filename&&pe.filesize===x.filesize&&(ue=pe);m.next(ue?[ue]:Q),m.complete()},Q=>{m.error(Q)})}})})}),_.push({text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}),(new d.ActionSheetController).create({header:"Select a file",buttons:_}).then(S=>{S.present(),f.dismiss()})}).pipe(y(m=>{if(e.movie&&1===m.length){const f=m.slice(0).pop(),_="."+f.filename.split(".").pop().toLowerCase();if(!ee(f.filename)||".rar"===_)return st.getData(a.url,[])}return(0,p.of)(m)})),n.push(h)}),n)),D(s=>(console.log("RD err",s),(0,p.of)(n))))}}.getData(e,n).pipe(y(s=>class dr{static hasService(){return $.hasApiKey()}static setHash(i){let e=i.hash;if(e||(e=Ie(i.url)),!e){const n=this.getShortMagnet(i.url);n&&(e=n)}e&&!i.hash&&(i.hash=e)}static getAllHash(i){const e=[];return i.forEach(n=>{this.setHash(n),n.hash&&!e.includes(n.hash)&&e.push(n.hash)}),e}static getShortMagnet(i){return i&&i.match("magnet")?i.split("&").shift():null}static cacheCheck(i){const e=new Map,n=[];let o=[];i.forEach(a=>{o.push(a),o.join("").length>3e3&&(n.push(o),o=[])}),o.length>0&&n.push(o);const s=[];return n.forEach(a=>{s.push(class lr{static submit(i){const e=new URLSearchParams;return i.forEach(n=>{e.append("magnets[]",encodeURIComponent(n))}),$.get("/magnet/instant?"+decodeURIComponent(e.toString()),null,null)}}.submit(a).pipe(I(l=>("success"===l.status&&a.forEach((c,u)=>{const h=l.data.magnets[u];h&&h.instant&&e.set(c,!0)}),l))))}),0===s.length?(0,p.of)(e):(0,p.forkJoin)(...s).pipe(K(e))}static getData(i){const e=[];if(0===i.length||!this.hasService())return(0,p.of)(e);const n=this.getAllHash(i);return this.cacheCheck(n).pipe(I(o=>(i.forEach(s=>{if(this.setHash(s),o.has(s.hash)){s.isCached=!0,s.cachedService="AD";const a=new H("AD-"+s.hash,s.title,s.size,s.quality,"cached_torrent",s.isPackage,"AD",s.provider,s.url,s.hash);a.allDebridMagnetStatusMagnet=class cr{static getData(i,e){const n="setCachedLinksAD_"+i+e;return B.get(n).pipe(y(o=>{if(o)return(0,p.of)(o);let s=null;return tn.submit([i]).pipe(y(a=>{if("success"!==a.status){let c="All Debrid /magnet/upload - Generic error";return a?.error?.message&&(c="All Debrid /magnet/upload - "+a.error.message),(0,p.throwError)(c)}const l=a.data.magnets.shift();return l.error?(0,p.throwError)("All Debrid /magnet/upload - "+l.error.message):(s=l.id,l.ready?cn.submit(l.id).pipe(y(c=>{if("success"!==c.status)return(0,p.throwError)("All Debrid /magnet/status - Generic error");const u=c.data.magnets;return u.error?(0,p.throwError)("All Debrid /magnet/status - "+u.error.message):4!==u.statusCode?(0,p.throwError)("All Debrid /magnet/status - torrent is not ready yet"):(0,p.from)(B.set(n,u,"15min")).pipe(K(u))})):(0,p.throwError)("All Debrid /magnet/upload - torrent is not ready yet"))}))}))}}.getData(s.url,s.isPackage),e.push(a)}}),e)),D(o=>(P(o),(0,p.of)(e))))}}.getData(e).pipe(I(a=>a.concat(...o,...s)))))))}getStreamLinks(e,n){let o=(0,p.of)(e.streamLinks);return e.premiumizeTransferDirectdlDto?o=class ur{static getData(i,e){return i.premiumizeTransferDirectdlDto.pipe(I(n=>{if("success"!==n.status)throw new Error("Premiumize.me: "+n.message);const o=[];return n.content.forEach(s=>{ee(s.link)&&o.push({filename:s.path.split("/").pop(),size:s.size,streamLink:s.stream_link,url:s.link,servicePlayerUrl:null})}),lt.getData(i,e,o)}))}}.getData(e,n):e.realDebridLinks?o=class fr{static getData(i,e){return i.realDebridLinks.pipe(I(n=>{const o=[];return n.forEach(s=>{o.push({filename:s.filename,size:s.filesize,streamLink:s.streamable?s.download:null,url:s.download,servicePlayerUrl:`https://real-debrid.com/streaming-${s.id}`})}),lt.getData(i,e,o)}))}}.getData(e,n):e.allDebridMagnetStatusMagnet&&(o=class ar{static getData(i,e){let n=null;return i.allDebridMagnetStatusMagnet.pipe(V(()=>{n&&an.submit(n).subscribe()}),y(o=>{n=o.id;const s=[];o.links.forEach(c=>{s.push({filename:c.filename,size:c.size,streamLink:null,url:c.link,servicePlayerUrl:null})});const a=lt.getData(i,e,s),l=[];return a.forEach(c=>{l.push(ln.submit(c.url).pipe(I(u=>(c.url=u.data.link,c))))}),(0,p.concat)(...l).pipe(he(),K(a))}),I(o=>o))}}.getData(e,n)),o}getBestSource(e,n,o){if(0===e.length)return(0,p.of)(null);const s=Ce(e=Ve(e,"id"),Re);ye(s.sources2160p),ye(s.sources1080p),ye(s.sources720p),ye(s.sourcesOther);let a=null;const l=[],c=s.sources2160p.concat(s.sources1080p,s.sources720p,s.sourcesOther);if(o){let _,f=0;e.forEach(b=>{const S=Ft(o.title,b.title);S>f&&(_=b,f=S)}),_&&c.unshift(_)}let u=!1,h=!0;c.forEach(f=>{"PM"===f.debridService&&(u=!0),l.push((0,p.of)(!0).pipe(y(()=>a?(0,p.of)(a):"PM"!==f.debridService||h?this.getStreamLinks(f,n).pipe(D(_=>(0,p.of)([])),I(_=>{if(_.length>0){if(n.episode&&_.length>1&&!Bt(_,n))return a;f.streamLinks=_,a=f}return a})):(0,p.of)(null))))});let m=(0,p.of)(!0);return u&&(m=Ot.submit().pipe(I(f=>("success"===f.status&&!1===f.premium_until&&(h=!1),h)))),m.pipe(y(()=>(0,p.from)(l).pipe(function sr(r,i){return A(i)?at(r,i,1):at(r,1)}(f=>f),he(),I(()=>(!a&&u&&!h&&c.length>0&&c.forEach(f=>{!a&&f.size<5368709120&&(a=f)}),a)))))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();function dt(r){return U((i,e)=>{re(r).subscribe(M(e,()=>e.complete(),Ke)),!e.closed&&i.subscribe(e)})}class br{}class Sr{}class O{static convertSizeStrToBytes(i){if(!i)return null;let e=new RegExp(/GB|GiB|Go/gi);return null!==i.match(e)?1024*+i.replace(e,"")*1024*1024:(e=new RegExp(/MB|MiB|Mo/gi),null!==i.match(e)?1024*+i.replace(e,"")*1024:(e=new RegExp(/KB|KiB|Ko/gi),null!==i.match(e)?1024*+i.replace(e,""):null))}static getQuality(i){let e="other";if("string"!=typeof i)return e;switch(i=i.toLowerCase(),!0){case null!==i.match("2160p"):case null!==i.match(" 4K"):e="2160p";break;case null!==i.match("1080p"):case null!==i.match(" 1080 "):e="1080p";break;case null!==i.match("720p"):case null!==i.match(" 720 "):case null!==i.match(" hd "):e="720p";break;default:e="other"}return e}static stripAccents(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}static stripNonAsciiAndUnprintable(i){return i.replace(/[^\x20-\x7F]/g,"")}static cleanTitle(i,e="s"){return i=i.toLowerCase(),(i=(i=(i=(i=(i=(i=(i=(i=this.stripAccents(i)).replace("\\'s",e)).replace("'s",e)).replace("&#039;s",e)).replace(" 039 s",e)).replace(/\:|\\|\/|\,|\!|\?|\(|\)|\'|\\u2019|\"|\+|\[|\]|\-|\_|\.|\{|\}/g," ")).replace(/\s+/g," ")).replace(/\&/g,"and")).trim()}static cleanTags(i){return"["===(i=i.toLowerCase().trim())[0]&&i.indexOf("]")>0?(i=i.substr(i.indexOf("]")+1).trim(),this.cleanTags(i)):"("===i[0]&&i.indexOf(")")>0?(i=i.substr(i.indexOf(")")+1).trim(),this.cleanTags(i)):"{"===i[0]&&i.indexOf("}")>0?(i=i.substr(i.indexOf("}")+1).trim(),this.cleanTags(i)):i=(i=i.replace(/\(|\)|\[|\]|\{|\}/g," ")).replace(/\s+/g," ")}static removeSeparator(i,e){function n(o,s){return null!==o.match(s)&&o.substr(o.indexOf(s)+1).trim().toLowerCase().startsWith(e)?o.substr(o.indexOf(s)+1).trim():o}return i=n(i,"/"),n(i," - ")}static removeWWWUrl(i,e){const n=new RegExp(/www.[^.]+.[a-z]+/gi);return null!==i.match(n)&&null===e.match(n)?i.replace(n,""):i}static removeFromTitle(i,e,n=!0){return""===e?i:(i=(i=(i=(i=i.replace(` ${e.toLowerCase()} `," ")).replace(`.${e.toLowerCase()}.`," ")).replace(`+${e.toLowerCase()}+`," ")).replace(`-${e.toLowerCase()}-`," "),n?i=this.cleanTitle(i)+" ":i+=" ",i.replace(/\s+/g," "))}static cleanDotAbbr(i){return i.replace(/([A-Z])\./g,"$1")}static isTitleMatching(i,e,n,o=!1){if(e=this.cleanTitle(" "+e+" "),i=this.cleanTags(i),i=this.removeFromTitle(i,this.getQuality(i),!1),i=this.removeSeparator(i,e),i=this.removeWWWUrl(i,e),o&&(e+=" "),(i=this.cleanTitle(i)+" ").startsWith(e))return!0;const s=(n.year||"").toString();return i=this.removeFromTitle(i,s),e=this.removeFromTitle(e,s),!!i.startsWith(e)}static checkEpisodeNumberMatch(i){return null!==(i=this.cleanTitle(i)).match(/(s\d+e[a-z]*\d+ )|(s\d+ *e\d+ )|(season \d+ episode \d+)/gi)}static isWordMatching(i,e,n=3){e=this.stripAccents(e);const o="ZZOOPPQQ",s=e.match(/[a-z]+\s+[0-9]+/gi);let a=!1;s&&(s.forEach(c=>{const u=new RegExp(c,"g");e=e.replace(u,c.replace(/\s/,o))}),a=!0);let l=e.replace(/[^0-9a-z]/gi," ").split(" ").filter(c=>c.trim().length>=2);if(l.length>=n){if(a){const h=new RegExp(o,"g");l=l.map(m=>m.replace(h," "))}l=l.map(h=>h+" ");const c=l.join(".*"),u=new RegExp(c,"ig");if(null!==i.match(u)||(i=this.cleanTags(i),i=this.removeFromTitle(i,this.getQuality(i),!1),i=this.removeSeparator(i,e),i=this.removeWWWUrl(i,e),null!==(i=this.cleanTitle(i)+" ").match(u)))return!0}return!1}static isMovieTitleMatching(i,e,n){e===n.imdbId&&(e=n.title),i=i.toLowerCase();const o=n.year?n.year.toString():"",s=this.cleanTitle(e.replace(o,"")),a=this.cleanTitle(e,""),l=this.cleanTitle(e," s");if(this.isWordMatching(i,s))return!0;if(!this.isTitleMatching(i,s,n)&&!this.isTitleMatching(i,a,n)&&!this.isTitleMatching(i,l,n))return!1;let c=!1;return["soundtrack","gesproken"].forEach(u=>{null!==i.match(u)&&(c=!0)}),!(c||null===i.match(o)||null!==i.match("xxx")&&null===s.match("xxx"))}static isEpisodeTitleMatching(i,e,n){const o=n.title,s=n.episodeTitle,a=n.seasonNumber,l=n.episodeNumber,c=n.absoluteNumber,u=`s${a}e${l}`,h=`s${a}e${N(l)}`,m=`s${N(a)}e${N(l)}`,f=`season ${a} episode ${l}`,_=`season ${a} episode ${N(l)}`,b=`season ${N(a)} episode ${N(l)}`,S=[];S.push(u),S.push(h),S.push(m),S.push(f),S.push(_),S.push(b),n.isAnime&&c&&S.unshift(c);const w=[o,s+" "+o,o+" "+s];w.forEach(E=>{const x=this.cleanDotAbbr(E);x!==E&&w.push(x)});for(const E of w)for(const x of S)if(this.isWordMatching(i,E+" "+x)||this.isTitleMatching(i,E+" "+x,n))return!0;return!1}static isSeasonPackTitleMatching(i,e,n){if(this.checkEpisodeNumberMatch(i))return!1;const s=n.title,a=n.seasonNumber,l=N(a),c=`s${a} `,u=`s${l} `,h=`season ${a} `,m=`season ${l} `,f="S01-",_="season 1-",b=[];b.push(l),b.push(c),b.push(u),b.push(h),b.push(m),b.push(f),b.push(_);const S=[s];S.forEach(w=>{const E=this.cleanDotAbbr(w);E!==w&&S.push(E)});for(const w of S)for(const E of b){if(this.isWordMatching(i,w+" "+E)){if((E===f||E===_)&&!this.isMatchingFullPack(i,n.seasonNumber,E))continue;return!0}if(this.isTitleMatching(i,w+" "+E,n," "===E.substr(-1,1))){if((E===f||E===_)&&!this.isMatchingFullPack(i,n.seasonNumber,E))continue;return!0}}return!1}static isMatchingFullPack(i,e,n){let o=0;if("season 1-"===n){const s=i.match(/season 1-([0-9]+)/i);s&&s[1]&&(o=+s[1])}else if("S01-"===n){const s=i.match(/S01-S([0-9]+)/i);s&&s[1]&&(o=+s[1])}return e<o}static getVideoMetadata(i,e){let n="";const o={};return e.query&&(n=e.query),e.movie&&(n=e.movie.title),e.episode&&(n=e.episode.title),o.isCam=null===n.match(/hdcam/gi)&&null!==i.match(/hdcam/gi),o.is3D=null===n.match(/3D/gi)&&null!==i.match(/3D/gi),o}}class De{static getTorrents(i,e,n){return this.getToken(i).pipe(y(o=>this._getTorrents(o,i,e,n).pipe(D(s=>{if(s instanceof v.WakoHttpError&&s.status>0)return(0,p.throwError)(s);if(i.fallback_urls){const a=i.fallback_urls.shift();if(a)return P("use fallback url",a,"for",i.name),i.base_url=a,this.getTorrents(i,e,n)}return(0,p.throwError)(s)}))))}static getToken(i){return i.token?(P(`Retrieving token for ${i.name}`),G.request({method:"GET",url:i.base_url+i.token.query,responseType:i.response_type},i.token.token_validity_time_ms||null,i.timeout_ms||15e3,!0,i.time_to_wait_on_too_many_request_ms,i.time_to_wait_between_each_request_ms).pipe(I(e=>{const n=e[i.token.token_format.token];return this.tokenByProvider.set(i.name,{token:n,generatedDate:new Date}),P(`Token ${n} has been retrieved for ${i.name}`),n}))):(0,p.of)("")}static _getTorrents(i,e,n,o){const a=[],l=[];let c=[];return("string"==typeof o.keywords?[o.keywords]:o.keywords).forEach(u=>{const h="POST"===e.http_method,m=this.getProviderQueryReplacement(e,n,u,i,h);let f=(0,v.replacer)(u,m.cleanedReplacement).trim();const _=(0,v.replacer)(u,m.rawReplacement).trim();e.separator?f=f.replace(/\s/g,e.separator):h||(f=encodeURIComponent(f));const b=Object.assign({query:f},m?m.cleanedReplacement:{});if((null!==e.base_url.match("imdbId")||null!==u.match("imdbId"))&&m&&""===m.rawReplacement.imdbId)return void console.log("EMPTY QUERY");let S=null,w=e.base_url;if("POST"===e.http_method){S=function yr(r,i){return r.replace(/{([a-z0-9\.]*)}/g,(e,n)=>e.match("{")&&e.match("}")?i[n]:e)}(o.query,b);try{S=JSON.parse(S)}catch{}}else w=(0,v.replacer)(e.base_url+o.query,b);if(l.includes(w))return;l.push(w);let E=[];a.push(this.doProviderHttpRequest(w,e,S).pipe(D(x=>x instanceof v.WakoHttpError&&x.status>0?(x.status&&404===x.status||console.error(`Error ${x.status} on ${e.name} (${w}}`,x),(0,p.of)([])):(0,p.throwError)(x)),I(x=>x?this.getTorrentsFromProviderHttpResponse(x,e,w):[]),I(x=>this.setVideoMetadata(x,n)),I(x=>this.removeUnwantedTorrents(x)),I(x=>n.movie&&e.trust_movie_results||n.episode&&e.trust_episode_results&&"tv"===n.category||n.episode&&e.trust_anime_results&&"anime"===n.category?x:this.removeBadTorrents(x,_,n)),y(x=>this.getHashFromSubPages(x)),_e(x=>{E=E.concat(x),c=c.concat(E),P(`${e.name} - Found ${E.length} torrents - URL: "${w}"`)})))}),0===a.length?(0,p.of)([]):(0,p.concat)(...a).pipe(he(),I(()=>c))}static getHashFromUrl(i){if(i&&i.match(/btih:([a-zA-Z0-9]*)/)){const e=i.match(/btih:([a-zA-Z0-9]*)/);return e.length>1?e[1].trim().toLowerCase():null}if(i&&i.match(/(\w{40})/)){const e=i.match(/(\w{40})/);return e.length>1?e[1].trim().toLowerCase():null}return Ie(i)}static setVideoMetadata(i,e){return i.forEach(n=>{n.videoMetaData=O.getVideoMetadata(n.title,e)}),i}static removeUnwantedTorrents(i){return i.filter(e=>e.videoMetaData.isCam?(P("Exclude from",e.provider,e.title,"cause hdcam"),!1):!e.videoMetaData.is3D||(P("Exclude from",e.provider,e.title,"cause 3D"),!1))}static removeBadTorrents(i,e,n){return i.filter(o=>n.query?!!O.isWordMatching(o.title,e,0)||(P("Exclude Query from",o.provider,o.title,"cause no matching"),!1):n.movie?!!O.isMovieTitleMatching(o.title,e,n.movie)||(P("Exclude Movie from",o.provider,o.title,"cause no matching"),!1):!(n.episode&&!O.isEpisodeTitleMatching(o.title,e,n.episode)&&(P("Exclude Episode from",o.provider,o.title,"cause no matching"),O.isSeasonPackTitleMatching(o.title,e,n.episode)?(o.isPackage=!0,0):(P("Exclude SeasonPack from",o.provider,o.title,"cause no matching"),1))))}static getProviderQueryReplacement(i,e,n,o,s=!1){i.title_replacement||(i.title_replacement={"'s":"s",'"':" "});let a=null,l=null;if(e.query)a={title:e.query,titleFirstLetter:e.query[0],token:o,year:"",imdbId:"",episodeCode:"",seasonCode:"",season:"",episode:"",absoluteNumber:"",query:e.query},l=Object.assign({},a);else{const c=e.movie?e.movie:e.episode;a={title:c.title,titleFirstLetter:c.title[0],token:o,year:"number"==typeof c.year?c.year.toString():"",imdbId:c.imdbId?c.imdbId:"",episodeCode:e.episode?e.episode.episodeCode.toLowerCase():"",seasonCode:e.episode?e.episode.seasonCode.toLowerCase():"",season:e.episode?e.episode.seasonNumber.toString():"",episode:e.episode?e.episode.episodeNumber.toString():"",absoluteNumber:e.episode&&e.episode.absoluteNumber?e.episode.absoluteNumber.toString():"",query:""},e.episode&&(a.tvdbId=e.episode.tvdbId,a.trakId=e.episode.trakId?e.episode.trakId.toString():"",a.simklId=e.episode.simklId?e.episode.simklId.toString():"",a.showTvdbId=e.episode.showTvdbId,a.showTraktId=e.episode.showTraktId?e.episode.showTraktId.toString():"",a.showTmdbId=e.episode.showTmdbId?e.episode.showTmdbId.toString():"",a.showSimklId=e.episode.showSimklId?e.episode.showSimklId.toString():"",a.showImdbId=e.episode.showImdbId?e.episode.showImdbId.toString():""),l=Object.assign({},a),c.alternativeTitles&&Object.keys(c.alternativeTitles).forEach(u=>{a["title."+u]=c.alternativeTitles[u],l["title."+u]=O.cleanTitle(Ue(c.alternativeTitles[u],i.title_replacement))}),c.originalTitle&&(a["title.original"]=c.originalTitle,l["title.original"]=O.cleanTitle(Ue(c.originalTitle,i.title_replacement)))}return l.title=O.cleanTitle(Ue(a.title,i.title_replacement)),l.titleFirstLetter=l.title[0],a.query=(0,v.replacer)(n,a).trim(),l.query=(0,v.replacer)(n,l).trim(),i.separator?(a.query=a.query.replace(/\s/g,i.separator),l.query=l.query.replace(/\s/g,i.separator)):s||(a.query=encodeURIComponent(a.query),l.query=encodeURIComponent(l.query)),{rawReplacement:a,cleanedReplacement:l}}static doProviderHttpRequest(i,e,n=null){P(`Getting "${i}" from ${e.name} provider`);const o={"user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36"};return"text"===e.response_type&&(o.accept="text/html"),n&&(o["Content-Type"]="application/json"),G.request({method:e.http_method||"GET",headers:o,url:i,responseType:"json"===e.response_type?"json":"text",body:n},null,e.timeout_ms||15e3,!0,e.time_to_wait_on_too_many_request_ms,e.time_to_wait_between_each_request_ms)}static getObjectFromKey(i,e){try{let n=i;return e.split(".").forEach(o=>{n=n&&n.hasOwnProperty(o)?n[o]:null}),n}catch{return null}}static getSize(i){if(null===i)return null;if(Number(i))return+i;{const e=O.convertSizeStrToBytes(i);if(null!==e)return e;console.error(`Cannot convert ${i} to bytes`)}return 0}static getFormatIntIfNotNull(i){return null===i?null:+i}static addBaseUrlIfNeeded(i,e){return"/"===e[0]?i+e:e}static getTorrentsFromJsonResponse(i,e){const n=[];try{const o=i.json_format.results?this.getObjectFromKey(e,i.json_format.results):e;if(!o)return n;o.forEach(s=>{const a=s[i.json_format.title];if(i.json_format.sub_results){const l=this.getObjectFromKey(s,i.json_format.sub_results);try{l.forEach(c=>{try{const u=i.json_format.quality?this.getObjectFromKey(c,i.json_format.quality):O.getQuality(a);let h=i.json_format.url?this.addBaseUrlIfNeeded(i.base_url,this.getObjectFromKey(c,i.json_format.url)):null,m=null;i.source_is_in_sub_page&&(m=h,h=null);const f={providerName:i.name,title:a,url:h,subPageUrl:m,seeds:this.getFormatIntIfNotNull(this.getObjectFromKey(c,i.json_format.seeds)),peers:this.getFormatIntIfNotNull(this.getObjectFromKey(c,i.json_format.peers)),quality:O.getQuality(u),size:0,isPackage:!(void 0===i.json_format.isPackage||!this.getObjectFromKey(s,i.json_format.isPackage)),hash:void 0!==i.json_format.hash&&this.getObjectFromKey(s,i.json_format.hash)};if(!f.url&&!f.subPageUrl)return;const _=this.getObjectFromKey(c,i.json_format.size);f.size=this.getSize(_),n.push(f)}catch{}})}catch{}}else{const l=i.json_format.quality?this.getObjectFromKey(s,i.json_format.quality):O.getQuality(a);let c=i.json_format.url?this.addBaseUrlIfNeeded(i.base_url,this.getObjectFromKey(s,i.json_format.url)):null,u=null;i.source_is_in_sub_page&&(u=c,c=null);const h={providerName:i.name,title:a,url:c,subPageUrl:u,seeds:this.getFormatIntIfNotNull(this.getObjectFromKey(s,i.json_format.seeds)),peers:this.getFormatIntIfNotNull(this.getObjectFromKey(s,i.json_format.peers)),size:this.getObjectFromKey(s,i.json_format.size),quality:O.getQuality(l),isPackage:!(void 0===i.json_format.isPackage||!this.getObjectFromKey(s,i.json_format.isPackage)),hash:void 0!==i.json_format.hash&&this.getObjectFromKey(s,i.json_format.hash)};if(h.hash&&!h.url&&!h.subPageUrl&&(h.url=`magnet:?xt=urn:btih:${h.hash}`),!h.url&&!h.subPageUrl&&!h.hash)return;const m=this.getObjectFromKey(s,i.json_format.size);h.size=this.getSize(m),n.push(h)}})}catch(o){console.error(`Error on provider ${i.name}`,o,e)}return n}static getTorrentsFromTextResponse(i,e,n){const o=[],a=(new DOMParser).parseFromString(e,"text/html"),l=this.evalCode(a,n,i,"row");return l&&l.forEach(c=>{try{const u=this.evalCode(c,n,i,"title");let h=this.addBaseUrlIfNeeded(i.base_url,this.evalCode(c,n,i,"url")),m=null;i.source_is_in_sub_page&&(m=h,h=null);const f={providerName:i.name,title:u,url:h,subPageUrl:m,seeds:this.getFormatIntIfNotNull(this.evalCode(c,n,i,"seeds")),peers:this.getFormatIntIfNotNull(this.evalCode(c,n,i,"peers")),quality:O.getQuality(u),size:0,isPackage:!!this.evalCode(c,n,i,"isPackage"),hash:this.evalCode(c,n,i,"hash")};if(!f.url&&!f.subPageUrl)return;const _=this.evalCode(c,n,i,"size");f.size=this.getSize(_),o.push(f)}catch{}}),o}static evalCode(i,e,n,o){const s=n.html_parser[o];try{return Function("doc","row","code","return eval(code)")(i,i,n.html_parser[o])}catch(a){return console.error(`Failed to execute ${o} code: ${s} for provider ${n.name}. Url: ${e}`,a.toString()),null}}static transformProviderTorrentResultToTorrentSource(i){let e=null;const n=i.hash??this.getHashFromUrl(i.url);return e=n?i.providerName+"-"+n:i.providerName+"-"+i.url+"-"+i.subPageUrl,{id:e,provider:i.providerName,title:i.title,seeds:i.seeds,peers:i.peers,size:i.size,quality:i.quality,url:i.url,subPageUrl:i.subPageUrl,isPackage:i.isPackage,hash:n,isCached:!1,type:"torrent"}}static getTorrentsFromProviderHttpResponse(i,e,n){let o=[];o=e.json_format?this.getTorrentsFromJsonResponse(e,i):this.getTorrentsFromTextResponse(e,i,n);const s=[];return o.forEach(a=>{s.push(this.transformProviderTorrentResultToTorrentSource(a))}),s}static getHashFromSubPages(i){if(0===i.length)return(0,p.of)(i);const e=[],n=[],o=[];return i.forEach(s=>{if(s.hash||!s.subPageUrl)return s.hash&&o.push(s.hash),n.push(s),void e.push((0,p.of)(s));const a=ve.getData(s.url,s.subPageUrl).pipe(I(l=>(l&&(s.url=l,s.hash=De.getHashFromUrl(l)),s.hash?o.includes(s.hash)||(o.push(s.hash),n.push(s)):n.push(s),s)));e.push(a)}),(0,p.forkJoin)(e).pipe(K(n))}}De.tokenByProvider=new Map;class Cr extends De{static getMovies(i,e){return super.getTorrents(e,i,e.movie)}static getEpisodes(i,e){let n=[];return super.getTorrents(e,i,e.episode).pipe(y(o=>(n=n.concat(o),e.season?super.getTorrents(e,i,e.season):(0,p.of)([]))),I(o=>n.concat(o)))}static getAnimes(i,e){let n=[];return super.getTorrents(e,i,e.anime).pipe(y(o=>(n=n.concat(o),e.season?super.getTorrents(e,i,e.season):(0,p.of)([]))),I(o=>n.concat(o)))}static getData(i,e){if("movie"===i.category&&!e.movie)return(0,p.throwError)(`Prodiver ${e.name} doesn't handle category ${i.category}`);if("tv"===i.category&&!e.episode&&!e.season)return(0,p.throwError)(`Prodiver ${e.name} doesn't handle category ${i.category}`);if("anime"===i.category&&!e.anime)return(0,p.throwError)(`Prodiver ${e.name} doesn't handle category ${i.category}`);const n="helios_"+e.name+"_"+JSON.stringify(i);return B.get(n).pipe(y(o=>{console.log("DOING",e.name);const s=Date.now();if(Object.keys(ke).length>0&&(console.log("You are using the test providers, cache is now disabled"),o=null),o)return(0,p.of)(o);let a;"movie"===i.category?a=this.getMovies(i,e):"tv"===i.category?a=this.getEpisodes(i,e):"anime"===i.category&&(a=this.getAnimes(i,e));const l=new Sr;return l.provider=e.name,a.pipe(D(c=>{let u="";return u="string"==typeof c?c:c instanceof v.WakoHttpError&&c.status?c.status.toString():c.message?c.message:JSON.stringify(c),l.errorMessage=u,(0,p.of)([])}),I(c=>{const u=Date.now();return l.sources=c,l.timeElapsed=u-s,B.set(n,l,"1h"),l}))}),_e(o=>{P(`${o.provider} - ${o.sources.length} torrents found in ${o.timeElapsed} ms`)}))}}let dn=(()=>{class r{constructor(e,n){this.providerService=e,this.settingsService=n}getBestSource(e,n){const o=Ce(e,At);if(n){let l,a=0;if(e.forEach(c=>{const u=Ft(n.title,c.title);u>a&&(l=c,a=u)}),l)return l}let s=null;return this.hasBestTorrent(o.sources2160p)?s=o.sources2160p[0]:this.hasBestTorrent(o.sources1080p)?s=o.sources1080p[0]:this.hasBestTorrent(o.sources720p)?s=o.sources720p[0]:this.hasBestTorrent(o.sourcesOther)&&(s=o.sourcesOther[0]),s}excludeUnwantedHighQuality(e){return(0,p.from)(this.settingsService.get()).pipe(I(n=>{const o=[];let s=!1;return n.qualities.forEach(a=>{a.enabled&&(s=!0),!s&&!a.enabled&&o.push(a.quality)}),e.filter(a=>!o.includes(a.quality))}))}applyFileSizeFilter(e,n){return(0,p.from)(this.settingsService.get()).pipe(I(o=>{const s="movie"===e.category?o.fileSizeFilteringMovie:o.fileSizeFilteringTv;if(!1===s.enabled)return n;const a=s.maxSize>0?1024*s.maxSize*1024*1024:0,l=s.minSize>0?1024*s.minSize*1024*1024:0;return n.filter(c=>{if(null===c.size||0===c.size||c.isPackage)return!0;let u=0;return 0===l&&u++,0===a&&u++,l>0&&c.size>=l&&u++,a>0&&c.size<=a&&u++,u>=2})}))}getByProvider(e,n){return Cr.getData(e,n).pipe(D(o=>(0,p.throwError)(o)),y(o=>this.excludeUnwantedHighQuality(o.sources).pipe(y(s=>this.applyFileSizeFilter(e,s)),I(s=>(o.sources=s,o)))))}hasBestTorrent(e){if(0===e.length)return!1;const n=e[0];return n.seeds>=20&&n.seeds>n.peers}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(Z),t.\u0275\u0275inject(R))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();const un="helios_previousplayed_movie2",Ae="helios_previousplayed_show2";let Fe=(()=>{class r{constructor(e,n,o,s){this.cachedTorrentSourceService=e,this.torrentSourceService=n,this.settingsService=o,this.providerService=s}getByProvider(e,n){return this.torrentSourceService.getByProvider(e,n).pipe(y(o=>(0,p.from)(this.settingsService.get()).pipe(y(s=>{(e.movie||e.episode)&&(o.sources=class vr{static filterByExcludedQualities(i,e){const n=["2160p","1080p","720p","other"];return i.filter(o=>n.includes(o.quality)&&!1===e.includes(o.quality))}static getOnlyNeededQuality(i,e){let n=[];const o=e.slice(0);o.unshift("fake");do{o.shift(),n=this.filterByExcludedQualities(i,o)}while(n.length<20&&o.length>0);return n}static getData(i,e){const n=[];return e.forEach(o=>{!1===o.enabled&&n.push(o.quality)}),this.getOnlyNeededQuality(i.slice(0),n)}}.getData(o.sources,s.qualities));const a=Date.now();return this.cachedTorrentSourceService.getFromTorrents(o.sources,e).pipe(I(l=>{const c=Date.now(),u=new br;return u.provider=n.name,u.sources=l,u.timeElapsed=c-a,{provider:n.name,torrentSourceDetail:o,cachedTorrentDetail:u,timeElapsedTotal:o.timeElapsed+u.timeElapsed}}))}))))}getLastMoviePlayedSource(){return B.get(un)}setLastMoviePlayedSource(e,n,o){return g(function*(){return yield B.set(un,{id:e,title:n,provider:o},"1m")})()}getLastEpisodePlayedSource(e){return B.get(Ae+"_"+e).pipe(y(n=>n?(0,p.of)(n):B.get(Ae)))}setLastEpisodePlayedSource(e,n,o,s){return g(function*(){return yield B.set(Ae+"_"+s,{id:e,title:n,provider:o,showTraktId:s},"1m"),yield B.set(Ae,{id:e,title:n,provider:o,showTraktId:s},"1m")})()}getBestSourceFromSourceByProviders(e,n,o,s){if("open-elementum"===o.defaultPlayButtonAction){const l=[];n.forEach(u=>{l.push(...u.torrentSourceDetail.sources)});const c=this.torrentSourceService.getBestSource(l,s);return(0,p.of)(c)}const a=[];return n.forEach(l=>{a.push(...l.cachedTorrentDetail.sources)}),this.cachedTorrentSourceService.getBestSource(a,e,s)}getBestSourcesObservables(e,n,o,s,a=4){let l=[];const c=[];return n.forEach(u=>{s&&u.name===s.provider?c.unshift(this.getByProvider(e,u).pipe(y(h=>this.getBestSourceFromSourceByProviders(e,[h],o,s)))):(l.push(this.getByProvider(e,u)),"number"==typeof a&&l.length%a==0&&(c.push((0,p.forkJoin)(...l).pipe(y(h=>this.getBestSourceFromSourceByProviders(e,h,o,s)))),l=[]))}),l.length>0&&c.push((0,p.forkJoin)(...l).pipe(y(u=>this.getBestSourceFromSourceByProviders(e,u,o,s)))),c}setEpisodeAbsoluteNumberIfAnime(e){return!e.episode||!e.episode.isAnime||e.episode.absoluteNumber>0?(0,p.of)(null):Qt.submit(e.episode.showTmdbId,e.episode.seasonNumber).pipe(D(()=>p.EMPTY),I(n=>{n.episodes.forEach(o=>{o.episode_number===e.episode.seasonNumber&&(e.episode.absoluteNumber=o.production_code)})}))}getBestSource(e,n=!1,o){return(0,p.from)(this.settingsService.get()).pipe(y(s=>(o||(o="open-elementum"===s.defaultPlayButtonAction?"torrent":"stream"),this.getBestSourceFromProviders(e,n))))}getBestSourceFromProviders(e,n=!1){let o=null;o=e.movie?this.getLastMoviePlayedSource():this.getLastEpisodePlayedSource(e.episode.showTraktId);let s,a,l=0,c=0;return new p.Observable(u=>{const h=new p.Subject;(0,p.from)(this.settingsService.get()).pipe(y(m=>(s=m,(0,p.from)(this.providerService.getAll(!0,e.category)))),y(m=>(a=m,o)),y(m=>{const f=this.getBestSourcesObservables(e,a,s,m,4);return c=f.length,(0,p.concat)(...f).pipe(dt(h),_e(()=>{l++}))})).subscribe(m=>{(m||n)&&(h.next(!0),u.next(m),u.complete(),m&&(e.movie?this.setLastMoviePlayedSource(m.id,m.title,m.provider):this.setLastEpisodePlayedSource(m.id,m.title,m.provider,e.episode.showTraktId))),l===c&&!m&&(u.next(m),u.complete())},m=>u.error(m))})}getBestSourceFromKodiOpenMedia(e){return se.getData(e).pipe(y(n=>this.getBestSource(n)))}getAll(e){if(e.query&&0===e.query.trim().length)return p.EMPTY;let n;return this.setEpisodeAbsoluteNumberIfAnime(e).pipe(y(()=>(0,p.from)(this.providerService.getAll(!0,e.category))),y(o=>{n=o;const s=[];return n.forEach(a=>{s.push(this.getByProvider(e,a))}),(0,p.from)(this.settingsService.get()).pipe(y(a=>{if(0===a.simultaneousProviderQueries)return(0,p.merge)(...s);const l=[];let c=[];return s.forEach((u,h)=>{c.push(u),h%a.simultaneousProviderQueries==0&&(l.push((0,p.merge)(...c)),c=[])}),c.length>0&&l.push((0,p.merge)(...c)),(0,p.concat)(...l)}))}))}getNextEpisodeSources(e,n){let o=e.episode.latestAiredEpisode-e.episode.episodeNumber;o>3&&(o=3);const s=[];let a=e.episode.episodeCode,l=e.episode.absoluteNumber,c=e.episode.episodeNumber;for(let f=0;f<o;f++){const _=JSON.parse(JSON.stringify(e));a=xe(a),l&&(l++,_.episode.absoluteNumber=l),c++,_.episode.episodeNumber=c,_.episode.episodeCode=a,s.push(this.getBestSource(_,!0,n).pipe(I(b=>({source:b,sourceQuery:_}))))}const u=new p.Subject;let h=!1;const m=[];return(0,p.concat)(...s).pipe(dt(u),y(f=>{const _=f.source;if(null===_)return(0,p.of)(null);if("torrent"===_.type)return h=!0,m.push(f.source),(0,p.of)(!0);if(_ instanceof H){if(!_.streamLinks||_.streamLinks.length>1&&h)return u.next(!0),(0,p.of)(null);h=!0,m.push(f.source)}return(0,p.of)(!0)}),he(),K(m))}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(ct),t.\u0275\u0275inject(dn),t.\u0275\u0275inject(R),t.\u0275\u0275inject(Z))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})(),pn=(()=>{class r{constructor(e){this.storage=e,v.PlaylistService.initialize(this.storage),this.playListService=v.PlaylistService.getInstance()}getAll(){var e=this;return g(function*(){return yield e.playListService.getAllPlaylistsSortedByDateDesc()})()}getPlaylistFromVideoUrl(e){var n=this;return g(function*(){const o=yield n.getAll();for(const s of o)for(const a of s.items)if(a.url===e)return s;return null})()}getPlaylist(e,n,o){let s=e,a=null;return o&&(s=this.playListService.getPlaylistIdFromOpenMedia({episodeNumber:o?.episode?.number,seasonNumber:o?.episode?.seasonNumber,movieIds:o?.movie?.ids,showIds:o?.show?.ids}),o.movie?(n=o.movie.title,o.movie.imagesUrl&&(a=o.movie.imagesUrl.poster)):o.show&&(n=o.show.title+" S"+o.episode.seasonNumber.toString().padStart(2,"0"),o.show.imagesUrl&&(a=o.show.imagesUrl.poster))),{id:s,label:n,currentItem:0,poster:a,updatedAt:(new Date).toISOString(),items:[]}}setPlaylist(e,n){var o=this;return g(function*(){const s=yield o.getPlaylist(e.id,e.title,n);let a=yield o.playListService.get(s.id);return a||(console.log("CREATE playlist ",{playlist:s}),yield o.playListService.addOrUpdate(s),a=yield o.playListService.get(s.id)),a})()}savePlaylist(e){var n=this;return g(function*(){n.removeDuplicateEntries(e);const o=yield n.playListService.addOrUpdate(e);return v.EventService.emit(v.EventCategory.playlist,v.EventName.change),o})()}getId(e,n){if(!n)return e;let o=this.playListService.getPlaylistIdFromOpenMedia(n);return n.seasonNumber&&(o+=`_S${n.seasonNumber}`),n.episodeNumber&&(o+=`_E${n.episodeNumber}`),o}removeDuplicateEntries(e){const n=[],o=[];e.items.forEach(s=>{const a=this.getId(s.url,s.openMedia);o.includes(a)||(o.push(a),n.push(s))}),e.items=n}delete(e){this.playListService.delete(e.id)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(v.WakoStorage))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})(),de=(()=>{class r{constructor(e,n,o,s,a,l,c,u,h,m,f){this.actionSheetController=e,this.translateService=n,this.platform=o,this.debridAccountService=s,this.toastService=a,this.loadingController=l,this.clipboardService=c,this.settingsService=u,this.cachedTorrentService=h,this.sourceService=m,this.heliosPlaylistService=f}openTorrentSource(e,n){ve.getData(e.url,e.subPageUrl).subscribe(o=>{o?(e.url=o,this._openTorrentSource(e,n)):this.toastService.simpleMessage("toasts.open-source.cannotRetrieveUrl")})}openStreamLinkSource(e,n,o,s="default"){var a=this;return g(function*(){const l=yield a.getStreamLinksWithLoader(e,n),c=yield a.settingsService.get();let u="default"===s?[c.defaultPlayButtonAction]:c.availablePlayButtonActions;1===u.length&&"let-me-choose"===u[0]&&(u=c.availablePlayButtonActions),e.streamLinks=l;let h=n.query&&l.length>1;n.episode&&l.length>1&&!Bt(l,n)&&(h=!0,a.toastService.simpleMessage(`Episode ${n.episode.episodeCode} not found`)),h?a.selectStreamLink(e,u,o):a._openStreamLinkSource(e,u,o)})()}getStreamLinksWithLoader(e,n,o=!0){var s=this;return g(function*(){const a=yield s.loadingController.create({spinner:"crescent",backdropDismiss:!0});o&&(yield a.present());try{return yield(0,p.lastValueFrom)(s.cachedTorrentService.getStreamLinks(e,n))}catch(l){throw l&&l instanceof v.WakoHttpError?403===l.status?s.toastService.simpleMessage("toasts.open-source.permissionDenied",{debridService:e.debridService},4e3):s.toastService.simpleMessage(JSON.stringify(l.response),null,4e3):l&&"string"==typeof l?s.toastService.simpleMessage(l,null,4e3):l&&l.message?(s.toastService.simpleMessage(l.message,null,4e3),100===l?.code&&e.originalUrl&&s._openTorrentSource({hash:e.originalHash,id:e.id,isCached:!1,isPackage:e.isPackage,peers:null,provider:e.provider,quality:e.quality,seeds:null,size:e.size,title:e.title,type:"torrent",url:e.originalUrl})):s.toastService.simpleMessage("toasts.open-source.sourceNotCached"),l}finally{yield a.dismiss()}})()}selectStreamLink(e,n,o){var s=this;return g(function*(){const a=[];e.streamLinks.forEach(c=>{a.push({text:c.filename,handler:()=>{const u=new H(e.id,e.title,e.size,e.quality,e.type,e.isPackage,e.debridService,e.provider,e.originalUrl),h=[c];if(o&&o.episode){let m=!1;e.streamLinks.forEach(f=>{c.filename===f.filename?m=!0:m&&h.push(f)}),h.length>1&&(u.isPackage=!0)}u.streamLinks=h,s._openStreamLinkSource(u,n,o)}})}),a.length>5&&a.push({text:s.translateService.instant("shared.cancel"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}),(yield s.actionSheetController.create({header:s.translateService.instant("actionSheets.open-source.selectLink.openTitle"),buttons:a})).present()})()}_openTorrentSource(e,n){var o=this;return g(function*(){const s=yield o.settingsService.get(),a=yield o.debridAccountService.hasAtLeastOneAccount(),l=v.KodiAppService.currentHost,c=yield o.debridAccountService.getPremiumizeSettings(),u=yield o.debridAccountService.getRealDebridSettings(),h=yield o.debridAccountService.getAllDebridSettings(),m=[];if(a&&(c&&m.push({cssClass:"pm",text:o.translateService.instant("actionSheets.open-source.options.add-to-pm"),handler:()=>{o.open(e,"add-to-pm",n)}}),u&&m.push({cssClass:"rd",text:o.translateService.instant("actionSheets.open-source.options.add-to-rd"),handler:()=>{o.open(e,"add-to-rd",n)}}),h&&m.push({cssClass:"ad",text:o.translateService.instant("actionSheets.open-source.options.add-to-ad"),handler:()=>{o.open(e,"add-to-ad",n)}})),s.availablePlayButtonActions.includes("share-url")&&m.push({icon:"share",text:o.translateService.instant("actionSheets.open-source.options.share-url"),handler:()=>{o.open(e,"share-url",n)}}),s.availablePlayButtonActions.includes("open-elementum")&&l&&m.push({cssClass:"kodi",text:o.translateService.instant("actionSheets.open-source.options.open-elementum"),handler:()=>{o.open(e,"open-elementum",n)}}),s.availablePlayButtonActions.includes("add-to-playlist")&&m.push({icon:"list",text:o.translateService.instant("actionSheets.open-source.options.add-to-playlist"),handler:()=>{o.open(e,"add-to-playlist",n)}}),s.availablePlayButtonActions.includes("copy-url")&&m.push({role:"copy-url",icon:"copy",text:o.translateService.instant("actionSheets.open-source.options.copy-url"),handler:()=>{o.toastService.simpleMessage("toasts.copyToClipboard",{element:"Video URL"})}}),1===m.length)return void m[0].handler();m.forEach(b=>{b.icon||(b.icon="arrow-dropright")});const f=yield o.actionSheetController.create({header:o.translateService.instant("actionSheets.open-source.openTitle"),buttons:m});o.setImages(),yield f.present();const _=document.querySelector(".action-sheet-copy-url");!_||_.addEventListener("click",()=>{o.clipboardService.copyFromContent(e.url),setTimeout(()=>{o.clipboardService.copyFromContent(e.url)},100)})})()}_openStreamLinkSource(e,n,o){var s=this;return g(function*(){const a=yield s.debridAccountService.hasAtLeastOneAccount(),l=yield s.debridAccountService.getPremiumizeSettings(),c=yield s.debridAccountService.getRealDebridSettings(),u=[];if(n.forEach(_=>{if(_.match("elementum")||a&&"add-to-pm"===_&&!l||a&&"add-to-rd"===_&&!c)return;const b={text:s.translateService.instant("actionSheets.open-source.options."+_)};switch(_){case"add-to-pm":b.cssClass="pm";break;case"add-to-rd":b.cssClass="rd";break;case"add-to-ad":b.cssClass="ad";break;case"open-browser":b.icon="browsers";break;case"copy-url":b.role="copy-url",b.icon="copy",b.handler=()=>{s.toastService.simpleMessage("toasts.copyToClipboard",{element:"Video URL"})};break;case"share-url":b.icon="share";break;case"open-with":b.icon="open";break;case"download-vlc":b.icon="cloud-download";break;case"open-vlc":b.cssClass="vlc";break;case"open-outplayer":b.cssClass="outplayer";break;case"open-nplayer":b.cssClass="nplayer";break;case"open-kodi":b.cssClass="kodi";break;case"add-to-playlist":b.icon="list";break;case"open-infuse":b.cssClass="infuse";break;case"cast":b.cssClass="cast"}b.handler||(b.handler=()=>{s.open(e,_,o)}),u.push(b)}),1===u.length)return void u[0].handler();u.forEach(_=>{_.icon||(_.icon="arrow-dropright")});let h=null;e.streamLinks.length>0&&null!==e.streamLinks[0].filename.match(".rar")&&(h="Warning the file is compressed");const m=yield s.actionSheetController.create({header:s.translateService.instant("actionSheets.open-source.openTitle"),subHeader:h,buttons:u});s.setImages(),yield m.present();const f=document.querySelector(".action-sheet-copy-url");!f||f.addEventListener("click",()=>{const _=e.streamLinks[0];s.clipboardService.copyFromContent(_.url),setTimeout(()=>{s.clipboardService.copyFromContent(_.url)},100)})})()}setImages(){[{class:".pm",imgUrl:"https://raw.githubusercontent.com/wako-unofficial-addons/assets/main/pm.svg"},{class:".vlc",imgUrl:v.VLC_IMAGE},{class:".rd",imgUrl:"https://raw.githubusercontent.com/wako-unofficial-addons/assets/main/rd.png"},{class:".ad",imgUrl:"https://raw.githubusercontent.com/wako-unofficial-addons/assets/main/ad.png"},{class:".kodi",imgUrl:v.KODI_IMAGE},{class:".nplayer",imgUrl:v.NPLAYER_IMAGE},{class:".infuse",imgUrl:v.INFUSE_IMAGE},{class:".cast",imgUrl:v.CAST_IMAGE},{class:".outplayer",imgUrl:"https://outplayer.app/images/logo.svg"}].forEach(n=>{const o=document.querySelector(n.class+" .action-sheet-button-inner");o&&(o.innerHTML=`<img style="width: 24px; height: 24px;  margin-inline-end: 32px;" src="${n.imgUrl}"> `+o.innerHTML,document.querySelector(n.class+" ion-icon").remove())})}openKodi(e,n,o,s,a,l){let u,c=0;return v.KodiAppService.checkAndConnectToCurrentHost().pipe(D(h=>("hostUnreachable"===h?this.toastService.simpleMessage("toasts.kodi.hostUnreachable",{hostName:v.KodiAppService.currentHost.name},2e3):this.toastService.simpleMessage("toasts.kodi.noHost"),p.NEVER)),y(()=>a||(0,p.of)(!0)),y(()=>{let h=e.shift();return n&&(l=te(n),s||(h=v.KodiAppService.prependOpenMediaToUrl(h,l))),(0,p.from)(this.settingsService.get()).pipe(y(m=>(u=m,v.KodiAppService.openUrl(h,l,u.openRemoteAfterClickOnPlay,{seekTo:o},!1))))}),_e(()=>{const h=e.slice(0,5);c=h.length;const f={title:n?(n.movie?n.movie.title:n.show.title).replace(/\./g," "):"",hostName:v.KodiApiService.host.name};u.enableEpisodeAutomaticPlaylist&&e.length>0&&(s||function Kn(r,i){const e=[];let n=i.episode?i.episode.number:null;return r.forEach(o=>{n&&n++,i&&e.push({file:v.KodiAppService.prependOpenMediaToUrl(o,{movieIds:i.movie?i.movie.ids:null,showIds:i.show.ids?i.show.ids:null,seasonNumber:i.episode?i.episode.seasonNumber:null,episodeNumber:n||null})})}),v.KodiApiService.doHttpAction("Playlist.Add",{playlistid:1,item:e})}(h,n).subscribe());const _=this.translateService.instant("toasts.startOpening",f);this.toastService.simpleMessage(_)})).subscribe()}openBrowserUrl(e){this.platform.is("ios")?v.BrowserService.open(e,!0):window.open(e,"_system","location=yes")}openVlc(e){var n=this;return g(function*(){n.platform.is("ios")?v.BrowserService.open(`vlc-x-callback://x-callback-url/stream?url=${e}`,!1):v.BrowserService.open(`vlc://${e}`,!1)})()}openNplayer(e){var n=this;return g(function*(){n.platform.is("ios")&&v.BrowserService.open(`nplayer-${e}`,!1)})()}openInfuse(e){var n=this;return g(function*(){if(!n.platform.is("ios"))return;const o=`infuse://x-callback-url/play?url=${encodeURIComponent(e)}`;v.BrowserService.open(o,!1)})()}openOutplayer(e){var n=this;return g(function*(){n.platform.is("ios")&&v.BrowserService.open(`outplayer://${e}`,!1)})()}cast(e,n,o,s,a){return g(function*(){const l=n?(n.movie?n.movie.title:n.show.title+" - "+n.episode.code).replace(/\./g," "):"",c=n?n.movie?n.movie.imagesUrl.poster:n.show.imagesUrl.poster:null;n&&(s=te(n)),v.ChromecastService.openUrl(l,e,c,s).subscribe(()=>{o>0&&v.ChromecastService.media&&v.ChromecastService.seek(o)},u=>{a&&v.ChromecastService.openUrl(l,a,c,s).subscribe(()=>{o>0&&v.ChromecastService.media&&v.ChromecastService.seek(o)})})})()}downloadWithVlc(e){var n=this;return g(function*(){console.log("downloadWithVlc",e),n.platform.is("ios")&&v.BrowserService.open(`vlc-x-callback://x-callback-url/download?url=${e}`,!1)})()}addToPM(e){var n=this;return g(function*(){const o=yield n.loadingController.create({spinner:"crescent"});o.present(),class Zi{static submit(i){return q.post("/transfer/create",{src:i})}}.submit(e).pipe(V(()=>o.dismiss())).subscribe(s=>{"success"===s.status?n.toastService.simpleMessage("toasts.open-source.addedToPM"):n.toastService.simpleMessage("toasts.open-source.failedToAddToPM",{error:s.message})})})()}addToAD(e){var n=this;return g(function*(){const o=yield n.loadingController.create({spinner:"crescent"});o.present(),tn.submit([e]).pipe(V(()=>o.dismiss())).subscribe(s=>{"success"===s.status?n.toastService.simpleMessage("toasts.open-source.addedToAD"):n.toastService.simpleMessage("toasts.open-source.failedToAddToAD",{error:s?.error?.message})})})()}addToRD(e){var n=this;return g(function*(){const o=yield n.loadingController.create({spinner:"crescent"});o.present(),class rr{static handle(i){let e=null;return Xt.submit(i).pipe(y(n=>(e=n,fe.submit(n.id))),y(n=>0===n.files.length?(ge.submit(e.id).subscribe(),(0,p.throwError)("Cannot add this source: "+n.status)):en.submit(n.id,"all").pipe(function ir(r=1/0){let i;i=r&&"object"==typeof r?r:{count:r};const{count:e=1/0,delay:n,resetOnSuccess:o=!1}=i;return e<=0?me:U((s,a)=>{let c,l=0;const u=()=>{let h=!1;c=s.subscribe(M(a,m=>{o&&(l=0),a.next(m)},void 0,m=>{if(l++<e){const f=()=>{c?(c.unsubscribe(),c=null,u()):h=!0};if(null!=n){const _="number"==typeof n?function nr(r=0,i,e=er){let n=-1;return null!=i&&(function tr(r){return r&&A(r.schedule)}(i)?e=i:n=i),new X(o=>{let s=on(r)?+r-e.now():r;s<0&&(s=0);let a=0;return e.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},s)})}(n):re(n(m,l)),b=M(a,()=>{b.unsubscribe(),f()},()=>{a.complete()});_.subscribe(b)}else f()}else a.error(m)})),h&&(c.unsubscribe(),c=null,u())};u()})}(2),y(()=>fe.submit(n.id)))))}}.handle(e).pipe(D(s=>{let a=s;return s.response&&(a=s.response),n.toastService.simpleMessage("toasts.open-source.failedToAddToRD",{error:JSON.stringify(a)}),p.EMPTY}),V(()=>o.dismiss())).subscribe(()=>{n.toastService.simpleMessage("toasts.open-source.addedToRD")},s=>{n.toastService.simpleMessage("toasts.open-source.failedToAddToRD",{error:s.toString()})})})()}openElementum(e,n){n&&se.getData(n).subscribe(o=>{this.openKodi([Ne(e.url,o)],n,null,"plugin.video.elementum",this.getElementumCheckObservable())})}getElementumCheckObservable(){return(0,p.of)(!0).pipe(y(()=>this.isElementumAddonInstalled()),y(e=>e?(0,p.of)(!0):(this.toastService.simpleMessage("toasts.elementumNotInstalled"),p.NEVER)))}isElementumAddonInstalled(){return this.isPluginInstalled("plugin.video.elementum")}isPluginInstalled(e){return v.KodiGetAddonDetailsForm.submit(e).pipe(I(n=>!!n))}share(e,n,o){v.WakoShare.share({url:e,text:o??n,dialogTitle:n,title:n})}openWith(e,n){window.plugins&&window.plugins.intentShim&&window.plugins.intentShim.startActivity({action:window.plugins.intentShim.ACTION_VIEW,type:"video/*",url:e,extras:{title:n}},()=>console.log("intentShim success"),s=>console.log("intentShim err",s))}getElementumNextEpisodeUrlFromPackage(e,n){const o=[];if(n&&n.episode&&e.isPackage){const s=n.episode.latestAiredEpisode-n.episode.episodeNumber;let a=n.episode.episodeCode,l=n.episode.absoluteNumber,c=n.episode.episodeNumber;for(let u=0;u<s;u++){const h=JSON.parse(JSON.stringify(n));a=xe(a),l&&(l++,h.episode.absoluteNumber=l),c++,h.episode.episodeNumber=c,h.episode.episodeCode=a,o.push(Ne(e.url,h))}}return o}getTorrentSourceFromSource(e){return e instanceof H?{id:e.id,hash:e.originalHash,isCached:!0,cachedService:e.debridService,provider:e.provider,quality:e.quality,seeds:null,peers:null,isPackage:e.isPackage,size:e.size,title:e.title,subPageUrl:null,url:e.originalUrl,type:"torrent",videoMetaData:e.videoMetaData}:e}getCustomDataFromSource(e,n){const o={sourceQuery:n,torrentSource:this.getTorrentSourceFromSource(e),type:e.type};return JSON.parse(JSON.stringify(o))}getStreamUrlFromSource(e,n,o=!1){let s;if("torrent"===e.type)s=Ne(e.url,n);else{const a=e.streamLinks[0];s=o?a.transcodedUrl:a.url}return s}handleWakoPlaylist(e,n,o=!0,s=!1){return se.getData(n).pipe(y(a=>(0,p.from)(this.heliosPlaylistService.setPlaylist(e,n)).pipe(y(l=>n&&n.episode?(l.items.push({label:a.episode.episodeCode,url:this.getStreamUrlFromSource(e,a,s),currentSeconds:0,pluginId:"plugin.helios",openMedia:n?te(n):null,customData:this.getCustomDataFromSource(e,a)}),l.currentItem=l.items.length-1,this.getNextEpisodeSources(e,a).pipe(I(c=>{let u=a.episode.episodeCode,h=a.episode.absoluteNumber,m=a.episode.episodeNumber;const f=JSON.parse(JSON.stringify(n));return c.forEach(_=>{const b=JSON.parse(JSON.stringify(a));let S=[];"torrent"===_.type?_.isPackage?S=this.getElementumNextEpisodeUrlFromPackage(_,b):S.push(this.getStreamUrlFromSource(_,b)):_ instanceof H&&_.streamLinks.forEach(w=>{S.push(s?w.transcodedUrl:w.url)}),S.forEach(w=>{u=xe(u),h&&(h++,b.episode.absoluteNumber=h),m++,b.episode.episodeNumber=m,b.episode.episodeCode=u,f.episode.number++,l.items.push({label:b.episode.episodeCode,url:w,currentSeconds:0,pluginId:"plugin.helios",openMedia:n?te(f):null,customData:this.getCustomDataFromSource(_,b)})})}),l}))):(o||("torrent"===e.type?l.items.push({label:e.title,url:this.getStreamUrlFromSource(e,a,s),currentSeconds:0,pluginId:"plugin.helios",openMedia:n?te(n):null,customData:this.getCustomDataFromSource(e,a)}):e instanceof H&&e.streamLinks.forEach(c=>{l.items.push({label:c.title,url:this.getStreamUrlFromSource(e,a,s),currentSeconds:0,pluginId:"plugin.helios",openMedia:n?te(n):null,customData:this.getCustomDataFromSource(e,a)})})),(0,p.of)(l))),y(l=>0===l.items.length?(this.heliosPlaylistService.delete(l),p.EMPTY):(0,p.from)(this.heliosPlaylistService.savePlaylist(l)).pipe(_e(()=>{this.toastService.simpleMessage("toasts.playlist",{playlistName:l.label,items:l.items.length},5e3)}))))))}getNextEpisodeSources(e,n){return!n.episode||e.isPackage?(e instanceof H&&e.streamLinks.length>0&&e.streamLinks.shift(),(0,p.of)([e])):this.sourceService.getNextEpisodeSources(n,"torrent"===e.type?"torrent":"stream")}open(e,n,o){var s=this;return g(function*(){const a=yield s.settingsService.get();if("torrent"!==e.type){const l=e,c=yield s.debridAccountService.getPremiumizeSettings(),u=!!c&&c.preferTranscodedFiles,h=!!c&&c.preferTranscodedFilesChromecast;let m=u,f="",_="";o&&(f=o.movie?o.movie.title:o.show.title+" "+o.episode.code,_=o.movie?o.movie.imagesUrl.poster:o.show.imagesUrl.poster);let b=!1;if(0===l.streamLinks.length)throw new Error("No links found");const S=l.streamLinks[0];switch(n){case"add-to-pm":s.addToPM(l.originalUrl);break;case"add-to-rd":s.addToRD(l.originalUrl);break;case"add-to-ad":s.addToAD(l.originalUrl);break;case"open-browser":let w=S.url??S.transcodedUrl;S.servicePlayerUrl&&(w=S.servicePlayerUrl),s.openBrowserUrl(w),b=!0;break;case"share-url":s.share(u&&S.transcodedUrl?S.transcodedUrl:S.url,S.filename);break;case"open-with":s.openWith(u&&S.transcodedUrl?S.transcodedUrl:S.url,S.filename),b=!0;break;case"download-vlc":s.downloadWithVlc(u&&S.transcodedUrl?S.transcodedUrl:S.url),b=!0;break;case"open-vlc":s.openVlc(u&&S.transcodedUrl?S.transcodedUrl:S.url),b=!0;break;case"open-outplayer":s.openOutplayer(u&&S.transcodedUrl?S.transcodedUrl:S.url),b=!0;break;case"open-nplayer":s.openNplayer(u&&S.transcodedUrl?S.transcodedUrl:S.url),b=!0;break;case"open-kodi":const E=[];l.streamLinks.forEach(W=>{E.push(u&&W.transcodedUrl?W.transcodedUrl:W.url)}),s.openKodi(E,o),b=!0;break;case"add-to-playlist":s.handleWakoPlaylist(e,o,!1,m).subscribe();break;case"open-infuse":s.openInfuse(u&&S.transcodedUrl?S.transcodedUrl:S.url),b=!0;break;case"cast":let x=S.url,Y=S.transcodedUrl;h&&(x=S.transcodedUrl,Y=S.url,m=!0),s.cast(x,o,null,null,Y),b=!0;break;default:return void se.getData(o).subscribe(W=>{s.openStreamLinkSource(l,W,o)})}b&&(o&&(o.show?s.sourceService.setLastEpisodePlayedSource(l.id,l.title,l.provider,o.show.ids.trakt):o.movie&&s.sourceService.setLastMoviePlayedSource(l.id,l.title,l.provider)),a.enableEpisodeAutomaticPlaylist&&s.handleWakoPlaylist(e,o,!0,m).subscribe())}else{const l=e;switch(n){case"add-to-pm":ve.getData(l.url,l.subPageUrl).subscribe(c=>{s.addToPM(c)});break;case"add-to-rd":ve.getData(l.url,l.subPageUrl).subscribe(c=>{s.addToRD(c)});break;case"add-to-ad":ve.getData(l.url,l.subPageUrl).subscribe(c=>{s.addToAD(c)});break;case"open-elementum":s.openElementum(l,o),a.enableEpisodeAutomaticPlaylist&&s.handleWakoPlaylist(l,o).subscribe();break;case"share-url":s.share(null,l.title,l.url);break;case"add-to-playlist":s.handleWakoPlaylist(l,o,!1).subscribe()}}})()}resetPlaylistVideoUrls(e,n=!0){var o=this;return g(function*(){const s=e.customData;if(s.sourceQuery&&s.torrentSource)if("torrent"===s.type){const a=o.getStreamUrlFromSource(s.torrentSource,s.sourceQuery);a&&(e.url=a)}else{const l=(yield o.cachedTorrentService.getFromTorrents([s.torrentSource],s.sourceQuery).toPromise()).pop();if(!l)return;const c=yield o.getStreamLinksWithLoader(l,s.sourceQuery,n);if(c){l.streamLinks=c;const u=o.getStreamUrlFromSource(l,s.sourceQuery);if(u){e.url=u;const h=o.getStreamUrlFromSource(l,s.sourceQuery,!0);h&&(e.customData.fallBackUrl=h)}}}})()}openPlaylistVideo(e){var n=this;return g(function*(){const o=e.customData;if(o.sourceQuery&&o.torrentSource){const m=e.url;yield n.resetPlaylistVideoUrls(e),n.heliosPlaylistService.getPlaylistFromVideoUrl(m).then(function(){var f=g(function*(_){if(!_){for(const b of _.items)yield n.resetPlaylistVideoUrls(b,!1);yield n.heliosPlaylistService.savePlaylist(_)}});return function(_){return f.apply(this,arguments)}}())}const s=Math.round((e.currentSeconds-5)/e.totalSeconds*100);let a=null;if(e.customData&&(e.customData.movie||e.customData.show&&e.customData.episode)&&(a={movie:e.customData.movie,show:e.customData.show,episode:e.customData.episode,titleLang:e.customData.titleLang}),e.url.match("elementum"))return void n.openKodi([e.url],null,s,"plugin.video.elementum",n.getElementumCheckObservable(),e.openMedia);const l=yield n.settingsService.get(),c=[];if(l.availablePlayButtonActions.forEach(m=>{if(m.match("elementum")||"add-to-pm"===m||"add-to-rd"===m||"add-to-playlist"===m)return;const f={text:n.translateService.instant("actionSheets.open-source.options."+m)};switch(m){case"open-browser":f.icon="browsers",f.handler=()=>{n.openBrowserUrl(e.url)};break;case"copy-url":f.role="copy-url",f.icon="copy",f.handler=()=>{n.toastService.simpleMessage("toasts.copyToClipboard",{element:"Video URL"})};break;case"share-url":f.icon="share",f.handler=()=>{n.share(e.url,e.label)};break;case"open-with":f.icon="open",f.handler=()=>{n.openWith(e.url,e.label)};break;case"download-vlc":f.icon="cloud-download",f.handler=()=>{n.downloadWithVlc(e.url)};break;case"open-vlc":f.cssClass="vlc",f.handler=()=>{n.openVlc(e.url)};break;case"open-outplayer":f.cssClass="outplayer",f.handler=()=>{n.openOutplayer(e.url)};break;case"open-nplayer":f.cssClass="nplayer",f.handler=()=>{n.openNplayer(e.url)};break;case"open-kodi":f.cssClass="kodi",f.handler=()=>{const S=e.url;if(a){const w=te(a);e.url=v.KodiAppService.prependOpenMediaToUrl(e.url,w)}v.KodiAppService.checkAndConnectToCurrentHost().pipe(D(w=>("hostUnreachable"===w?n.toastService.simpleMessage("toasts.kodi.hostUnreachable",{hostName:v.KodiAppService.currentHost.name},2e3):n.toastService.simpleMessage("toasts.kodi.noHost"),p.NEVER)),y(()=>v.KodiAppService.resumePlaylistVideo(e))).subscribe(()=>{e.url=S})};break;case"open-infuse":f.cssClass="infuse",f.handler=()=>{n.openInfuse(e.url)};break;case"cast":f.cssClass="cast";const _=e.url;let b=null;e.customData&&e.customData.fallbackUrl&&(b=e.customData.fallbackUrl),f.handler=()=>{n.cast(_,a,e.currentSeconds,e.openMedia,b)}}c.push(f)}),1===c.length)return void c[0].handler();c.forEach(m=>{m.icon||(m.icon="arrow-dropright")});const u=yield n.actionSheetController.create({header:n.translateService.instant("actionSheets.open-source.openTitle"),buttons:c});n.setImages(),yield u.present();const h=document.querySelector(".action-sheet-copy-url");!h||h.addEventListener("click",()=>{n.clipboardService.copyFromContent(e.url),setTimeout(()=>{n.clipboardService.copyFromContent(e.url)},100)})})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(d.ActionSheetController),t.\u0275\u0275inject(T.TranslateService),t.\u0275\u0275inject(d.Platform),t.\u0275\u0275inject(oe),t.\u0275\u0275inject(ce),t.\u0275\u0275inject(d.LoadingController),t.\u0275\u0275inject(wt),t.\u0275\u0275inject(R),t.\u0275\u0275inject(ct),t.\u0275\u0275inject(Fe),t.\u0275\u0275inject(pn))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})();function xr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-buttons",7)(1,"ion-button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.listAll("","rd"))}),t.\u0275\u0275text(2,"RD"),t.\u0275\u0275elementEnd()()}}function Ir(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.listAll(o.responsePM.parent_id,"pm"))}),t.\u0275\u0275element(1,"ion-icon",9),t.\u0275\u0275elementEnd()}}function wr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar"),t.\u0275\u0275template(2,xr,3,0,"ion-buttons",2),t.\u0275\u0275elementStart(3,"ion-buttons",3),t.\u0275\u0275template(4,Ir,2,0,"ion-button",4),t.\u0275\u0275elementStart(5,"ion-button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.listAll("","pm"))}),t.\u0275\u0275element(6,"ion-icon",6),t.\u0275\u0275elementEnd()()()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","pm"==e.status&&1==e.rdActive),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","root"!==e.responsePM.name)}}function Er(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.listAll(o.id,"pm"))}),t.\u0275\u0275element(1,"ion-icon",13),t.\u0275\u0275elementStart(2,"ion-card-subtitle",14),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function kr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item"),t.\u0275\u0275element(1,"ion-icon",15),t.\u0275\u0275elementStart(2,"ion-button",16),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.openLink(o))}),t.\u0275\u0275element(3,"ion-icon",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.removeItemAlert(o.id,o.name,s.responsePM.folder_id,"pm"))}),t.\u0275\u0275element(5,"ion-icon",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"ion-card-subtitle",14),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Tr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-list",10),t.\u0275\u0275template(1,Er,4,1,"ion-item",11),t.\u0275\u0275template(2,kr,8,1,"ion-item",0),t.\u0275\u0275elementEnd()),2&r){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","folder"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","file"===e.type)}}function Pr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-card"),t.\u0275\u0275template(1,wr,7,2,"ion-header",0),t.\u0275\u0275template(2,Tr,3,2,"ion-list",1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"!==e.status),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.responsePM.content)}}function Dr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-buttons",7)(1,"ion-button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.listAll("","pm"))}),t.\u0275\u0275text(2,"PM"),t.\u0275\u0275elementEnd()()}}function Ar(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar"),t.\u0275\u0275template(2,Dr,3,0,"ion-buttons",2),t.\u0275\u0275elementStart(3,"ion-buttons",3)(4,"ion-button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.listAll("","rd"))}),t.\u0275\u0275element(5,"ion-icon",6),t.\u0275\u0275elementEnd()()()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","rd"==e.status&&1==e.pmActive)}}function Fr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-list",10)(1,"ion-item"),t.\u0275\u0275element(2,"ion-icon",15),t.\u0275\u0275elementStart(3,"ion-card-subtitle",14),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-button",16),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).index,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.unrestrictLink(a.responseRD.content[0].links[s]))}),t.\u0275\u0275element(6,"ion-icon",17),t.\u0275\u0275elementEnd()()()}if(2&r){const e=i.$implicit;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",e.path," ")}}function Br(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Fr,7,1,"ion-list",1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.responseRD.content[0].files)}}function Mr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.listAll(o.id,"rd"))}),t.\u0275\u0275element(1,"ion-icon",13),t.\u0275\u0275elementStart(2,"ion-card-subtitle",14),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.removeItemAlert(o.id,o.filename,"","rd"))}),t.\u0275\u0275element(5,"ion-icon",19),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e.filename," ")}}function Or(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-list",10),t.\u0275\u0275template(1,Mr,6,1,"ion-item",11),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0!==e.responseRD.item)}}function Lr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Or,2,1,"ion-list",1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.responseRD.content)}}function zr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-card"),t.\u0275\u0275template(1,Ar,6,1,"ion-header",0),t.\u0275\u0275template(2,Br,2,1,"div",0),t.\u0275\u0275template(3,Lr,2,1,"div",0),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"!==e.status),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1==e.responseRD.item),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0==e.responseRD.item)}}let mn=(()=>{class r{constructor(e,n,o,s,a){this.ngZone=e,this.openSourceService=n,this.alertController=o,this.translateService=s,this.debridAccountService=a}ngOnInit(){this.listAll("","init")}listAll(e,n){var o=this;return g(function*(){"pm"==n?(o.status="pm",o.responseRD=null,o.responsePM=yield it.submit(e).toPromise()):"rd"==n?(o.status="rd",o.responsePM=null,o.listAllRD(e)):"init"==n&&(o.status="init",o.debridAccountService.getPremiumizeSettings().then(function(){var s=g(function*(a){null!==a&&(o.pmActive=!0,o.responsePM=yield it.submit(e).toPromise())});return function(a){return s.apply(this,arguments)}}()),o.debridAccountService.getRealDebridSettings().then(s=>{null!==s&&(o.rdActive=!0,o.listAllRD(e))}))})()}listAllRD(e){var n=this;return g(function*(){let o;""==e?(o=yield Zt.submit().toPromise(),n.responseRD={item:!1,content:o}):(o=yield fe.submit(e).toPromise(),n.responseRD={item:!0,content:[o]})})()}openLink(e,n){let s;s="rd"==n?new H(e.id,e.name,e.size,"other","cached_torrent",!1,"RD","RD",e.link):new H(e.id,e.name,e.size,"other","cached_torrent",!1,"PM","PM",e.link);const a=new Te(e.name,e.link,e.name,!0,e.stream_link);s.streamLinks=[a],this.openSourceService.openStreamLinkSource(s,{category:"movie"})}unrestrictLink(e){var n=this;return g(function*(){let o=yield rt.submit(e).toPromise();n.openLink(e={id:o.id,name:o.filename,size:o.filesize,link:o.download,stream_link:o.download},"rd")})()}removeItemAlert(e,n,o,s){var a=this;return g(function*(){var c;yield(yield a.alertController.create({header:a.translateService.instant("alerts.removeAlert"),message:n,buttons:[{text:a.translateService.instant("alerts.cancelButton"),role:"cancel",cssClass:"secondary",handler:()=>{}},{text:a.translateService.instant("alerts.removeButton"),handler:(c=g(function*(){"pm"==s?(yield Yt.submit(e).toPromise(),a.ngZone.run(()=>{a.listAll(o)})):"rd"==s&&(yield ge.submit(e).toPromise(),a.ngZone.run(()=>{a.listAll(o)}))}),function(){return c.apply(this,arguments)})}]})).present()})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(de),t.\u0275\u0275directiveInject(d.AlertController),t.\u0275\u0275directiveInject(T.TranslateService),t.\u0275\u0275directiveInject(oe))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-debrid-files"]],decls:2,vars:2,consts:[[4,"ngIf"],["inset","true","lines","inset",4,"ngFor","ngForOf"],["slot","start",4,"ngIf"],["slot","end"],["fill","solid",3,"click",4,"ngIf"],["fill","solid",3,"click"],["name","home"],["slot","start"],["fill","solid","color","primary",3,"click"],["name","arrow-back"],["inset","true","lines","inset"],["button","true",3,"click",4,"ngIf"],["button","true",3,"click"],["name","folder-open-outline","slot","start",1,"ion-margin-end"],[1,"title"],["name","document-outline","slot","start",1,"ion-margin-end"],["fill","outline","slot","end",1,"ion-no-margin","button-custom-size",3,"click"],["name","play"],["fill","outline","slot","end","color","danger",1,"ion-no-margin","button-custom-size",3,"click"],["name","trash",1,"icon-trash"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,Pr,3,2,"ion-card",0),t.\u0275\u0275template(1,zr,4,3,"ion-card",0)),2&e&&(t.\u0275\u0275property("ngIf",n.responsePM),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.responseRD))},dependencies:[C.NgForOf,C.NgIf,d.IonButton,d.IonButtons,d.IonCard,d.IonCardSubtitle,d.IonHeader,d.IonIcon,d.IonItem,d.IonList,d.IonToolbar],styles:[".title[_ngcontent-%COMP%]{overflow:auto}.icon-trash[_ngcontent-%COMP%]{color:#f53d3d}.button-custom-size[_ngcontent-%COMP%]{height:21px;width:31px;margin:3px}"]}),r})(),Be=(()=>{class r{constructor(){}transform(e){let n=e,o="B";return e>=1099511627776?(n=e/1099511627776,o="TB"):e>=1073741824?(n=e/1073741824,o="GB"):e>=1048576?(n=e/1048576,o="MB"):e>=1024&&(n=e/1024,o="KB"),Math.round(100*n)/100+" "+o}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.\u0275\u0275definePipe({name:"bsFileSize",type:r,pure:!1}),r})();function Ur(r,i){1&r&&t.\u0275\u0275element(0,"ion-icon",14)}function Rr(r,i){1&r&&t.\u0275\u0275element(0,"ion-icon",15)}let hn=(()=>{class r{constructor(e){this.openSourceService=e}download(){var e=this;return g(function*(){yield e.openSourceService.openStreamLinkSource(e.source,e.sourceQuery,e.kodiOpenMedia,"default")})()}more(){var e=this;return g(function*(){yield e.openSourceService.openStreamLinkSource(e.source,e.sourceQuery,e.kodiOpenMedia,"more")})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(de))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-debrid-source-item"]],inputs:{source:"source",sourceQuery:"sourceQuery",kodiOpenMedia:"kodiOpenMedia",isBestSource:"isBestSource"},decls:27,vars:9,consts:[[1,"row"],[1,"ion-activatable","download",3,"click"],[1,"title"],["size","small","color","warning","name","trophy-outline",4,"ngIf"],[1,"ion-no-margin","ion-no-padding"],["size","8",1,"ion-text-left","ion-no-margin","ion-no-padding"],[1,"ion-margin-end"],["color","light"],["name","cube-outline","class","ion-margin-start",4,"ngIf"],[1,"ion-text-right","ion-no-margin","ion-no-padding"],[1,"ion-text-left","ion-no-margin","ion-no-padding"],["color","dark"],[1,"ion-activatable","more",3,"click"],["name","ellipsis-vertical-outline"],["size","small","color","warning","name","trophy-outline"],["name","cube-outline",1,"ion-margin-start"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275listener("click",function(){return n.download()}),t.\u0275\u0275element(2,"ion-ripple-effect"),t.\u0275\u0275elementStart(3,"p",2),t.\u0275\u0275text(4),t.\u0275\u0275template(5,Ur,1,0,"ion-icon",3),t.\u0275\u0275element(6,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p")(8,"ion-grid",4)(9,"ion-row")(10,"ion-col",5)(11,"ion-badge",6),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"ion-badge",7),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"bsFileSize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,Rr,1,0,"ion-icon",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"ion-col",9)(18,"ion-badge"),t.\u0275\u0275text(19),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(20,"ion-row")(21,"ion-col",10)(22,"ion-badge",11),t.\u0275\u0275text(23),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(24,"div",12),t.\u0275\u0275listener("click",function(){return n.more()}),t.\u0275\u0275element(25,"ion-ripple-effect")(26,"ion-icon",13),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",n.source.title," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===n.isBestSource),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ","other"===n.source.quality?"SD":n.source.quality,""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,7,n.source.size),""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.source.isPackage),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(n.source.debridService),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.source.provider))},dependencies:[C.NgIf,d.IonBadge,d.IonCol,d.IonGrid,d.IonIcon,d.IonRippleEffect,d.IonRow,Be],styles:[".row[_ngcontent-%COMP%]{margin-bottom:10px;width:100%;display:inline-flex;background-color:var(--ion-color-dark-tint);border-left:4px solid var(--ion-color-primary-shade)}.row[_ngcontent-%COMP%]   .ion-activatable[_ngcontent-%COMP%]{position:relative;overflow:hidden}.row[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:85%}.row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.row.isBestTorrent[_ngcontent-%COMP%]{border-left-color:var(--ion-color-success-shade)}.row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.9em}.row[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{width:15%;display:flex;align-items:center;justify-content:center;font-size:1.5em}"]}),r})(),fn=(()=>{class r{constructor(e){this.modalController=e}checkIt(){v.WakoCacheService.set("disclaimer-accepted",!0,"3m").then(()=>{this.modalController.dismiss()})}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-disclaimer"]],decls:45,vars:1,consts:[["slot","secondary"],[3,"click"],[1,"ion-padding"],[1,"disclaimer"],[1,"accept","ion-activatable","ion-no-padding"],["slot","start"],["checkBox",""],[1,"ion-text-nowrap"],[1,"accept","ion-activatable","ion-no-padding",3,"click"],[3,"disabled"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.\u0275\u0275text(3,"Helios Add-on"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-buttons",0)(5,"ion-button",1),t.\u0275\u0275listener("click",function(){return n.modalController.dismiss()}),t.\u0275\u0275text(6," X "),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(7,"ion-content",2)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),t.\u0275\u0275text(11," About Helios "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"ion-card-content"),t.\u0275\u0275text(13," Helios is a FREE and open-source third-party add-on developed by the community."),t.\u0275\u0275element(14,"br"),t.\u0275\u0275text(15,"It is a source finder, it scrapes third-party sites (called providers) that "),t.\u0275\u0275elementStart(16,"strong"),t.\u0275\u0275text(17,"you have to provide"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(18," and are "),t.\u0275\u0275elementStart(19,"strong"),t.\u0275\u0275text(20,"publicly available"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(21," on the internet. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(22,"ion-card",3)(23,"ion-card-header")(24,"ion-card-title"),t.\u0275\u0275text(25," Disclaimer "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"ion-card-content"),t.\u0275\u0275text(27," Helios does not host, upload or manage any of the content on these sites and Helios\u2019s add-on, staff and/or developers have no control over the content on these third party sites provided by the end user. Helios claims no responsibility for copyright, legality, accuracy, compliance, decency or any other aspect of the content displayed. It is positively the responsibility of the end user to avoid any actions that may constitute a violation of national, federal or terrestrial laws applicable to them. "),t.\u0275\u0275element(28,"br")(29,"br"),t.\u0275\u0275text(30,"Helios doesn't come with any providers, you have to add them manually."),t.\u0275\u0275element(31,"br")(32,"br"),t.\u0275\u0275text(33,"Helios is not developed nor endorsed by wako, for support create issue on its github or discuss with the community on reddit: https://www.reddit.com/r/Addons4Wako/ "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(34,"ion-card")(35,"ion-card-content",4),t.\u0275\u0275element(36,"ion-checkbox",5,6),t.\u0275\u0275elementStart(38,"ion-label",7),t.\u0275\u0275text(39," I have read and agree with this"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(40,"ion-ripple-effect"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(41,"ion-card")(42,"ion-card-content",8),t.\u0275\u0275listener("click",function(){return n.checkIt()}),t.\u0275\u0275elementStart(43,"ion-button",9),t.\u0275\u0275text(44,"OK"),t.\u0275\u0275elementEnd()()()()),2&e){const o=t.\u0275\u0275reference(37);t.\u0275\u0275advance(43),t.\u0275\u0275property("disabled",!o.checked)}},dependencies:[d.IonButton,d.IonButtons,d.IonCard,d.IonCardContent,d.IonCardHeader,d.IonCardTitle,d.IonCheckbox,d.IonContent,d.IonHeader,d.IonLabel,d.IonRippleEffect,d.IonToolbar,d.IonTitle,d.BooleanValueAccessor],styles:[".accept[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;padding:10px;position:relative;overflow:hidden}"]}),r})();function jr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label",5),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-input",6),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.filter.maxSize=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.setSettings())}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"pages.settings.list.fileSizeFilter.maxSize")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.filter.maxSize)}}function Nr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label",5),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-input",6),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.filter.minSize=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.setSettings())}),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"pages.settings.list.fileSizeFilter.minSize")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.filter.minSize)}}function Vr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-list",1)(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275element(3,"ion-icon",2),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-item")(7,"ion-label"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-toggle",3),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filter.enabled=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.setSettings())}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"ion-item")(12,"em"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(15,jr,5,4,"ion-item",4),t.\u0275\u0275template(16,Nr,5,4,"ion-item",4),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(5,7,"pages.settings.list.fileSizeFilter.header")," (",e.category,") "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,9,"pages.settings.list.fileSizeFilter.enabled")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.filter.enabled),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(14,11,"pages.settings.list.fileSizeFilter.packageWarning")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.filter.enabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.filter.enabled)}}let gn=(()=>{class r{constructor(e){this.settingsService=e,this.category="Movie"}ngOnInit(){var e=this;return g(function*(){e.settings=yield e.settingsService.get(),e.filter="Movie"===e.category?e.settings.fileSizeFilteringMovie:e.settings.fileSizeFilteringTv})()}setSettings(){this.settingsService.set(this.settings)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(R))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-file-size-filter"]],inputs:{category:"category"},decls:1,vars:1,consts:[["lines","full",4,"ngIf"],["lines","full"],["name","funnel-outline"],[3,"ngModel","ngModelChange"],[4,"ngIf"],["position","floating"],["inputmode","numeric",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,Vr,17,13,"ion-list",0),2&e&&t.\u0275\u0275property("ngIf",n.settings)},dependencies:[C.NgIf,k.NgControlStatus,k.NgModel,d.IonIcon,d.IonInput,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,d.IonToggle,d.BooleanValueAccessor,d.TextValueAccessor,T.TranslatePipe]}),r})();function $r(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-select-option",6),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=i.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"actionSheets.open-source.options."+e))}}function Hr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-list",1)(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275element(3,"ion-icon",2),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-item")(7,"ion-label"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-select",3),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.changeDefaultPlayButtonAction(o))}),t.\u0275\u0275template(11,$r,3,4,"ion-select-option",4),t.\u0275\u0275elementStart(12,"ion-select-option",5),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()()()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,5,"pages.settings.list.play-button.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,7,"pages.settings.list.play-button.item")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.settings.defaultPlayButtonAction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.availablePlayButtonActions),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,9,"actionSheets.open-source.options.letMeChoose")," ")}}let ut=(()=>{class r{constructor(e,n){this.settingsService=e,this.platform=n,this.availablePlayButtonActions=[]}ngOnInit(){var e=this;return g(function*(){e.settings=yield e.settingsService.get(),e.availablePlayButtonActions=[],(e.platform.is("ios")?$t.slice(0):Ht.slice(0)).reverse().forEach(o=>{e.settings.availablePlayButtonActions.includes(o)&&e.availablePlayButtonActions.push(o)})})()}changeDefaultPlayButtonAction(e){this.settings.defaultPlayButtonAction=e,this.settingsService.set(this.settings)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(R),t.\u0275\u0275directiveInject(d.Platform))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-play-button"]],decls:1,vars:1,consts:[["lines","full",4,"ngIf"],["lines","full"],["name","play-outline"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","let-me-choose"],[3,"value"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,Hr,15,11,"ion-list",0),2&e&&t.\u0275\u0275property("ngIf",n.settings)},dependencies:[C.NgForOf,C.NgIf,k.NgControlStatus,k.NgModel,d.IonIcon,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,d.IonSelect,d.IonSelectOption,d.SelectValueAccessor,T.TranslatePipe]}),r})();function qr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-list",1)(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275element(3,"ion-icon",6),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-item")(7,"ion-label",7),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-input",8),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.settings.simultaneousProviderQueries=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.setSettings())}),t.\u0275\u0275elementEnd()()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,3,"pages.providers.list.providerSimultaneousHeader")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"pages.providers.list.providerSimultaneousLabel")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.settings.simultaneousProviderQueries)}}function Kr(r,i){1&r&&t.\u0275\u0275element(0,"ion-spinner")}function Wr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item-sliding")(1,"ion-item",5),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).index,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setUrl(s))}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"ion-item-options",9)(4,"ion-item-option",10),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.deleteProvider(s))}),t.\u0275\u0275element(5,"ion-icon",11),t.\u0275\u0275elementEnd()()()}if(2&r){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e," ")}}function Gr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"ion-toggle",13),t.\u0275\u0275listener("ngModelChange",function(o){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(a.enabled=o)})("ngModelChange",function(o){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.toggleProvider(a.key,o))}),t.\u0275\u0275elementEnd()()}if(2&r){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",e.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",e.enabled)}}function Jr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-list",1)(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275element(3,"ion-icon",12),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(6,Gr,4,2,"ion-item",4),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,2,"pages.providers.providerList.header")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.providerArray)}}let pt=(()=>{class r{constructor(e,n,o,s,a,l){this.providerService=e,this.alertController=n,this.translateService=o,this.toastService=s,this.ngZone=a,this.settingsService=l,this.providerAdded=new t.EventEmitter,this.providerArray=[],this.providersUrls=[],this.providerList=null,this.isLoading=!1,this.settings=null}ngOnInit(){var e=this;return g(function*(){e.providersUrls=yield e.providerService.getProviderUrls(),e.providerList=yield e.providerService.getProviders(),e.providerArray=[],e.settings=yield e.settingsService.get(),e.providerList&&(Object.keys(e.providerList).forEach(n=>{const o=e.providerList[n];e.providerArray.push({key:n,enabled:o.enabled,name:Z.getNameWithEmojiFlag(o)})}),e.providerArray.length>0&&e.providerAdded.emit(!0))})()}setUrl(e){var n=this;return g(function*(){let o="";void 0!==e&&n.providersUrls[e]&&(o=n.providersUrls[e]),(yield n.alertController.create({header:"Provider URL",inputs:[{name:"url",type:"url",placeholder:"Provider URL",value:o}],buttons:[{text:n.translateService.instant("alerts.cancelButton"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:a=>{n.ngZone.run(()=>{n.isLoading=!0,n.providerService.addProviderUrl(a.url).pipe(V(()=>n.isLoading=!1)).subscribe(l=>{l?(n.toastService.simpleMessage("toasts.providers.providerUrlAdded"),n.ngOnInit()):n.toastService.simpleMessage("toasts.providers.providerUrlFailedToAdd")},l=>{n.toastService.simpleMessage("toasts.providers.providerUrlFailedToAdd")})})}}]})).present()})()}toggleProvider(e,n){this.providerList[e].enabled=n,this.providerService.setProviders(this.providerList)}deleteProvider(e){this.isLoading=!0,this.providerService.deleteProviderUrl(e).subscribe(()=>{this.ngOnInit(),this.isLoading=!1})}setSettings(){var e=this;return g(function*(){return yield e.settingsService.set(e.settings)})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(Z),t.\u0275\u0275directiveInject(d.AlertController),t.\u0275\u0275directiveInject(T.TranslateService),t.\u0275\u0275directiveInject(ce),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(R))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-providers"]],outputs:{providerAdded:"providerAdded"},decls:13,vars:10,consts:[["lines","full",4,"ngIf"],["lines","full"],["name","logo-dropbox"],[4,"ngIf"],[4,"ngFor","ngForOf"],["button","",3,"click"],["name","speedometer-outline"],[1,"label-provider-speed","ion-text-wrap"],["type","number","size","1",1,"ion-text-right",3,"ngModel","ngModelChange"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["name","list-outline","slot","start"],[3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,qr,11,7,"ion-list",0),t.\u0275\u0275elementStart(1,"ion-list",1)(2,"ion-list-header")(3,"ion-label"),t.\u0275\u0275element(4,"ion-icon",2),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,Kr,1,0,"ion-spinner",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,Wr,6,1,"ion-item-sliding",4),t.\u0275\u0275elementStart(9,"ion-item",5),t.\u0275\u0275listener("click",function(){return n.setUrl()}),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(12,Jr,7,4,"ion-list",0)),2&e&&(t.\u0275\u0275property("ngIf",n.settings),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"pages.providers.list.providersUrl")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.providersUrls),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,8,"pages.providers.list.addProvider")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.providerArray.length>0))},dependencies:[C.NgForOf,C.NgIf,k.NgControlStatus,k.NgModel,d.IonIcon,d.IonInput,d.IonItem,d.IonItemOption,d.IonItemOptions,d.IonItemSliding,d.IonLabel,d.IonList,d.IonListHeader,d.IonSpinner,d.IonToggle,d.BooleanValueAccessor,d.NumericValueAccessor,T.TranslatePipe],styles:[".label-provider-speed[_ngcontent-%COMP%]{width:100%!important;max-width:80%!important;overflow:inherit!important}"]}),r})();function Zr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"ion-toggle",3),t.\u0275\u0275listener("ngModelChange",function(o){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(a.enabled=o)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.toggleSourceQuality())}),t.\u0275\u0275elementEnd()()}if(2&r){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.displayName),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",e.enabled)}}function Yr(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"ion-item")(6,"ion-label",1)(7,"em"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(10,Zr,4,2,"ion-item",2),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,3,"pages.providers.enabledSource.header")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"pages.providers.enabledSource.howItWorks")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.settings.qualities)}}let mt=(()=>{class r{constructor(e){this.settingsService=e}ngOnInit(){var e=this;return g(function*(){e.settings=yield e.settingsService.get()})()}toggleSourceQuality(){this.settingsService.set(this.settings)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(R))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-quality"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"ion-text-wrap"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,Yr,11,7,"ion-list",0),2&e&&t.\u0275\u0275property("ngIf",n.settings)},dependencies:[C.NgForOf,C.NgIf,k.NgControlStatus,k.NgModel,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,d.IonToggle,d.BooleanValueAccessor,T.TranslatePipe]}),r})();function Qr(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-list")(1,"ion-item")(2,"ion-label",1),t.\u0275\u0275text(3,"Group Streams By Quality"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toggle",2),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filter.groupStreamsByQuality=o)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"ion-radio-group",2),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filter.sortTorrentsBy=o)}),t.\u0275\u0275elementStart(6,"ion-list-header")(7,"ion-label"),t.\u0275\u0275text(8,"Sort Torrents By"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"ion-item")(10,"ion-label"),t.\u0275\u0275text(11,"Balanced"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"ion-radio",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"ion-item")(14,"ion-label"),t.\u0275\u0275text(15,"Size"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"ion-radio",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"ion-item")(18,"ion-label"),t.\u0275\u0275text(19,"Seeds"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(20,"ion-radio",5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"ion-item")(22,"ion-label",1),t.\u0275\u0275text(23,"Group Torrents By Quality"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"ion-toggle",2),t.\u0275\u0275listener("ngModelChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.filter.groupTorrentsByQuality=o)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"ion-item",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.close())}),t.\u0275\u0275elementStart(26,"ion-label"),t.\u0275\u0275text(27," Close "),t.\u0275\u0275elementEnd()()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngModel",e.filter.groupStreamsByQuality),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",e.filter.sortTorrentsBy),t.\u0275\u0275advance(19),t.\u0275\u0275property("ngModel",e.filter.groupTorrentsByQuality)}}let ht=(()=>{class r{constructor(e,n){this.popoverController=e,this.settingsService=n}ngOnInit(){var e=this;return g(function*(){e.filter=(yield e.settingsService.get()).sourceFilter})()}close(){var e=this;return g(function*(){e.popoverController.dismiss({filter:e.filter});const n=yield e.settingsService.get();n.sourceFilter=e.filter,yield e.settingsService.set(n)})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.PopoverController),t.\u0275\u0275directiveInject(R))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"ion-text-wrap"],[3,"ngModel","ngModelChange"],["slot","start","value","balanced"],["slot","start","value","size"],["slot","start","value","seeds"],["button","",3,"click"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,Qr,28,3,"ion-list",0),2&e&&t.\u0275\u0275property("ngIf",n.filter)},dependencies:[C.NgIf,k.NgControlStatus,k.NgModel,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,d.IonRadio,d.IonRadioGroup,d.IonToggle,d.BooleanValueAccessor,d.RadioValueAccessor,d.SelectValueAccessor],encapsulation:2}),r})(),ft=(()=>{class r{constructor(e){this.modalCtrl=e}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-cloud-account-list"]],decls:10,vars:3,consts:[[1,"search-list"],["slot","end"],["color","light",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-buttons",1)(6,"ion-button",2),t.\u0275\u0275listener("click",function(){return n.modalCtrl.dismiss()}),t.\u0275\u0275element(7,"ion-icon",3),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(8,"ion-content"),t.\u0275\u0275element(9,"wk-debrid-account"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,"pages.debrid-account.list.title")))},dependencies:[d.IonButton,d.IonButtons,d.IonContent,d.IonHeader,d.IonIcon,d.IonToolbar,d.IonTitle,nt,T.TranslatePipe]}),r})(),Me=(()=>{class r{constructor(e){this.modalCtrl=e}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],decls:11,vars:3,consts:[[1,"search-list"],["slot","end"],["color","light",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-buttons",1)(6,"ion-button",2),t.\u0275\u0275listener("click",function(){return n.modalCtrl.dismiss()}),t.\u0275\u0275element(7,"ion-icon",3),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(8,"ion-content"),t.\u0275\u0275element(9,"wk-quality")(10,"wk-providers"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,"pages.providers.title")))},dependencies:[d.IonButton,d.IonButtons,d.IonContent,d.IonHeader,d.IonIcon,d.IonToolbar,d.IonTitle,pt,mt,T.TranslatePipe],encapsulation:2}),r})();function Xr(r,i){1&r&&t.\u0275\u0275element(0,"ion-icon",14)}function eo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-badge",15),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"bsFileSize"),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.source.size),"")}}function to(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-badge",16),t.\u0275\u0275text(1," ? MB"),t.\u0275\u0275elementEnd())}function no(r,i){1&r&&t.\u0275\u0275element(0,"ion-icon",17)}function io(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-badge",18),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("color",e.source.seeds>=20?e.source.peers>e.source.seeds?"warning":"success":"danger"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("S: ",e.source.seeds," / L: ",e.source.peers," ")}}function ro(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-badge",16),t.\u0275\u0275text(1,"S: ? / L: ?"),t.\u0275\u0275elementEnd())}function oo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-col",10)(1,"ion-badge"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" Cached ",e.source.cachedService," ")}}let _n=(()=>{class r{constructor(e){this.openSourceService=e}download(){this.openSourceService.openTorrentSource(this.source,this.kodiOpenMedia)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(de))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-torrent-source-item"]],inputs:{source:"source",kodiOpenMedia:"kodiOpenMedia",isBestSource:"isBestSource"},decls:24,vars:10,consts:[[1,"row"],[1,"ion-activatable","download",3,"click"],[1,"title"],["size","small","color","warning","name","trophy-outline",4,"ngIf"],[1,"ion-no-margin","ion-no-padding"],[1,"ion-text-left","ion-no-margin","ion-no-padding"],[1,"ion-margin-end"],["color","light",4,"ngIf"],["color","warning",4,"ngIf"],["name","cube-outline","class","ion-margin-start",4,"ngIf"],[1,"ion-text-right","ion-no-margin","ion-no-padding"],[3,"color",4,"ngIf"],["color","dark"],["class","ion-text-right ion-no-margin ion-no-padding",4,"ngIf"],["size","small","color","warning","name","trophy-outline"],["color","light"],["color","warning"],["name","cube-outline",1,"ion-margin-start"],[3,"color"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275listener("click",function(){return n.download()}),t.\u0275\u0275element(2,"ion-ripple-effect"),t.\u0275\u0275elementStart(3,"p",2),t.\u0275\u0275text(4),t.\u0275\u0275template(5,Xr,1,0,"ion-icon",3),t.\u0275\u0275element(6,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p")(8,"ion-grid",4)(9,"ion-row")(10,"ion-col",5)(11,"ion-badge",6),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,eo,3,3,"ion-badge",7),t.\u0275\u0275template(14,to,2,0,"ion-badge",8),t.\u0275\u0275template(15,no,1,0,"ion-icon",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"ion-col",10),t.\u0275\u0275template(17,io,2,3,"ion-badge",11),t.\u0275\u0275template(18,ro,2,0,"ion-badge",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"ion-row")(20,"ion-col",5)(21,"ion-badge",12),t.\u0275\u0275text(22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(23,oo,3,1,"ion-col",13),t.\u0275\u0275elementEnd()()()()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",n.source.title," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===n.isBestSource),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ","other"===n.source.quality?"SD":n.source.quality,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null!==n.source.size),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null===n.source.size),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.source.isPackage),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null!==n.source.seeds),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null===n.source.seeds),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.source.provider),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.source.isCached))},dependencies:[C.NgIf,d.IonBadge,d.IonCol,d.IonGrid,d.IonIcon,d.IonRippleEffect,d.IonRow,Be],styles:[".row[_ngcontent-%COMP%]{margin-bottom:10px;width:100%;display:inline-flex;background-color:var(--ion-color-dark-tint);border-left:4px solid var(--ion-color-primary-shade)}.row[_ngcontent-%COMP%]   .ion-activatable[_ngcontent-%COMP%]{position:relative;overflow:hidden}.row[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:100%}.row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.row.isBestTorrent[_ngcontent-%COMP%]{border-left-color:var(--ion-color-success-shade)}.row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.9em}"]}),r})(),gt=(()=>{class r{constructor(e){this.element=e}keyPressEnter(){this.hideKeyboard()}keyPress(e){e.key.toLowerCase().match("enter")&&this.hideKeyboard()}hideKeyboard(){Keyboard&&Keyboard.hide&&Keyboard.hide(),this.element&&this.element.nativeElement.querySelector("input").blur()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(t.ElementRef))},r.\u0275dir=t.\u0275\u0275defineDirective({type:r,selectors:[["","wkHideKeyboardEnter",""]],hostBindings:function(e,n){1&e&&t.\u0275\u0275listener("keypress.enter",function(){return n.keyPressEnter()})("keypress",function(s){return n.keyPress(s)})}}),r})();const so=function(r){return{category:r}};function ao(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-card-title"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"source-list.noProviderSetCategory",t.\u0275\u0275pureFunction1(4,so,e.sourceQuery.category))," ")}}function lo(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-card-title"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"source-list.noProviderSet")," "))}function co(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-card",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.openProviderModal())}),t.\u0275\u0275elementStart(1,"ion-card-header"),t.\u0275\u0275template(2,ao,3,6,"ion-card-title",0),t.\u0275\u0275template(3,lo,3,3,"ion-card-title",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-card-content"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0===e.providers.length&&e.hasProvider),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===e.providers.length&&!e.hasProvider),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,3,"shared.clickToAddProvider")," ")}}function uo(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-searchbar",12),t.\u0275\u0275listener("ionChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.onSearch(o))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("value",e.searchInput)("placeholder",t.\u0275\u0275pipeBind1(1,3,"source-list.manualFilter"))("showCancelButton",e.searchInput.length>0?"always":"focus")}}function po(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-card",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.openDebridAccountModal())}),t.\u0275\u0275elementStart(1,"ion-card-header")(2,"ion-card-title"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"ion-card-content"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,2,"shared.noDebridAccountSet")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,"shared.clickToAddDebridAccount")," "))}function mo(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-card")(1,"ion-card-content"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"shared.noSourceFound")," "))}function ho(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-debrid-source-item",14),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("sourceQuery",n.sourceQuery)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function fo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,ho,1,4,"wk-debrid-source-item",13),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.streamLinkSources)}}function go(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-debrid-source-item",14),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("sourceQuery",n.sourceQuery)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function _o(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,go,1,4,"wk-debrid-source-item",13),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 2160p/4k (",e.streamLinkSourcesByQuality.sources2160p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.streamLinkSourcesByQuality.sources2160p)}}function vo(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-debrid-source-item",14),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("sourceQuery",n.sourceQuery)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function bo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,vo,1,4,"wk-debrid-source-item",13),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 1080p (",e.streamLinkSourcesByQuality.sources1080p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.streamLinkSourcesByQuality.sources1080p)}}function So(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-debrid-source-item",14),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("sourceQuery",n.sourceQuery)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function yo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,So,1,4,"wk-debrid-source-item",13),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 720p (",e.streamLinkSourcesByQuality.sources720p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.streamLinkSourcesByQuality.sources720p)}}function Co(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-debrid-source-item",14),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("sourceQuery",n.sourceQuery)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function xo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Co,1,4,"wk-debrid-source-item",13),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" Other (",e.streamLinkSourcesByQuality.sourcesOther.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.streamLinkSourcesByQuality.sourcesOther)}}function Io(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,_o,5,2,"div",0),t.\u0275\u0275template(2,bo,5,2,"div",0),t.\u0275\u0275template(3,yo,5,2,"div",0),t.\u0275\u0275template(4,xo,5,2,"div",0),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.streamLinkSourcesByQuality.sources2160p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.streamLinkSourcesByQuality.sources1080p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.streamLinkSourcesByQuality.sources720p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.streamLinkSourcesByQuality.sourcesOther.length>0)}}function wo(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-card")(1,"ion-card-content"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"shared.noSourceFound")))}function Eo(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-torrent-source-item",16),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function ko(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Eo,1,3,"wk-torrent-source-item",15),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.torrentSources)}}function To(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-torrent-source-item",16),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function Po(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,To,1,3,"wk-torrent-source-item",15),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 2160p/4k (",e.torrentSourcesByQuality.sources2160p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.torrentSourcesByQuality.sources2160p)}}function Do(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-torrent-source-item",16),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function Ao(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Do,1,3,"wk-torrent-source-item",15),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 1080p (",e.torrentSourcesByQuality.sources1080p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.torrentSourcesByQuality.sources1080p)}}function Fo(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-torrent-source-item",16),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function Bo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Fo,1,3,"wk-torrent-source-item",15),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" 720p (",e.torrentSourcesByQuality.sources720p.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.torrentSourcesByQuality.sources720p)}}function Mo(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-torrent-source-item",16),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275property("kodiOpenMedia",n.kodiOpenMedia)("source",e)("isBestSource",n.lastPlayedSource&&n.lastPlayedSource.id===e.id)}}function Oo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div")(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Mo,1,3,"wk-torrent-source-item",15),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" Other (",e.torrentSourcesByQuality.sourcesOther.length,")"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.torrentSourcesByQuality.sourcesOther)}}function Lo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Po,5,2,"div",0),t.\u0275\u0275template(2,Ao,5,2,"div",0),t.\u0275\u0275template(3,Bo,5,2,"div",0),t.\u0275\u0275template(4,Oo,5,2,"div",0),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourcesByQuality.sources2160p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourcesByQuality.sources1080p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourcesByQuality.sources720p.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourcesByQuality.sourcesOther.length>0)}}function zo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-text"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" Error: ",e.torrentSourceDetail.errorMessage,"")}}function Uo(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-badge",26),t.\u0275\u0275text(1,"Error"),t.\u0275\u0275elementEnd())}function Ro(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item-option",27),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(s.toggleProvider(o.provider,!1))}),t.\u0275\u0275element(1,"ion-icon",28),t.\u0275\u0275text(2," Disable "),t.\u0275\u0275elementEnd()}}function jo(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item-option",27),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(s.toggleProvider(o.provider,!0))}),t.\u0275\u0275element(1,"ion-icon",29),t.\u0275\u0275text(2," Enable "),t.\u0275\u0275elementEnd()}}function No(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-item-sliding")(1,"ion-item",17)(2,"ion-label",21),t.\u0275\u0275text(3),t.\u0275\u0275template(4,zo,2,1,"ion-text",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-note",22),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"ion-note",22),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,Uo,2,0,"ion-badge",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-item-options",24),t.\u0275\u0275template(11,Ro,3,0,"ion-item-option",25),t.\u0275\u0275template(12,jo,3,0,"ion-item-option",25),t.\u0275\u0275elementEnd()()),2&r){const e=i.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e.provider," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourceDetail.errorMessage),t.\u0275\u0275advance(1),t.\u0275\u0275property("color",e.torrentSourceDetail.sources.length>0?"success":"danger"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.torrentSourceDetail.sources.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("color",e.torrentSourceDetail.timeElapsed<5e3?"success":"warning"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",e.torrentSourceDetail.timeElapsed," ms "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.torrentSourceDetail.errorMessage),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.getProviderStatus(e.provider)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.getProviderStatus(e.provider))}}function Vo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-item",17)(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"ion-spinner",30),t.\u0275\u0275elementEnd()),2&r){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.value.name," ")}}function $o(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-list")(1,"ion-item",17),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,No,13,9,"ion-item-sliding",18),t.\u0275\u0275template(5,Vo,4,1,"ion-item",19),t.\u0275\u0275pipe(6,"keyvalue"),t.\u0275\u0275elementStart(7,"ion-item",17)(8,"ion-label"),t.\u0275\u0275text(9," Total "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-note",20),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd()()()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"sources.statsInfo")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.sourceByProviders),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(6,6,e.providerIsLoading)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",e.totalTimeElapsed," ms ")}}const vn=function(r){return{hidden:r}};function Ho(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"ion-segment",4),t.\u0275\u0275listener("ionChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.segment=o.detail.value)}),t.\u0275\u0275elementStart(2,"ion-segment-button",5)(3,"ion-label"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-segment-button",6)(7,"ion-label"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"ion-segment-button",7)(11,"ion-label"),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(14,uo,2,5,"ion-searchbar",8),t.\u0275\u0275elementStart(15,"div",9)(16,"ion-list",10),t.\u0275\u0275template(17,po,8,6,"ion-card",2),t.\u0275\u0275template(18,mo,4,3,"ion-card",0),t.\u0275\u0275template(19,fo,2,1,"div",0),t.\u0275\u0275template(20,Io,5,4,"div",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"ion-list",10),t.\u0275\u0275template(22,wo,4,3,"ion-card",0),t.\u0275\u0275template(23,ko,2,1,"div",0),t.\u0275\u0275template(24,Lo,5,4,"div",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,$o,12,8,"ion-list",11),t.\u0275\u0275elementEnd()()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("value",e.segment),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(5,18,"sources.segments.debrid")," (",e.totalStreamLinkSource,")"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(9,20,"sources.segments.torrents")," (",e.totalTorrentSource,")"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(13,22,"sources.segments.stats")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","debrid"===e.segment||"torrents"===e.segment),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitch",e.segment),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(24,vn,"debrid"!==e.segment)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.hasDebridAccount),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.hasDebridAccount&&!e.searching&&0===e.totalStreamLinkSource),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.settings.sourceFilter.groupStreamsByQuality),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.settings.sourceFilter.groupStreamsByQuality),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(26,vn,"torrents"!==e.segment)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.searching&&0===e.totalTorrentSource),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.settings.sourceFilter.groupTorrentsByQuality),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.settings.sourceFilter.groupTorrentsByQuality),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","stats")}}function qo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"ion-progress-bar",1),t.\u0275\u0275template(2,co,7,5,"ion-card",2),t.\u0275\u0275template(3,Ho,26,28,"div",0),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("visibility",e.searching?"":"hidden"),t.\u0275\u0275property("value",e.progressBarValue),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sourceQuery&&(0===e.providers.length||!e.hasProvider)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.providers.length>0)}}let _t=(()=>{class r{constructor(e,n,o,s,a){this.sourceService=e,this.debridAccountService=n,this.providerService=o,this.modalController=s,this.settingsService=a,this.sourceByProviders=[],this.providerIsLoading={},this.manualSearchValue=null,this.manualSearchCategory="movie",this.searchOnOpen=!0,this.disableSearch=!1,this.totalStreamLinkSource=0,this.totalTorrentSource=0,this.streamLinkSourcesCopy=[],this.torrentSourcesCopy=[],this.streamLinkSources=[],this.torrentSources=[],this.streamLinkSourcesByQuality={sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},this.torrentSourcesByQuality={sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},this.segment="debrid",this.hasProvider=!0,this.providers=[],this.searching=!0,this.progressBarValue=0,this.totalTimeElapsed=0,this.stopSearch$=new p.Subject,this.initialized=!1,this.searchInput=""}ngOnInit(){var e=this;return g(function*(){e.hasDebridAccount=yield e.debridAccountService.hasAtLeastOneAccount(),e.kodiOpenMedia&&(e.sourceQuery=yield se.getData(e.kodiOpenMedia).toPromise(),e.providers=yield e.providerService.getAll(!0,e.sourceQuery.category)),e.hasProvider=(yield e.providerService.getAll(!0)).length>0,e.settings=yield e.settingsService.get(),e.hasDebridAccount||(e.segment="torrents"),e.initialized=!0,e.searchOnOpen&&e.search(),e.searchOnOpen=!0,e.settingsService.settings$.subscribe(n=>{e.settings=n.newValue,e.filterSources(e.streamLinkSources,e.torrentSources,e.settings)})})()}ngOnDestroy(){this.stopSearch$.next(!0)}ngOnChanges(){var e=this;return g(function*(){!e.initialized||e.search()})()}search(){var e=this;return g(function*(){if(e.disableSearch)return void console.log("HELIOS SEARCH IS DISABLED");if(e.progressBarValue=0,e.totalTimeElapsed=0,e.totalStreamLinkSource=0,e.totalTorrentSource=0,e.streamLinkSourcesByQuality={sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},e.torrentSourcesByQuality={sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},e.streamLinkSources=[],e.torrentSources=[],e.sourceByProviders=[],e.providerIsLoading={},e.stopSearch$.next(!0),!e.kodiOpenMedia||e.manualSearchValue){if(0===e.manualSearchValue.length)return;e.sourceQuery={query:e.manualSearchValue,category:e.manualSearchCategory}}else e.sourceQuery=yield se.getData(e.kodiOpenMedia).toPromise(),e.kodiOpenMedia.movie?e.lastPlayedSource=yield e.sourceService.getLastMoviePlayedSource().toPromise():e.kodiOpenMedia.show&&e.kodiOpenMedia.episode&&(e.lastPlayedSource=yield e.sourceService.getLastEpisodePlayedSource(e.kodiOpenMedia.show.ids.trakt).toPromise());e.providers=yield e.providerService.getAll(!0,e.sourceQuery.category),e.searching=!0;const n=Date.now();let o=0;e.providers.forEach(s=>{e.providerIsLoading[s.name]=s}),e.sourceService.getAll(e.sourceQuery).pipe(dt(e.stopSearch$),V(()=>{e.searching=!1;const s=Date.now();e.totalTimeElapsed=s-n})).subscribe(s=>{o++,delete e.providerIsLoading[s.provider],e.setSources(s,e.settings),e.progressBarValue=o/e.providers.length})})()}setSources(e,n){const o=this.sourceByProviders.slice(0);o.push(e),this.sourceByProviders=o;let s=[],a=[];const l=[],c=[];this.sourceByProviders.forEach(u=>{u.cachedTorrentDetail.sources.forEach(h=>{l.includes(h.id)||(l.push(h.id),s.push(h))}),u.torrentSourceDetail.sources.forEach(h=>{c.includes(h.id)||(c.push(h.id),a.push(h))})}),s=Ve(s,"id"),a=Ve(a,"hash"),this.filterSources(s,a,n)}filterSources(e,n,o){const s=Re;let a=At;"seeds"===o.sourceFilter.sortTorrentsBy?a=Vn:"size"===o.sourceFilter.sortTorrentsBy&&(a=Re),s(e),a(n),this.streamLinkSources=e,this.torrentSources=n,this.streamLinkSourcesByQuality=Ce(e,s),this.torrentSourcesByQuality=Ce(n,a),this.streamLinkSourcesByQualityCopy=Object.assign(this.streamLinkSourcesByQuality),this.torrentSourcesByQualityCopy=Object.assign(this.torrentSourcesByQuality),this.streamLinkSourcesCopy=Object.assign(this.streamLinkSources),this.torrentSourcesCopy=Object.assign(this.torrentSources),this.totalStreamLinkSource=e.length,this.totalTorrentSource=n.length,this.searchInput.length>0&&this.filterSearch()}getProviderStatus(e){return this.providers.find(n=>n.name===e).enabled}toggleProvider(e,n){var o=this;return g(function*(){const s=yield o.providerService.getProviders();Object.keys(s).forEach(a=>{s[a].name===e&&(s[a].enabled=n)}),o.providers.find(a=>a.name===e).enabled=n,yield o.providerService.setProviders(s)})()}openDebridAccountModal(){var e=this;return g(function*(){const n=yield e.modalController.create({component:ft});yield n.present(),n.onDidDismiss().then(()=>e.search())})()}openProviderModal(){var e=this;return g(function*(){const n=yield e.modalController.create({component:Me});yield n.present(),n.onDidDismiss().then(()=>e.search())})()}onSearch(e){this.searchInput=e.target.value?e.target.value:"",""!==this.searchInput?this.filterSearch():this.resetSearch()}resetCounter(){this.totalStreamLinkSource=this.streamLinkSourcesByQuality.sources2160p.length+this.streamLinkSourcesByQuality.sources1080p.length+this.streamLinkSourcesByQuality.sources720p.length+this.streamLinkSourcesByQuality.sourcesOther.length,this.totalTorrentSource=this.torrentSourcesByQuality.sources2160p.length+this.torrentSourcesByQuality.sources1080p.length+this.torrentSourcesByQuality.sources720p.length+this.torrentSourcesByQuality.sourcesOther.length}filterSearch(){this.streamLinkSourcesByQuality=this.getSourcesFilteredByQuality({sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},this.streamLinkSourcesByQualityCopy,this.searchInput),this.torrentSourcesByQuality=this.getSourcesFilteredByQuality({sources2160p:[],sources1080p:[],sources720p:[],sourcesOther:[]},this.torrentSourcesByQualityCopy,this.searchInput),this.streamLinkSources=this.getSourcesFiltered(this.streamLinkSourcesCopy,this.searchInput),this.torrentSources=this.getSourcesFiltered(this.torrentSourcesCopy,this.searchInput),this.resetCounter()}resetSearch(){this.searchInput="",this.streamLinkSourcesByQuality=Object.assign(this.streamLinkSourcesByQualityCopy),this.torrentSourcesByQuality=Object.assign(this.torrentSourcesByQualityCopy),this.streamLinkSources=Object.assign(this.streamLinkSourcesCopy),this.torrentSources=Object.assign(this.torrentSourcesCopy),this.resetCounter()}getSourcesFilteredByQuality(e,n,o){return Object.keys(e).forEach(s=>{n.hasOwnProperty(s)&&(e[s]=n[s].filter(a=>this.isMatching(a.title+" "+a.provider,o)))}),e}getSourcesFiltered(e,n){return e.filter(o=>this.isMatching(o.title+" "+o.provider,n))}isMatching(e,n){return null!==O.stripAccents(e.toLowerCase()).match(O.stripAccents(n.toLowerCase()))}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(Fe),t.\u0275\u0275directiveInject(oe),t.\u0275\u0275directiveInject(Z),t.\u0275\u0275directiveInject(d.ModalController),t.\u0275\u0275directiveInject(R))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-source-list"]],inputs:{manualSearchValue:"manualSearchValue",manualSearchCategory:"manualSearchCategory",kodiOpenMedia:"kodiOpenMedia",searchOnOpen:"searchOnOpen",disableSearch:"disableSearch"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"value"],[3,"click",4,"ngIf"],[3,"click"],["scrollable","",3,"value","ionChange"],["value","debrid"],["value","torrents"],["value","stats"],["wkHideKeyboardEnter","","mode","ios",3,"value","placeholder","showCancelButton","ionChange",4,"ngIf"],[3,"ngSwitch"],[3,"ngClass"],[4,"ngSwitchCase"],["wkHideKeyboardEnter","","mode","ios",3,"value","placeholder","showCancelButton","ionChange"],[3,"kodiOpenMedia","sourceQuery","source","isBestSource",4,"ngFor","ngForOf"],[3,"kodiOpenMedia","sourceQuery","source","isBestSource"],[3,"kodiOpenMedia","source","isBestSource",4,"ngFor","ngForOf"],[3,"kodiOpenMedia","source","isBestSource"],["lines","full"],[4,"ngFor","ngForOf"],["lines","full",4,"ngFor","ngForOf"],["slot","end"],[1,"ion-text-wrap"],["slot","end",3,"color"],["color","danger",4,"ngIf"],["side","end"],["color","dark",3,"click",4,"ngIf"],["color","danger"],["color","dark",3,"click"],["slot","top","name","remove-circle-outline"],["slot","top","name","add-outline"],["name","dots"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,qo,4,5,"div",0),2&e&&t.\u0275\u0275property("ngIf",n.initialized)},dependencies:[C.NgClass,C.NgForOf,C.NgIf,C.NgSwitch,C.NgSwitchCase,d.IonBadge,d.IonCard,d.IonCardContent,d.IonCardHeader,d.IonCardTitle,d.IonIcon,d.IonItem,d.IonItemOption,d.IonItemOptions,d.IonItemSliding,d.IonLabel,d.IonList,d.IonListHeader,d.IonNote,d.IonProgressBar,d.IonSearchbar,d.IonSegment,d.IonSegmentButton,d.IonSpinner,d.IonText,d.SelectValueAccessor,d.TextValueAccessor,_n,hn,gt,C.KeyValuePipe,T.TranslatePipe],styles:["ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.2em}.hidden[_ngcontent-%COMP%]{display:none}"]}),r})();function Ko(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-buttons",7)(1,"ion-button",8),t.\u0275\u0275listener("click",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.openFilterPopover(o))}),t.\u0275\u0275element(2,"ion-icon",9),t.\u0275\u0275elementEnd()()}}let vt=(()=>{class r{constructor(e){this.popoverCtrl=e,this.searchInput="",this.category="movie",this.searchOnOpen=!1,this.showSourceFilter=!0}onSearch(e){e.key.toLowerCase().match("enter")&&(this.searchInput=e.target.value?e.target.value:"")}openFilterPopover(e){var n=this;return g(function*(){yield(yield n.popoverCtrl.create({component:ht,event:e})).present()})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.PopoverController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["helios-plugin-detail"]],inputs:{searchInput:"searchInput",category:"category",kodiOpenMedia:"kodiOpenMedia",searchOnOpen:"searchOnOpen",showSourceFilter:"showSourceFilter"},decls:21,vars:26,consts:[["wkHideKeyboardEnter","","mode","ios",3,"value","placeholder","showCancelButton","keypress","ionCancel"],["slot","end",4,"ngIf"],[3,"ngModel","cancelText","ngModelChange"],["value","movie"],["value","tv"],["value","anime"],[3,"manualSearchCategory","manualSearchValue","kodiOpenMedia","searchOnOpen"],["slot","end"],[3,"click"],["name","funnel-outline"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-toolbar")(1,"ion-searchbar",0),t.\u0275\u0275listener("keypress",function(s){return n.onSearch(s)})("ionCancel",function(){return n.searchInput=""}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,Ko,3,0,"ion-buttons",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-toolbar")(5,"ion-item")(6,"ion-label"),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"ion-select",2),t.\u0275\u0275listener("ngModelChange",function(s){return n.category=s}),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementStart(11,"ion-select-option",3),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"ion-select-option",4),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"ion-select-option",5),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275element(20,"wk-source-list",6)),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("value",n.searchInput)("placeholder",t.\u0275\u0275pipeBind1(2,14,"modals.search-manual.search"))("showCancelButton",n.searchInput.length>0?"always":"focus"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.showSourceFilter),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,16,"modals.search-manual.category")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",n.category)("cancelText",t.\u0275\u0275pipeBind1(10,18,"alerts.cancelButton")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(13,20,"modals.search-manual.categoryOptions.movies")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,22,"modals.search-manual.categoryOptions.tv")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(19,24,"modals.search-manual.categoryOptions.anime")),t.\u0275\u0275advance(2),t.\u0275\u0275property("manualSearchCategory",n.category)("manualSearchValue",n.searchInput)("kodiOpenMedia",n.kodiOpenMedia)("searchOnOpen",n.searchOnOpen))},dependencies:[C.NgIf,k.NgControlStatus,k.NgModel,d.IonButton,d.IonButtons,d.IonIcon,d.IonItem,d.IonLabel,d.IonSearchbar,d.IonSelect,d.IonSelectOption,d.IonToolbar,d.SelectValueAccessor,d.TextValueAccessor,_t,gt,T.TranslatePipe],encapsulation:2}),r})();function Wo(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-title"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.title," ")}}function Go(r,i){1&r&&(t.\u0275\u0275elementStart(0,"ion-title"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"modals.search-source.manual")," "))}function Jo(r,i){if(1&r&&t.\u0275\u0275element(0,"wk-source-list",11),2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("disableSearch",e.disableSearch)("kodiOpenMedia",e.kodiOpenMedia)}}function Zo(r,i){if(1&r&&t.\u0275\u0275element(0,"helios-plugin-detail",12),2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("searchInput",e.manualSearchValue)("category",e.sourceQuery.category)("kodiOpenMedia",e.kodiOpenMedia)("searchOnOpen",!1)("showSourceFilter",!1)}}function Yo(r,i){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Jo,1,2,"wk-source-list",9),t.\u0275\u0275template(2,Zo,1,5,"helios-plugin-detail",10),t.\u0275\u0275elementContainerEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.manualSearch),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.manualSearch)}}let bn=(()=>{class r{constructor(e,n,o,s,a){this.modalCtrl=e,this.actionSheetController=n,this.translateService=o,this.ngZone=s,this.popoverCtrl=a,this.manualSearch=!1,this.showContent=!0,this.disableSearch=!0}ngOnInit(){var e=this;return g(function*(){!e.kodiOpenMedia||(e.lang=e.kodiOpenMedia.titleLang,e.setProperties())})()}ionViewDidEnter(){this.disableSearch=!1}setProperties(){var e=this;return g(function*(){e.manualSearchValue="",(e.kodiOpenMedia.movie||e.kodiOpenMedia.episode)&&(e.sourceQuery=yield se.getData(e.kodiOpenMedia).toPromise(),e.sourceQuery.movie?(e.title=e.sourceQuery.movie.title+" "+(e.sourceQuery.movie.year||""),e.manualSearchValue=e.title):e.sourceQuery.episode.isAnime?(e.title=`${e.sourceQuery.episode.episodeCode} (${e.sourceQuery.episode.absoluteNumber}) - ${e.sourceQuery.episode.title}`,e.manualSearchValue=e.sourceQuery.episode.title+" "+e.sourceQuery.episode.absoluteNumber):(e.title=`${e.sourceQuery.episode.episodeCode} - ${e.sourceQuery.episode.title}`,e.manualSearchValue=e.sourceQuery.episode.title+" "+e.sourceQuery.episode.episodeCode))})()}selectLang(){var e=this;return g(function*(){const n=[];let o={};e.kodiOpenMedia.movie&&(o=e.kodiOpenMedia.movie.alternativeTitles),e.kodiOpenMedia.show&&(o=e.kodiOpenMedia.show.alternativeTitles),Object.keys(o).forEach(a=>{if("original"===a)return void n.unshift({text:"Original - "+o[a],handler:()=>{e.setLang(a)}});const l=Tt("en"===a?"us":a);n.push({text:l+" - "+o[a],handler:()=>{e.setLang(a)}})}),n.push({text:e.translateService.instant("shared.cancel"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}),(yield e.actionSheetController.create({header:e.translateService.instant("actionSheets.search-source.selectTitle"),buttons:n})).present()})()}setLang(e){var n=this;return g(function*(){n.ngZone.run(()=>{n.kodiOpenMedia=Mt(n.kodiOpenMedia,e),n.showContent=!1,n.setProperties(),setTimeout(g(function*(){n.showContent=!0}),100)})})()}openFilterPopover(e){var n=this;return g(function*(){yield(yield n.popoverCtrl.create({component:ht,event:e})).present()})()}dismiss(){this.modalCtrl.dismiss()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController),t.\u0275\u0275directiveInject(d.ActionSheetController),t.\u0275\u0275directiveInject(T.TranslateService),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(d.PopoverController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],inputs:{kodiOpenMedia:"kodiOpenMedia"},decls:21,vars:7,consts:[[4,"ngIf"],["slot","secondary"],[3,"click"],["name","flag-outline"],["slot","icon-only",3,"name"],["name","funnel-outline"],["slot","start"],["color","light",3,"click"],["name","close-outline"],[3,"disableSearch","kodiOpenMedia",4,"ngIf"],[3,"searchInput","category","kodiOpenMedia","searchOnOpen","showSourceFilter",4,"ngIf"],[3,"disableSearch","kodiOpenMedia"],[3,"searchInput","category","kodiOpenMedia","searchOnOpen","showSourceFilter"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar"),t.\u0275\u0275template(2,Wo,2,1,"ion-title",0),t.\u0275\u0275template(3,Go,3,3,"ion-title",0),t.\u0275\u0275elementStart(4,"ion-buttons",1)(5,"ion-button",2),t.\u0275\u0275listener("click",function(){return n.selectLang()}),t.\u0275\u0275element(6,"ion-icon",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"ion-button",2),t.\u0275\u0275listener("click",function(){return n.manualSearch=!n.manualSearch}),t.\u0275\u0275element(8,"ion-icon",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"ion-button",2),t.\u0275\u0275listener("click",function(s){return n.openFilterPopover(s)}),t.\u0275\u0275element(10,"ion-icon",5),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(11,"ion-content"),t.\u0275\u0275template(12,Yo,3,2,"ng-container",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"ion-footer")(14,"ion-toolbar")(15,"ion-title"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"ion-buttons",6)(19,"ion-button",7),t.\u0275\u0275listener("click",function(){return n.dismiss()}),t.\u0275\u0275element(20,"ion-icon",8),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.manualSearch),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.manualSearch),t.\u0275\u0275advance(5),t.\u0275\u0275property("name",n.manualSearch?"list-outline":"search-outline"),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.showContent),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,5,"shared.cancel")," "))},dependencies:[C.NgIf,d.IonButton,d.IonButtons,d.IonContent,d.IonFooter,d.IonHeader,d.IonIcon,d.IonToolbar,d.IonTitle,vt,_t,T.TranslatePipe],encapsulation:2}),r})(),bt=(()=>{class r{constructor(){}ngOnInit(){}openBrowser(e){v.BrowserService.open(e,!1)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-support"]],decls:10,vars:6,consts:[["lines","full"],["name","people-outline","slot","start"],["button","",3,"click"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-list",0)(1,"ion-list-header")(2,"ion-label"),t.\u0275\u0275element(3,"ion-icon",1),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-item",2),t.\u0275\u0275listener("click",function(){return n.openBrowser("https://www.reddit.com/r/Addons4Wako/")}),t.\u0275\u0275elementStart(7,"ion-label"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,2,"pages.support.list.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,4,"pages.support.list.reddit")))},dependencies:[d.IonIcon,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,T.TranslatePipe]}),r})();function Qo(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-buttons",10)(1,"ion-button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.close())}),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"pages.tuto.skip")," "))}let St=(()=>{class r{constructor(e){this.modalController=e,this.slideOpts={effect:"flip"},this.checked=!1}ngOnInit(){this.checkSlides()}close(){this.modalController.dismiss()}goNextSlide(){var e=this;return g(function*(){1===(yield e.slides.getActiveIndex())&&setTimeout(()=>{e.slides.slideNext()},1e3)})()}toggleChecked(){this.checked=!this.checked,this.checkSlides(),this.checked&&(this.slides.slideNext(),v.WakoCacheService.set("disclaimer-accepted",!0,"1m"))}checkSlides(){this.slides.lockSwipes(!this.checked)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-tutorial"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(d.IonSlides,7),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.slides=o.first)}},decls:91,vars:39,consts:[["slot","secondary",4,"ngIf"],[1,"ion-padding"],["pager","true",3,"options"],[1,"disclaimer"],[1,"accept","ion-activatable","ion-no-padding",3,"click"],["slot","start",3,"checked"],[1,"ion-text-nowrap"],[3,"innerHTML"],[3,"providerAdded"],["expand","block",3,"click"],["slot","secondary"],[3,"click"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Qo,4,3,"ion-buttons",0),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"ion-content",1)(7,"ion-slides",2)(8,"ion-slide")(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title"),t.\u0275\u0275text(12," About Helios "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"ion-card-content"),t.\u0275\u0275text(14," Helios is a FREE and open-source third-party add-on developed by the community."),t.\u0275\u0275element(15,"br"),t.\u0275\u0275text(16,"It is a source finder, it scrapes third-party sites (called providers) that "),t.\u0275\u0275elementStart(17,"strong"),t.\u0275\u0275text(18,"you have to provide"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(19," and are "),t.\u0275\u0275elementStart(20,"strong"),t.\u0275\u0275text(21,"publicly available"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(22," on the internet. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"ion-card",3)(24,"ion-card-header")(25,"ion-card-title"),t.\u0275\u0275text(26," Disclaimer "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"ion-card-content"),t.\u0275\u0275text(28," Helios does not host, upload or manage any of the content on these sites and Helios\u2019s add-on, staff and/or developers have no control over the content on these third party sites provided by the end user. Helios claims no responsibility for copyright, legality, accuracy, compliance, decency or any other aspect of the content displayed. It is positively the responsibility of the end user to avoid any actions that may constitute a violation of national, federal or terrestrial laws applicable to them. "),t.\u0275\u0275element(29,"br")(30,"br"),t.\u0275\u0275text(31,"Helios doesn't come with any providers, you have to add them manually."),t.\u0275\u0275element(32,"br")(33,"br"),t.\u0275\u0275text(34,"Helios is not developed nor endorsed by wako, for support create issue on its github or discuss with the community on reddit: https://www.reddit.com/r/Addons4Wako/ "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(35,"ion-card")(36,"ion-card-content",4),t.\u0275\u0275listener("click",function(){return n.toggleChecked()}),t.\u0275\u0275element(37,"ion-checkbox",5),t.\u0275\u0275elementStart(38,"ion-label",6),t.\u0275\u0275text(39," I have read and agree with this"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(40,"ion-ripple-effect"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(41,"ion-slide")(42,"ion-card")(43,"ion-card-header")(44,"ion-card-title"),t.\u0275\u0275text(45),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(47,"ion-card-content",7),t.\u0275\u0275pipe(48,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"wk-providers",8),t.\u0275\u0275listener("providerAdded",function(){return n.goNextSlide()}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(50,"ion-slide")(51,"ion-card")(52,"ion-card-header")(53,"ion-card-title"),t.\u0275\u0275text(54),t.\u0275\u0275pipe(55,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(56,"ion-card-content",7),t.\u0275\u0275pipe(57,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(58,"wk-quality"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"ion-slide")(60,"ion-card")(61,"ion-card-header")(62,"ion-card-title"),t.\u0275\u0275text(63),t.\u0275\u0275pipe(64,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(65,"ion-card-content",7),t.\u0275\u0275pipe(66,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(67,"wk-debrid-account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"ion-slide")(69,"ion-card")(70,"ion-card-header")(71,"ion-card-title"),t.\u0275\u0275text(72),t.\u0275\u0275pipe(73,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(74,"ion-card-content",7),t.\u0275\u0275pipe(75,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(76,"wk-play-button"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(77,"ion-slide"),t.\u0275\u0275element(78,"wk-support"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(79,"ion-slide")(80,"ion-card")(81,"ion-card-header")(82,"ion-card-title"),t.\u0275\u0275text(83),t.\u0275\u0275pipe(84,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(85,"ion-card-content",7),t.\u0275\u0275pipe(86,"translate"),t.\u0275\u0275elementStart(87,"ion-card-content")(88,"ion-button",9),t.\u0275\u0275listener("click",function(){return n.close()}),t.\u0275\u0275text(89),t.\u0275\u0275pipe(90,"translate"),t.\u0275\u0275elementEnd()()()()()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,15,"pages.tuto.title"),""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.checked),t.\u0275\u0275advance(2),t.\u0275\u0275property("options",n.slideOpts),t.\u0275\u0275advance(30),t.\u0275\u0275property("checked",n.checked),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(46,17,"pages.tuto.slide2.title")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(48,19,"pages.tuto.slide2.description"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(55,21,"pages.tuto.slide3.title")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(57,23,"pages.tuto.slide3.description"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(64,25,"pages.tuto.slide4.title")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(66,27,"pages.tuto.slide4.description"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(73,29,"pages.tuto.slide5.title")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(75,31,"pages.tuto.slide5.description"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(9),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(84,33,"pages.tuto.slide6.title")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(86,35,"pages.tuto.slide6.description"),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(90,37,"pages.tuto.slide6.button")))},dependencies:[C.NgIf,d.IonButton,d.IonButtons,d.IonCard,d.IonCardContent,d.IonCardHeader,d.IonCardTitle,d.IonCheckbox,d.IonContent,d.IonHeader,d.IonLabel,d.IonRippleEffect,d.IonSlide,d.IonSlides,d.IonToolbar,d.IonTitle,d.BooleanValueAccessor,pt,mt,nt,ut,bt,T.TranslatePipe],styles:["ion-slides[_ngcontent-%COMP%]{height:100%}ion-slides[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{text-align:inherit;overflow:auto}.swiper-slide[_ngcontent-%COMP%]{display:block}.disclaimer[_ngcontent-%COMP%]{max-height:60%;overflow:scroll}.accept[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;padding:10px;position:relative;overflow:hidden}"]}),r})();const Xo=$e(r=>function(e=null){r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function ts(r){throw new Xo(r)}function ns(r,i){if(1&r&&(t.\u0275\u0275elementStart(0,"ion-row")(1,"ion-col")(2,"ion-text",10),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"bsFileSize"),t.\u0275\u0275elementEnd()()()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",e.bestSource.title," - ",e.bestSource.provider," - ",t.\u0275\u0275pipeBind1(4,4,e.bestSource.size)," - ",e.elapsedTime," ms ")}}function is(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-grid",2)(1,"ion-row",3)(2,"ion-col",4)(3,"ion-button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.play())}),t.\u0275\u0275element(4,"ion-icon",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"ion-col",7)(6,"ion-button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.openSourceModal())}),t.\u0275\u0275element(7,"ion-icon",9),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(8,ns,5,6,"ion-row",0),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.bestSource)}}function rs(r,i){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,is,9,1,"ion-grid",1),t.\u0275\u0275elementContainerEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.settings)}}function os(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",11)(2,"ion-item-option",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.play())}),t.\u0275\u0275elementStart(3,"div",13),t.\u0275\u0275element(4,"ion-icon",14),t.\u0275\u0275elementStart(5,"ion-text"),t.\u0275\u0275text(6," Helios Play "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"ion-item-option",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.openSourceModal())}),t.\u0275\u0275elementStart(8,"div",13),t.\u0275\u0275element(9,"ion-icon",16),t.\u0275\u0275elementStart(10,"ion-text"),t.\u0275\u0275text(11," Helios Sources "),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd()}}let Oe=(()=>{class r{constructor(e,n,o,s,a,l,c,u){this.modalCtrl=e,this.sourceService=n,this.settingsService=o,this.loadingCtrl=s,this.openSourceService=a,this.providerService=l,this.toastService=c,this.modalController=u,this.type="button",this.elapsedTime=0}ngOnInit(){var e=this;return g(function*(){e.setKodiOpenMedia()})()}setKodiOpenMedia(){var e=this;return g(function*(){e.settings=yield e.settingsService.get();const o=e.settings.defaultTitleLang||"us",a=JSON.parse(JSON.stringify({movie:e.movie,show:e.show,episode:e.episode,titleLang:"us"}));if(a.movie){const l=a.movie.title;a.movie.alternativeTitles||(a.movie.alternativeTitles={}),a.movie.alternativeTitles.original||(a.movie.alternativeTitles.original=a.movie.originalTitle),a.movie.alternativeTitles.us||(a.movie.alternativeTitles.us=l)}if(a.show){const l=a.show.title;a.show.alternativeTitles||(a.show.alternativeTitles={}),a.show.alternativeTitles.original||(a.show.alternativeTitles.original=a.show.originalTitle),a.show.alternativeTitles.us||(a.show.alternativeTitles.us=l)}e.kodiOpenMedia=Mt(a,o)})()}openProviderModal(){var e=this;return g(function*(){const n=yield e.modalController.create({component:Me});yield n.present(),n.onDidDismiss().then(()=>e.play())})()}play(){var e=this;return g(function*(){if(yield e.needsToDisplayDisclaimer())return;if(0===(yield e.providerService.getAll(!0)).length)return e.toastService.simpleMessage("source-list.noProviderSet"),void e.openProviderModal();const o=yield e.loadingCtrl.create({message:"Searching for sources",backdropDismiss:!0});o.present();const s=Date.now();let a=!1;const l=e.sourceService.getBestSourceFromKodiOpenMedia(e.kodiOpenMedia).pipe(V(()=>{a=!0,o.dismiss()}),function es(r,i){const{first:e,each:n,with:o=ts,scheduler:s=i??rn,meta:a=null}=on(r)?{first:r}:"number"==typeof r?{each:r}:r;if(null==e&&null==n)throw new TypeError("No timeout provided.");return U((l,c)=>{let u,h,m=null,f=0;const _=b=>{h=sn(c,s,()=>{try{u.unsubscribe(),re(o({meta:a,lastValue:m,seen:f})).subscribe(c)}catch(S){c.error(S)}},b)};u=l.subscribe(M(c,b=>{h?.unsubscribe(),f++,c.next(m=b),n>0&&_(n)},void 0,void 0,()=>{h?.closed||h?.unsubscribe(),m=null})),!f&&_(null!=e?"number"==typeof e?e:+e-s.now():n)})}(12e3),D(()=>(0,p.of)(null))).subscribe(c=>{a=!0,o.dismiss();const u=Date.now();if(e.elapsedTime=u-s,P(`Get bestSource ${c} in ${e.elapsedTime} ms`),!c)return e.toastService.simpleMessage("shared.noBestSource",null,4e3),void e.openSourceModal();e.bestSource=c,"torrent"===c.type?e.openSourceService.open(c,"open-elementum",e.kodiOpenMedia):c instanceof H&&e.openSourceService.open(c,e.settings.defaultPlayButtonAction,e.kodiOpenMedia)});o.onDidDismiss().then(()=>{a||l.unsubscribe()})})()}openSourceModal(){var e=this;return g(function*(){(yield e.needsToDisplayDisclaimer())||(yield e.modalCtrl.create({component:bn,componentProps:{kodiOpenMedia:e.kodiOpenMedia}})).present()})()}needsToDisplayDisclaimer(){var e=this;return g(function*(){return!(yield(0,p.lastValueFrom)(v.WakoCacheService.get("disclaimer-accepted")))&&(yield(yield e.modalController.create({component:fn,backdropDismiss:!1})).present(),!0)})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController),t.\u0275\u0275directiveInject(Fe),t.\u0275\u0275directiveInject(R),t.\u0275\u0275directiveInject(d.LoadingController),t.\u0275\u0275directiveInject(de),t.\u0275\u0275directiveInject(Z),t.\u0275\u0275directiveInject(ce),t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-open-button"]],inputs:{movie:"movie",show:"show",episode:"episode",type:"type"},decls:2,vars:2,consts:[[4,"ngIf"],["class","ion-no-padding",4,"ngIf"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["size","8",1,"col-left"],["color","primary","expand","block",3,"click"],["name","play-outline","color","light","slot","icon-only"],[1,"col-right"],["color","light","expand","block","fill","outline",3,"click"],["mode","ios","name","list-outline","color","light","slot","icon-only"],[1,"best-source","ion-text-center"],[1,"ion-item-options"],[3,"click"],[1,"ion-item-detail"],["name","play-outline"],["color","dark",3,"click"],["mode","ios","name","list-outline"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,rs,2,1,"ng-container",0),t.\u0275\u0275template(1,os,12,0,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf","button"===n.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","item-option"===n.type))},dependencies:[C.NgIf,d.IonButton,d.IonCol,d.IonGrid,d.IonIcon,d.IonItemOption,d.IonRow,d.IonText,Be],styles:[".best-source[_ngcontent-%COMP%]{font-size:10px;font-style:italic}.col-left[_ngcontent-%COMP%]{padding-left:0}.col-right[_ngcontent-%COMP%]{padding-right:0}.ion-item-options[_ngcontent-%COMP%]{display:flex;height:100%}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]{width:60px;display:grid;text-align:center}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;width:100%}.ion-item-options[_ngcontent-%COMP%]   .ion-item-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{margin-top:3px;font-size:8px;text-transform:none}"]}),r})(),Sn=(()=>{class r extends v.EpisodeDetailBaseComponent{setShowEpisode(e,n){this.show=e,this.episode=n}}return r.\u0275fac=function(){let i;return function(n){return(i||(i=t.\u0275\u0275getInheritedFactory(r)))(n||r)}}(),r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"show","episode"]],template:function(e,n){1&e&&t.\u0275\u0275element(0,"wk-open-button",0),2&e&&t.\u0275\u0275property("show",n.show)("episode",n.episode)},dependencies:[Oe]}),r})(),yn=(()=>{class r extends v.EpisodeDetailBaseComponent{setShowEpisode(e,n){this.show=e,this.episode=n}}return r.\u0275fac=function(){let i;return function(n){return(i||(i=t.\u0275\u0275getInheritedFactory(r)))(n||r)}}(),r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","item-option",3,"show","episode"]],template:function(e,n){1&e&&t.\u0275\u0275element(0,"wk-open-button",0),2&e&&t.\u0275\u0275property("show",n.show)("episode",n.episode)},dependencies:[Oe]}),r})(),Cn=(()=>{class r extends v.MovieDetailBaseComponent{setMovie(e){this.movie=e}}return r.\u0275fac=function(){let i;return function(n){return(i||(i=t.\u0275\u0275getInheritedFactory(r)))(n||r)}}(),r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"movie"]],template:function(e,n){1&e&&t.\u0275\u0275element(0,"wk-open-button",0),2&e&&t.\u0275\u0275property("movie",n.movie)},dependencies:[Oe]}),r})();function ss(r){return r<=0?()=>tt:U((i,e)=>{let n=0;i.subscribe(M(e,o=>{++n<=r&&(e.next(o),r<=n&&e.complete())}))})}let xn=(()=>{class r{constructor(e){this.debridAccountService=e}sortByNameAsc(e){e.sort((n,o)=>n.label===o.label?0:n.label>o.label?1:-1)}fetchChildrenRD(e,n){return fe.submit(n).pipe(I(o=>{const s={isRoot:!1,title:e,folderId:null,parentId:null,label:o.filename,items:[],goToParentAction:this.getFromRD()};return o.files.forEach((a,l)=>{const c={id:o.id,size:o.bytes,customData:{type:"RD",link:o.links[l]}};s.items.push({id:o.id,createdAt:null,label:"/"===a.path[0]?a.path.substr(1):a.path,pluginId:"plugin.helios",type:"file",file:c,fetchChildren:null,deleteAction:null})}),this.sortByNameAsc(s.items),s.title+=` (${s.items.length})`,s.label+=` (${s.items.length})`,s}))}getFromRD(){return Zt.submit().pipe(I(e=>{const n={isRoot:!0,folderId:null,parentId:null,title:"Real Debrid",label:"Real Debrid",items:[],goToParentAction:null};return e.forEach(o=>{100===o.progress&&(1===o.links.length?o.links.forEach(s=>{n.items.push({id:o.id,createdAt:null,label:o.filename,pluginId:"plugin.helios",type:"file",file:{id:o.id,size:o.bytes,customData:{type:"RD",link:s}},fetchChildren:null,deleteAction:ge.submit(o.id).pipe(K(!0))})}):n.items.push({id:o.id,createdAt:null,label:o.filename,pluginId:"plugin.helios",type:"folder",fetchChildren:this.fetchChildrenRD(o.filename,o.id),deleteAction:ge.submit(o.id).pipe(K(!0))}))}),n.title+=` (${n.items.length})`,n.label+=` (${n.items.length})`,n}))}getFromAD(){return cn.submit(null,"ready").pipe(I(e=>{const n={isRoot:!0,folderId:null,parentId:null,title:"All Debrid",label:"All Debrid",items:[],goToParentAction:null};if("success"!==e.status)return n;const o=[];return e.data.magnets.hasOwnProperty("id")?o.push(e.data.magnets):Object.values(e.data.magnets).forEach(s=>{o.push(s)}),o.forEach(s=>{s.links.forEach(a=>{ee(a.filename)&&n.items.push({id:a.link,createdAt:null,label:a.filename,pluginId:"plugin.helios",type:"file",file:{id:a.link,size:a.size,customData:{type:"AD",magnet:s,link:a}},fetchChildren:null,deleteAction:an.submit(s.id).pipe(K(!0))})})}),n.title+=` (${n.items.length})`,n.label+=` (${n.items.length})`,n}))}get(){return this.debridAccountService.ready$.pipe(function as(r,i){const e=arguments.length>=2;return n=>n.pipe(r?Kt((o,s)=>r(o,s,n)):me,ss(1),e?Gt(i):Wt(()=>new et))}(),y(()=>{const e=[];return q.hasApiKey()&&e.push(this.getFromPM()),z.getToken()&&e.push(this.getFromRD()),$.hasApiKey()&&e.push(this.getFromAD()),(0,p.forkJoin)(e)}))}getLinkFromFile(e){var n=this;return g(function*(){const o=e.customData;return"RD"===o.type?n.getLinkFromFileRD(e):"AD"===o.type?n.getLinkFromFileAD(e):null})()}getLinkFromFileRD(e){return g(function*(){const n=e.customData,o=yield rt.submit(n.link).toPromise();return e.customData.servicePlayerUrl=`https://real-debrid.com/streaming-${o.id}`,o.download})()}getLinkFromFileAD(e){return g(function*(){const n=e.customData;return(yield ln.submit(n.link.link).toPromise()).data.link})()}getFromPM(e){return it.submit(e).pipe(I(n=>{if("error"===n.status)throw new Error(n.message??JSON.stringify(n));const o={isRoot:"root"===n.name,title:"root"===n.name?"Premiumize":n.name,folderId:n.folder_id,parentId:n.parent_id,label:n.name,items:[],goToParentAction:"root"===n.name?null:this.getFromPM(n.parent_id)};return n.content.forEach(s=>{if("file"===s.type&&!s.stream_link&&!s.link)return;let a=null;"file"===s.type&&(a={id:s.id,size:s.size,link:s.link,streamLink:s.stream_link}),o.items.push({id:s.id,createdAt:null,label:s.name,pluginId:"plugin.helios",type:s.type,file:a,fetchChildren:"folder"===s.type?this.getFromPM(s.id):null,deleteAction:"folder"===s.type?this.deleteFolderFromPMById(s.id):this.deleteFileFromPMById(s.id)})}),o.title+=` (${o.items.length})`,o.label+=` (${o.items.length})`,o}))}deleteFolderFromPMById(e){return class ls{static submit(i){return q.get("/folder/delete",{id:i})}}.submit(e).pipe(I(()=>!0))}deleteFileFromPMById(e){return Yt.submit(e).pipe(I(()=>!0))}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(oe))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})(),In=(()=>{class r extends v.PluginBaseService{constructor(e,n,o,s,a,l,c,u){super(),this.translate=e,this.cloudService=n,this.providerService=o,this.modalController=s,this.storage=a,this.openSourceService=l,this.explorerService=c,this.fileActionService=u}initialize(){var e=this;return g(function*(){P("plugin initialized"),yield e.providerService.initialize(),yield e.cloudService.initialize()})()}afterInstall(){P("plugin installed"),this.runSetupWizard()}setTranslation(e,n){this.translate.setDefaultLang(e),this.translate.use(e),this.translate.setTranslation(e,n)}customAction(e,n){if("resume"===e){const o=n;console.log("HELIOS resume",o),this.openSourceService.openPlaylistVideo(o)}}runSetupWizard(){var e=this;return g(function*(){(yield e.storage.get("helios_setup_wizard_seen_for_dev"))||(document.location.href.match("localhost:4200")&&(yield e.storage.set("helios_setup_wizard_seen_for_dev",!0)),yield(yield e.modalController.create({component:St,backdropDismiss:!1})).present())})()}beforeMovieMiddleware(e){throw new Error("Method not implemented.")}afterMovieMiddleware(e){throw new Error("Method not implemented.")}beforeShowMiddleware(e){throw new Error("Method not implemented.")}afterShowMiddleware(e){throw new Error("Method not implemented.")}beforeEpisodeMiddleware(e,n){throw new Error("Method not implemented.")}afterEpisodeMiddleware(e,n){throw new Error("Method not implemented.")}fetchExplorerFolderItem(){return this.explorerService.get().toPromise()}getFileActionButtons(e,n,o,s,a,l){var c=this;return g(function*(){const u=yield c.explorerService.getLinkFromFile(e);return yield c.fileActionService.getFileActionButtons(u,u,n,o,s,a,l)})()}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(T.TranslateService),t.\u0275\u0275inject(oe),t.\u0275\u0275inject(Z),t.\u0275\u0275inject(d.ModalController),t.\u0275\u0275inject(v.WakoStorage),t.\u0275\u0275inject(de),t.\u0275\u0275inject(xn),t.\u0275\u0275inject(v.WakoFileActionService))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})(),wn=(()=>{class r{constructor(e){this.modalCtrl=e}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(d.ModalController))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["wk-cloud-account-files"]],decls:10,vars:3,consts:[[1,"search-list"],["slot","end"],["color","light",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-buttons",1)(6,"ion-button",2),t.\u0275\u0275listener("click",function(){return n.modalCtrl.dismiss()}),t.\u0275\u0275element(7,"ion-icon",3),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(8,"ion-content"),t.\u0275\u0275element(9,"wk-debrid-files"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,"pages.debrid-account.list.title")))},dependencies:[d.IonButton,d.IonButtons,d.IonContent,d.IonHeader,d.IonIcon,d.IonToolbar,d.IonTitle,mn,T.TranslatePipe]}),r})();function cs(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"ion-reorder",14),t.\u0275\u0275elementStart(5,"ion-toggle",15),t.\u0275\u0275listener("ngModelChange",function(o){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(a.enabled=o)})("ionChange",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.savePlayButtonAction())}),t.\u0275\u0275elementEnd()()}if(2&r){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"actionSheets.open-source.options."+e.action)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",e.enabled)}}function ds(r,i){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"ion-list",0)(2,"ion-list-header")(3,"ion-label",1),t.\u0275\u0275element(4,"ion-icon",7),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"ion-item")(8,"ion-label",1),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"ion-toggle",8),t.\u0275\u0275listener("ionChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.setEnableEpisodeAutomaticPlaylist(o.detail.checked))}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"ion-list",0)(13,"ion-list-header")(14,"ion-label",1),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"ion-item")(18,"ion-label",1),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"ion-toggle",8),t.\u0275\u0275listener("ionChange",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.setOpenRemoteAfterClickOnPlaySetting(o.detail.checked))}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(22,"wk-play-button"),t.\u0275\u0275elementStart(23,"ion-list",0)(24,"ion-list-header")(25,"ion-label",1),t.\u0275\u0275element(26,"ion-icon",9),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"ion-reorder-group",10),t.\u0275\u0275listener("ionItemReorder",function(o){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.doReorder(o))}),t.\u0275\u0275template(30,cs,6,4,"ion-item",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(31,"wk-file-size-filter",12)(32,"wk-file-size-filter",13),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,8,"pages.settings.list.playlist.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,10,"pages.settings.list.playlist.item")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.settings.enableEpisodeAutomaticPlaylist),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(16,12,"pages.settings.list.openRemoteList.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,14,"pages.settings.list.openRemoteList.item"),""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.settings.openRemoteAfterClickOnPlay),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(28,16,"pages.settings.list.actions.header")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",e.playButtonActionsSettings)}}let En=(()=>{class r{constructor(e,n,o,s){this.translate=e,this.modalCtrl=n,this.settingsService=o,this.platform=s,this.availablePlayButtonActions=[],this.playButtonActionsSettings=[]}ngOnInit(){var e=this;return g(function*(){e.settings=yield e.settingsService.get(),e.availablePlayButtonActions=[],e.playButtonActionsSettings=[];const n=e.platform.is("ios")?$t.slice(0):Ht.slice(0);e.settings.availablePlayButtonActions.forEach(o=>{n.includes(o)&&e.playButtonActionsSettings.push({action:o,enabled:!0})}),n.reverse().forEach(o=>{e.settings.availablePlayButtonActions.includes(o)&&e.availablePlayButtonActions.push(o),e.settings.availablePlayButtonActions.includes(o)||e.playButtonActionsSettings.push({action:o,enabled:!1})})})()}openSetupWizard(){var e=this;return g(function*(){(yield e.modalCtrl.create({component:St})).present()})()}openProviders(){var e=this;return g(function*(){(yield e.modalCtrl.create({component:Me})).present()})()}openCloudAccount(){var e=this;return g(function*(){(yield e.modalCtrl.create({component:ft})).present()})()}openCloudFiles(){var e=this;return g(function*(){(yield e.modalCtrl.create({component:wn})).present()})()}doReorder(e){console.log(this.playButtonActionsSettings),this.playButtonActionsSettings=e.detail.complete(this.playButtonActionsSettings),this.savePlayButtonAction()}savePlayButtonAction(){const e=[];this.playButtonActionsSettings.forEach(n=>{n.enabled&&e.push(n.action)}),this.settings.availablePlayButtonActions=e,this.settingsService.set(this.settings)}setOpenRemoteAfterClickOnPlaySetting(e){this.settings.openRemoteAfterClickOnPlay=e,this.settingsService.set(this.settings)}setEnableEpisodeAutomaticPlaylist(e){this.settings.enableEpisodeAutomaticPlaylist=e,this.settingsService.set(this.settings)}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(T.TranslateService),t.\u0275\u0275directiveInject(d.ModalController),t.\u0275\u0275directiveInject(R),t.\u0275\u0275directiveInject(d.Platform))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],decls:35,vars:19,consts:[["lines","full"],[1,"ion-text-wrap"],["name","settings-outline","slot","start"],["button","",3,"click"],["name","people-outline","slot","start"],["name","wifi-outline","slot","start"],[4,"ngIf"],["name","list-outline","slot","start"],[3,"ngModel","ionChange"],["name","funnel-outline"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf"],["category","Movie"],["category","TV Show"],["slot","start"],[3,"ngModel","ngModelChange","ionChange"]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"wk-support"),t.\u0275\u0275elementStart(1,"ion-list",0)(2,"ion-list-header")(3,"ion-label",1),t.\u0275\u0275element(4,"ion-icon",2),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"ion-item",3),t.\u0275\u0275listener("click",function(){return n.openSetupWizard()}),t.\u0275\u0275elementStart(8,"ion-label",1),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"ion-list",0)(12,"ion-list-header")(13,"ion-label",1),t.\u0275\u0275element(14,"ion-icon",4),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"ion-item",3),t.\u0275\u0275listener("click",function(){return n.openCloudAccount()}),t.\u0275\u0275elementStart(18,"ion-label",1),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"ion-item",3),t.\u0275\u0275listener("click",function(){return n.openCloudFiles()}),t.\u0275\u0275elementStart(22,"ion-label",1),t.\u0275\u0275text(23,"Cloud Files"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(24,"ion-list",0)(25,"ion-list-header")(26,"ion-label",1),t.\u0275\u0275element(27,"ion-icon",5),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"ion-item",3),t.\u0275\u0275listener("click",function(){return n.openProviders()}),t.\u0275\u0275elementStart(31,"ion-label",1),t.\u0275\u0275text(32),t.\u0275\u0275pipe(33,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(34,ds,33,18,"div",6)),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,7,"pages.settings.list.wizard.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,9,"pages.settings.list.wizard.item")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(16,11,"pages.settings.list.debrid-account.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(20,13,"pages.settings.list.debrid-account.item")),t.\u0275\u0275advance(9),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(29,15,"pages.settings.list.provider.header")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(33,17,"pages.settings.list.provider.item")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.settings))},dependencies:[C.NgForOf,C.NgIf,k.NgControlStatus,k.NgModel,d.IonIcon,d.IonItem,d.IonLabel,d.IonList,d.IonListHeader,d.IonReorder,d.IonReorderGroup,d.IonToggle,d.BooleanValueAccessor,ut,bt,gn,T.TranslatePipe]}),r})(),kn=(()=>{class r extends v.PluginBaseModule{}return r.pluginService=In,r.settingsComponent=En,r.movieComponent=Cn,r.episodeComponent=Sn,r.episodeItemOptionComponent=yn,r.pluginDetailComponent=vt,r.\u0275fac=function(){let i;return function(n){return(i||(i=t.\u0275\u0275getInheritedFactory(r)))(n||r)}}(),r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({providers:[In,dn,ce,v.BrowserService,Z,oe,de,Be,Fe,R,ct,pn,xn,...v.WakoProviders],imports:[C.CommonModule,k.FormsModule,d.IonicModule.forRoot(),T.TranslateModule.forRoot(),Rn,le.forRoot({})]}),r})();const us=kn})(),Le})());